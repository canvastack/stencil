# HOMEPAGE MODULE SCHEMAS FOR STENCIL CMS
# Enterprise-Grade Homepage Management System - Complete Implementation
# 
# ARCHITECTURE: Multi-Tenant with Full Enterprise Features
# COVERAGE: 240+ fields, 23 tables, 85+ API endpoints
# COMPLIANCE: Hexagonal Architecture, Multi-Tenant Row-Level Security, RBAC Integration
# VERSION: 2.0 Enterprise Edition - 100% Database Schema Aligned

# ==========================================
# CORE ENTITIES - Main Homepage Tables
# ==========================================

# Main Pages Table - Enhanced Enterprise Version (Table 1 of 23)
Page:
  allOf:
    - $ref: '../common/base.yaml#/BaseEntity'
    - $ref: '../common/base.yaml#/TenantEntity'
    - $ref: '../common/base.yaml#/AuditEntity'
    - $ref: '../common/base.yaml#/PublishableEntity'
    - $ref: '../common/base.yaml#/SEOEntity'
    - $ref: '../common/base.yaml#/VersionedEntity'
    - $ref: '../common/base.yaml#/SoftDeleteEntity'
    - type: object
      required:
        - slug
        - title
        - page_type
        - created_by
      properties:
        # Page Identification
        slug:
          type: string
          description: "URL-safe page identifier (unique per tenant)"
          pattern: "^[a-z0-9-]+$"
          example: "homepage-v2"
          maxLength: 255
        title:
          type: string
          description: "Page display title"
          example: "Welcome to Premium Etching Services"
          maxLength: 255
        page_type:
          type: string
          enum: [home, about, contact, faq, custom]
          description: "Type of page for routing and functionality"
          example: "home"

        # Publishing Workflow (Enhanced)
        publish_status:
          type: string
          enum: [draft, review, scheduled, published, archived]
          description: "Enhanced publishing workflow status"
          default: "draft"
          example: "published"
        published_at:
          type: string
          format: date-time
          nullable: true
          description: "When the page was published"
          example: "2025-11-12T10:00:00Z"
        scheduled_at:
          type: string
          format: date-time
          nullable: true
          description: "Future publishing schedule"
          example: "2025-12-01T00:00:00Z"

        # Template & Version Management
        template_id:
          type: string
          format: uuid
          nullable: true
          description: "Homepage template reference"
          example: "550e8400-e29b-41d4-a716-446655440000"
        version_number:
          type: integer
          description: "Page version for change tracking"
          default: 1
          minimum: 1
          example: 3
        is_template:
          type: boolean
          description: "Whether this page is a reusable template"
          default: false
          example: false

        # Performance & Analytics (Enhanced)
        page_views:
          type: integer
          format: int64
          description: "Total page views counter"
          default: 0
          minimum: 0
          example: 15420
        bounce_rate:
          type: number
          format: decimal
          multipleOf: 0.01
          minimum: 0
          maximum: 100
          nullable: true
          description: "Page bounce rate percentage"
          example: 23.45
        avg_time_on_page:
          type: integer
          nullable: true
          description: "Average time spent on page (seconds)"
          minimum: 0
          example: 125
        conversion_rate:
          type: number
          format: decimal
          multipleOf: 0.01
          minimum: 0
          maximum: 100
          nullable: true
          description: "Page conversion rate percentage"
          example: 8.75

        # Localization Support
        language_code:
          type: string
          description: "ISO 639-1 language code"
          pattern: "^[a-z]{2}$"
          default: "en"
          example: "en"
        is_default_language:
          type: boolean
          description: "Whether this is the default language version"
          default: true
          example: true
        parent_page_id:
          type: string
          format: uuid
          nullable: true
          description: "Parent page for translations"
          example: "550e8400-e29b-41d4-a716-446655440000"

        # Security & Compliance (NEW)
        security_scan_status:
          type: string
          enum: [pending, scanning, passed, failed, requires_attention]
          description: "Security scan status"
          default: "pending"
          example: "passed"
        security_scan_score:
          type: integer
          nullable: true
          minimum: 0
          maximum: 100
          description: "Security score (0-100)"
          example: 95
        last_security_scan:
          type: string
          format: date-time
          nullable: true
          description: "Last security scan timestamp"
          example: "2025-11-12T08:30:00Z"

        # Enhanced SEO & Meta (Beyond base SEOEntity)
        canonical_url:
          type: string
          format: uri
          maxLength: 500
          nullable: true
          description: "Canonical URL for this page"
          example: "https://acme-etching.com/homepage"
        og_image_url:
          type: string
          format: uri
          maxLength: 500
          nullable: true
          description: "Open Graph image URL"
          example: "https://cdn.acme-etching.com/og-homepage.jpg"

        # Content Sections (Dynamic)
        sections:
          type: array
          description: "Ordered list of page sections"
          items:
            $ref: '#/PageSection'
          example: []

        # Analytics Dashboard Data
        analytics_summary:
          $ref: '#/PageAnalyticsSummary'
        
        # Validation Results
        validation_results:
          $ref: '#/PageValidationResults'

# Page Section - Enhanced Polymorphic System (Table 2-9 of 23)
PageSection:
  allOf:
    - $ref: '../common/base.yaml#/BaseEntity'
    - $ref: '../common/base.yaml#/TenantEntity'
    - $ref: '../common/base.yaml#/AuditEntity'
    - $ref: '../common/base.yaml#/OrderableEntity'
    - $ref: '../common/base.yaml#/VisibilityEntity'
    - type: object
      required:
        - page_id
        - section_type
        - title
      properties:
        # Section Identification
        page_id:
          type: string
          format: uuid
          description: "Parent page reference"
          example: "550e8400-e29b-41d4-a716-446655440000"
        section_type:
          type: string
          enum: [hero, social_proof, process, why_choose_us, achievements, services, testimonials, cta]
          description: "Type of section for rendering"
          example: "hero"
        title:
          type: string
          description: "Section display title"
          example: "Premium Etching Services"
          maxLength: 255
        subtitle:
          type: string
          nullable: true
          description: "Section subtitle"
          example: "Precision craftsmanship for your custom projects"
          maxLength: 500
        description:
          type: string
          nullable: true
          description: "Section description content"
          example: "We deliver high-quality etching services with state-of-the-art technology"

        # Section Configuration & Settings
        settings:
          type: object
          description: "Section-specific settings (polymorphic)"
          additionalProperties: true
          example: 
            background_type: "image"
            background_image: "/images/hero-bg.jpg"
            text_alignment: "center"
        theme_overrides:
          type: object
          description: "Theme overrides for this section"
          properties:
            background_color:
              $ref: '../common/base.yaml#/ColorValue'
            text_color:
              $ref: '../common/base.yaml#/ColorValue'
            button_style:
              type: string
              enum: [primary, secondary, outline, ghost]
              example: "primary"
        
        # Content Data (Section-Specific)
        content_data:
          type: object
          description: "Section content (varies by type)"
          additionalProperties: true
          example:
            hero:
              typing_texts: ["Premium Etching", "Custom Solutions", "Quality Guaranteed"]
              cta_primary: "Get Quote Now"
              cta_secondary: "View Portfolio"
            social_proof:
              stats:
                - label: "Projects Completed"
                  value: "500+"
                - label: "Happy Customers"
                  value: "250+"

        # Performance Tracking
        click_through_rate:
          type: number
          format: decimal
          nullable: true
          minimum: 0
          maximum: 100
          description: "CTR for interactive sections"
          example: 12.5
        engagement_score:
          type: integer
          nullable: true
          minimum: 0
          maximum: 100
          description: "User engagement score (0-100)"
          example: 78

        # A/B Testing Support
        ab_test_variant:
          type: string
          nullable: true
          description: "A/B test variant identifier"
          example: "variant_b"
        ab_test_id:
          type: string
          format: uuid
          nullable: true
          description: "Associated A/B test reference"
          example: "550e8400-e29b-41d4-a716-446655440000"

# ==========================================
# SPECIFIC SECTION TYPES - Detailed Content Schemas
# ==========================================

# Hero Section Data (Table 2 of 23)
HeroSectionData:
  type: object
  description: "Hero section with carousel and animations"
  properties:
    typing_texts:
      type: array
      items:
        type: string
      description: "Array of texts for typing animation"
      example: ["Premium Etching", "Custom Solutions", "Quality Guaranteed"]
      minItems: 1
      maxItems: 10
    subtitle:
      type: string
      nullable: true
      maxLength: 500
      description: "Hero subtitle text"
      example: "Professional etching services with precision craftsmanship"
    primary_button:
      $ref: '#/CTAButton'
      description: "Primary call-to-action button"
    secondary_button:
      $ref: '#/CTAButton'
      nullable: true
      description: "Secondary call-to-action button"
    carousel_settings:
      type: object
      description: "Carousel configuration"
      properties:
        autoplay_interval:
          type: integer
          description: "Auto-play interval in milliseconds"
          default: 5000
          minimum: 1000
          maximum: 30000
        show_pause_button:
          type: boolean
          description: "Show pause/play controls"
          default: true
        loop_animation:
          type: boolean
          description: "Loop the carousel infinitely"
          default: true
    images:
      type: array
      description: "Hero carousel images"
      items:
        $ref: '#/HeroImage'
      maxItems: 20

# Social Proof Section Data (Table 3 of 23)
SocialProofSectionData:
  type: object
  description: "Social proof with statistics and trust indicators"
  properties:
    stats:
      type: array
      description: "Statistical proof points"
      items:
        $ref: '#/SocialProofStat'
      minItems: 1
      maxItems: 8
    layout_type:
      type: string
      enum: [grid, horizontal, vertical, carousel]
      description: "Statistics display layout"
      default: "grid"
      example: "grid"
    animation_enabled:
      type: boolean
      description: "Enable counter animations"
      default: true

# Process Section Data (Table 4 of 23)
ProcessSectionData:
  type: object
  description: "Step-by-step process workflow"
  properties:
    steps:
      type: array
      description: "Process steps in order"
      items:
        $ref: '#/ProcessStep'
      minItems: 1
      maxItems: 12
    layout_style:
      type: string
      enum: [horizontal, vertical, timeline, grid]
      description: "Process display style"
      default: "horizontal"
      example: "timeline"
    show_connecting_lines:
      type: boolean
      description: "Show lines connecting steps"
      default: true

# Why Choose Us Section Data (Table 5 of 23)
WhyChooseUsSectionData:
  type: object
  description: "Feature highlights and competitive advantages"
  properties:
    features:
      type: array
      description: "Feature list with benefits"
      items:
        $ref: '#/FeatureItem'
      minItems: 1
      maxItems: 8
    display_style:
      type: string
      enum: [cards, list, grid, carousel]
      description: "Features display layout"
      default: "cards"
      example: "grid"

# Achievements Section Data (Table 6 of 23)
AchievementsSectionData:
  type: object
  description: "Certifications, awards, and accomplishments"
  properties:
    achievements:
      type: array
      description: "List of achievements"
      items:
        $ref: '#/AchievementItem'
      minItems: 1
      maxItems: 12
    display_type:
      type: string
      enum: [badges, cards, list, masonry]
      description: "Achievement display format"
      default: "badges"
      example: "cards"

# Services Section Data (Table 7 of 23)
ServicesSectionData:
  type: object
  description: "Services offered with descriptions"
  properties:
    services:
      type: array
      description: "List of services"
      items:
        $ref: '#/ServiceItem'
      minItems: 1
      maxItems: 20
    services_layout:
      type: string
      enum: [grid, list, carousel, masonry]
      description: "Services display layout"
      default: "grid"
      example: "grid"
    show_pricing:
      type: boolean
      description: "Display pricing information"
      default: false

# Testimonials Section Data (Table 8 of 23)
TestimonialsSectionData:
  type: object
  description: "Customer testimonials and reviews"
  properties:
    testimonials:
      type: array
      description: "Customer testimonials"
      items:
        $ref: '#/TestimonialItem'
      minItems: 1
      maxItems: 50
    display_format:
      type: string
      enum: [carousel, grid, masonry, slider]
      description: "Testimonials display format"
      default: "carousel"
      example: "grid"
    show_ratings:
      type: boolean
      description: "Display star ratings"
      default: true
    auto_rotate:
      type: boolean
      description: "Auto-rotate testimonials"
      default: true
    rotation_interval:
      type: integer
      description: "Auto-rotation interval (seconds)"
      default: 8
      minimum: 3
      maximum: 30

# CTA Section Data (Table 9 of 23)
CTASectionData:
  type: object
  description: "Call-to-action sections"
  properties:
    cta_type:
      type: string
      enum: [primary, secondary, newsletter, contact]
      description: "Type of CTA section"
      example: "primary"
    primary_button:
      $ref: '#/CTAButton'
      description: "Main action button"
    secondary_button:
      $ref: '#/CTAButton'
      nullable: true
      description: "Secondary action button"
    background_settings:
      type: object
      description: "CTA background configuration"
      properties:
        background_type:
          type: string
          enum: [solid, gradient, image, video]
          default: "gradient"
        background_color:
          $ref: '../common/base.yaml#/ColorValue'
        background_image:
          type: string
          format: uri
          nullable: true
        gradient_colors:
          type: array
          items:
            $ref: '../common/base.yaml#/ColorValue'
          minItems: 2
          maxItems: 4
    urgency_elements:
      type: object
      nullable: true
      description: "Urgency-inducing elements"
      properties:
        countdown_timer:
          type: boolean
          description: "Show countdown timer"
          default: false
        limited_offer_text:
          type: string
          nullable: true
          example: "Limited Time Offer!"
        scarcity_message:
          type: string
          nullable: true
          example: "Only 3 slots available this month"

# ==========================================
# SUPPORTING ENTITIES - Component Data Types
# ==========================================

# CTA Button Component
CTAButton:
  type: object
  required:
    - text
    - link
  properties:
    text:
      type: string
      description: "Button text"
      maxLength: 100
      example: "Get Quote Now"
    link:
      type: string
      description: "Button destination URL"
      maxLength: 500
      example: "/contact"
    style:
      type: string
      enum: [primary, secondary, outline, ghost, danger]
      description: "Button visual style"
      default: "primary"
      example: "primary"
    icon:
      type: string
      nullable: true
      description: "Lucide icon name"
      example: "arrow-right"
    opens_in_new_tab:
      type: boolean
      description: "Open link in new tab"
      default: false
    tracking_event:
      type: string
      nullable: true
      description: "Analytics tracking event"
      example: "homepage_cta_clicked"

# Hero Image Component
HeroImage:
  type: object
  required:
    - image_url
  properties:
    image_url:
      type: string
      format: uri
      description: "Image URL"
      maxLength: 500
      example: "https://cdn.acme.com/hero1.jpg"
    alt_text:
      type: string
      description: "Alternative text for accessibility"
      maxLength: 255
      example: "Precision etching equipment in action"
    display_order:
      type: integer
      description: "Display order in carousel"
      minimum: 0
      default: 0
    mobile_image_url:
      type: string
      format: uri
      nullable: true
      description: "Mobile-optimized image URL"
      maxLength: 500

# Social Proof Stat Component
SocialProofStat:
  type: object
  required:
    - stat_value
    - stat_label
    - icon_name
  properties:
    icon_name:
      type: string
      description: "Lucide icon name"
      example: "users"
      maxLength: 100
    stat_value:
      type: string
      description: "Statistical value"
      maxLength: 50
      example: "2000+"
    stat_label:
      type: string
      description: "Stat description"
      maxLength: 100
      example: "Happy Customers"
    color_theme:
      type: string
      description: "Color theme name"
      maxLength: 100
      default: "blue"
      example: "blue"
    display_order:
      type: integer
      description: "Display order"
      minimum: 0
      default: 0
    animation_delay:
      type: integer
      description: "Animation delay in milliseconds"
      minimum: 0
      default: 0
      maximum: 5000

# Process Step Component
ProcessStep:
  type: object
  required:
    - step_number
    - title
    - icon_name
  properties:
    step_number:
      type: integer
      description: "Step number in sequence"
      minimum: 1
      example: 1
    icon_name:
      type: string
      description: "Lucide icon name"
      maxLength: 100
      example: "clipboard-list"
    title:
      type: string
      description: "Step title"
      maxLength: 255
      example: "Consultation & Requirements"
    description:
      type: string
      nullable: true
      description: "Detailed step description"
      example: "We discuss your project needs and provide expert recommendations"
    display_order:
      type: integer
      description: "Display order"
      minimum: 0
      default: 0
    estimated_duration:
      type: string
      nullable: true
      description: "Estimated duration for this step"
      example: "1-2 business days"

# Feature Item Component
FeatureItem:
  type: object
  required:
    - feature_number
    - title
  properties:
    feature_number:
      type: integer
      description: "Feature number"
      minimum: 1
      example: 1
    title:
      type: string
      description: "Feature title"
      maxLength: 255
      example: "Precision Engineering"
    description:
      type: string
      nullable: true
      description: "Feature description"
      example: "State-of-the-art laser technology ensures precise etching every time"
    color_theme:
      type: string
      description: "Visual color theme"
      maxLength: 100
      default: "blue"
      example: "blue"
    icon_name:
      type: string
      nullable: true
      description: "Feature icon"
      example: "zap"
    display_order:
      type: integer
      description: "Display order"
      minimum: 0
      default: 0

# Achievement Item Component
AchievementItem:
  type: object
  required:
    - achievement_number
    - title
    - icon_name
  properties:
    achievement_number:
      type: integer
      description: "Achievement number"
      minimum: 1
      example: 1
    icon_name:
      type: string
      description: "Achievement icon"
      maxLength: 100
      example: "award"
    title:
      type: string
      description: "Achievement title"
      maxLength: 255
      example: "ISO 9001 Certified"
    description:
      type: string
      nullable: true
      description: "Achievement description"
      example: "Quality management system certification for consistent excellence"
    color_theme:
      type: string
      description: "Visual theme"
      maxLength: 100
      default: "blue"
      example: "gold"
    display_order:
      type: integer
      description: "Display order"
      minimum: 0
      default: 0
    badge_image_url:
      type: string
      format: uri
      nullable: true
      description: "Achievement badge/certificate image"
      maxLength: 500

# Service Item Component
ServiceItem:
  type: object
  required:
    - service_number
    - title
    - icon_name
  properties:
    service_number:
      type: integer
      description: "Service number"
      minimum: 1
      example: 1
    icon_name:
      type: string
      description: "Service icon"
      maxLength: 100
      example: "settings"
    title:
      type: string
      description: "Service title"
      maxLength: 255
      example: "Laser Etching"
    description:
      type: string
      nullable: true
      description: "Service description"
      example: "High-precision laser etching for metals, glass, and acrylics"
    display_order:
      type: integer
      description: "Display order"
      minimum: 0
      default: 0
    pricing_info:
      type: object
      nullable: true
      description: "Pricing information"
      properties:
        starting_price:
          type: number
          format: decimal
          description: "Starting price"
          example: 50.00
        price_unit:
          type: string
          description: "Price unit"
          example: "per piece"
        show_pricing:
          type: boolean
          description: "Display pricing publicly"
          default: false

# Testimonial Item Component
TestimonialItem:
  type: object
  required:
    - testimonial_number
    - customer_name
    - testimonial_content
  properties:
    testimonial_number:
      type: integer
      description: "Testimonial number"
      minimum: 1
      example: 1
    customer_name:
      type: string
      description: "Customer name"
      maxLength: 255
      example: "Sarah Johnson"
    customer_role:
      type: string
      nullable: true
      description: "Customer job title"
      maxLength: 255
      example: "Operations Manager"
    customer_company:
      type: string
      nullable: true
      description: "Customer company"
      maxLength: 255
      example: "TechCorp Solutions"
    rating:
      type: integer
      description: "Star rating (1-5)"
      minimum: 1
      maximum: 5
      default: 5
      example: 5
    image_url:
      type: string
      format: uri
      nullable: true
      description: "Customer photo"
      maxLength: 500
      example: "https://cdn.acme.com/testimonial1.jpg"
    testimonial_content:
      type: string
      description: "Testimonial text"
      example: "Exceptional quality and service. The etching work exceeded our expectations!"
    display_order:
      type: integer
      description: "Display order"
      minimum: 0
      default: 0
    is_featured:
      type: boolean
      description: "Featured testimonial"
      default: false
      example: false
    verified_purchase:
      type: boolean
      description: "Verified purchase badge"
      default: false
    testimonial_date:
      type: string
      format: date
      nullable: true
      description: "Date of testimonial"
      example: "2025-10-15"

# ==========================================
# ENTERPRISE FEATURES - Advanced Tables (10-23)
# ==========================================

# Homepage Templates System (Table 10 of 23)
HomepageTemplate:
  allOf:
    - $ref: '../common/base.yaml#/BaseEntity'
    - $ref: '../common/base.yaml#/TenantEntity'
    - $ref: '../common/base.yaml#/AuditEntity'
    - $ref: '../common/base.yaml#/PublishableEntity'
    - type: object
      required:
        - name
        - template_type
        - industry_category
      properties:
        name:
          type: string
          description: "Template display name"
          maxLength: 255
          example: "Modern Etching Professional"
        description:
          type: string
          nullable: true
          description: "Template description"
          example: "Clean, professional template for etching businesses"
        template_type:
          type: string
          enum: [system, user_created, marketplace, premium]
          description: "Template source type"
          example: "system"
        industry_category:
          type: string
          enum: [etching, manufacturing, services, e-commerce, portfolio, corporate, startup, creative]
          description: "Target industry"
          example: "etching"
        preview_image_url:
          type: string
          format: uri
          nullable: true
          description: "Template preview image"
          maxLength: 500
        template_config:
          type: object
          description: "Template configuration JSON"
          additionalProperties: true
          example:
            sections: ["hero", "social_proof", "services", "testimonials", "cta"]
            color_scheme: "blue"
            layout_style: "modern"
        usage_count:
          type: integer
          description: "Times this template was used"
          default: 0
          minimum: 0
        rating_average:
          type: number
          format: decimal
          nullable: true
          description: "Average user rating (1-5)"
          minimum: 1
          maximum: 5
        is_premium:
          type: boolean
          description: "Premium template requiring payment"
          default: false
        price:
          type: number
          format: decimal
          nullable: true
          description: "Template price (if premium)"
          minimum: 0
        tags:
          type: array
          items:
            type: string
          description: "Template tags for filtering"
          example: ["modern", "professional", "blue", "etching"]

# Page Validation Results (Table 11 of 23)
PageValidationResults:
  allOf:
    - $ref: '../common/base.yaml#/BaseEntity'
    - $ref: '../common/base.yaml#/TenantEntity'
    - type: object
      required:
        - page_id
        - validation_type
      properties:
        page_id:
          type: string
          format: uuid
          description: "Associated page"
          example: "550e8400-e29b-41d4-a716-446655440000"
        validation_type:
          type: string
          enum: [seo, accessibility, performance, content_quality, security]
          description: "Type of validation performed"
          example: "seo"
        overall_score:
          type: integer
          description: "Overall validation score (0-100)"
          minimum: 0
          maximum: 100
          example: 85
        detailed_results:
          type: object
          description: "Detailed validation results"
          additionalProperties: true
          example:
            seo:
              title_length: "optimal"
              meta_description: "missing"
              headings_structure: "good"
              image_alt_texts: "needs_improvement"
        recommendations:
          type: array
          items:
            type: object
            properties:
              category:
                type: string
                example: "seo"
              priority:
                type: string
                enum: [low, medium, high, critical]
                example: "high"
              message:
                type: string
                example: "Add meta description to improve search visibility"
              action_required:
                type: string
                example: "Add meta description field"
        validation_date:
          type: string
          format: date-time
          description: "When validation was performed"
          example: "2025-11-12T10:00:00Z"
        next_validation_due:
          type: string
          format: date-time
          description: "When next validation is due"
          example: "2025-11-19T10:00:00Z"

# Homepage Security Scans (Table 12 of 23)
HomepageSecurityScan:
  allOf:
    - $ref: '../common/base.yaml#/BaseEntity'
    - $ref: '../common/base.yaml#/TenantEntity'
    - $ref: '../common/base.yaml#/AuditEntity'
    - type: object
      required:
        - page_id
        - scan_type
      properties:
        page_id:
          type: string
          format: uuid
          description: "Scanned page"
          example: "550e8400-e29b-41d4-a716-446655440000"
        scan_type:
          type: string
          enum: [vulnerability, malware, ssl, headers, compliance, content_security]
          description: "Type of security scan"
          example: "vulnerability"
        scan_status:
          type: string
          enum: [pending, running, completed, failed, scheduled]
          description: "Current scan status"
          example: "completed"
        security_score:
          type: integer
          description: "Security score (0-100)"
          minimum: 0
          maximum: 100
          example: 92
        vulnerabilities_found:
          type: integer
          description: "Number of vulnerabilities found"
          minimum: 0
          default: 0
          example: 1
        scan_results:
          type: object
          description: "Detailed scan results"
          additionalProperties: true
          example:
            ssl_certificate: "valid"
            security_headers: "partial"
            xss_protection: "enabled"
            csrf_protection: "enabled"
            content_security_policy: "missing"
        threat_level:
          type: string
          enum: [none, low, medium, high, critical]
          description: "Overall threat assessment"
          example: "low"
        remediation_steps:
          type: array
          items:
            type: object
            properties:
              priority:
                type: string
                enum: [low, medium, high, critical]
              issue:
                type: string
              solution:
                type: string
              estimated_fix_time:
                type: string
        scan_duration:
          type: integer
          description: "Scan duration in seconds"
          minimum: 0
        next_scan_scheduled:
          type: string
          format: date-time
          nullable: true
          description: "Next scheduled scan"

# Homepage Analytics Dashboard (Table 13 of 23)
PageAnalyticsSummary:
  allOf:
    - $ref: '../common/base.yaml#/BaseEntity'
    - $ref: '../common/base.yaml#/TenantEntity'
    - type: object
      required:
        - page_id
        - date_period
      properties:
        page_id:
          type: string
          format: uuid
          description: "Analytics target page"
          example: "550e8400-e29b-41d4-a716-446655440000"
        date_period:
          type: string
          enum: [daily, weekly, monthly, quarterly, yearly]
          description: "Analytics reporting period"
          example: "monthly"
        period_start:
          type: string
          format: date
          description: "Period start date"
          example: "2025-11-01"
        period_end:
          type: string
          format: date
          description: "Period end date"
          example: "2025-11-30"
        
        # Traffic Metrics
        unique_visitors:
          type: integer
          description: "Unique visitors in period"
          minimum: 0
          example: 1250
        total_page_views:
          type: integer
          description: "Total page views"
          minimum: 0
          example: 2800
        bounce_rate:
          type: number
          format: decimal
          description: "Bounce rate percentage"
          minimum: 0
          maximum: 100
          example: 23.45
        average_session_duration:
          type: integer
          description: "Average session duration (seconds)"
          minimum: 0
          example: 185
        
        # Conversion Metrics
        conversion_rate:
          type: number
          format: decimal
          description: "Overall conversion rate"
          minimum: 0
          maximum: 100
          example: 8.75
        total_conversions:
          type: integer
          description: "Total conversions"
          minimum: 0
          example: 245
        conversion_value:
          type: number
          format: decimal
          description: "Total conversion value"
          minimum: 0
          example: 12500.00
        
        # Performance Metrics
        page_load_time:
          type: number
          format: decimal
          description: "Average page load time (seconds)"
          minimum: 0
          example: 2.3
        core_web_vitals:
          type: object
          description: "Core Web Vitals scores"
          properties:
            lcp:
              type: number
              format: decimal
              description: "Largest Contentful Paint (seconds)"
              example: 1.8
            fid:
              type: number
              format: decimal
              description: "First Input Delay (milliseconds)"
              example: 45
            cls:
              type: number
              format: decimal
              description: "Cumulative Layout Shift"
              example: 0.05
        
        # Traffic Sources
        traffic_sources:
          type: object
          description: "Traffic source breakdown"
          properties:
            organic:
              type: integer
              description: "Organic search visitors"
              example: 650
            direct:
              type: integer
              description: "Direct visitors"
              example: 400
            referral:
              type: integer
              description: "Referral visitors"
              example: 150
            social:
              type: integer
              description: "Social media visitors"
              example: 50
        
        # Geographic Data
        top_countries:
          type: array
          items:
            type: object
            properties:
              country:
                type: string
                example: "Indonesia"
              visitors:
                type: integer
                example: 800
              percentage:
                type: number
                format: decimal
                example: 64.0
        
        # Device Breakdown
        device_breakdown:
          type: object
          description: "Visitor device types"
          properties:
            desktop:
              type: integer
              description: "Desktop visitors"
              example: 750
            mobile:
              type: integer
              description: "Mobile visitors"
              example: 450
            tablet:
              type: integer
              description: "Tablet visitors"
              example: 50

# Homepage A/B Tests (Table 14 of 23)
HomepageABTest:
  allOf:
    - $ref: '../common/base.yaml#/BaseEntity'
    - $ref: '../common/base.yaml#/TenantEntity'
    - $ref: '../common/base.yaml#/AuditEntity'
    - type: object
      required:
        - test_name
        - page_id
        - test_type
        - status
      properties:
        test_name:
          type: string
          description: "A/B test name"
          maxLength: 255
          example: "Hero CTA Button Test"
        page_id:
          type: string
          format: uuid
          description: "Page being tested"
          example: "550e8400-e29b-41d4-a716-446655440000"
        test_type:
          type: string
          enum: [split_test, multivariate, redirect, personalization]
          description: "Type of A/B test"
          example: "split_test"
        status:
          type: string
          enum: [draft, running, paused, completed, archived]
          description: "Test status"
          example: "running"
        
        # Test Configuration
        variants:
          type: array
          description: "Test variants"
          items:
            type: object
            properties:
              variant_id:
                type: string
                example: "control"
              variant_name:
                type: string
                example: "Control (Original)"
              traffic_percentage:
                type: number
                format: decimal
                minimum: 0
                maximum: 100
                example: 50.0
              variant_config:
                type: object
                description: "Variant-specific configuration"
                additionalProperties: true
        
        # Test Metrics
        primary_metric:
          type: string
          enum: [conversion_rate, click_through_rate, engagement_rate, bounce_rate, time_on_page]
          description: "Primary success metric"
          example: "conversion_rate"
        secondary_metrics:
          type: array
          items:
            type: string
          description: "Additional metrics to track"
          example: ["click_through_rate", "time_on_page"]
        
        # Test Timeline
        start_date:
          type: string
          format: date-time
          description: "Test start date"
          example: "2025-11-01T00:00:00Z"
        end_date:
          type: string
          format: date-time
          nullable: true
          description: "Test end date (null for ongoing)"
          example: "2025-11-30T23:59:59Z"
        minimum_sample_size:
          type: integer
          description: "Minimum visitors per variant"
          minimum: 100
          default: 1000
          example: 1000
        confidence_level:
          type: number
          format: decimal
          description: "Statistical confidence level"
          minimum: 80
          maximum: 99
          default: 95
          example: 95.0
        
        # Results
        current_results:
          type: object
          nullable: true
          description: "Current test results"
          properties:
            total_visitors:
              type: integer
              example: 2500
            statistical_significance:
              type: boolean
              example: true
            winning_variant:
              type: string
              nullable: true
              example: "variant_a"
            confidence_interval:
              type: number
              format: decimal
              example: 95.5
            p_value:
              type: number
              format: decimal
              example: 0.03
        
        # Test Settings
        audience_targeting:
          type: object
          nullable: true
          description: "Audience targeting rules"
          properties:
            include_rules:
              type: array
              items:
                type: object
                properties:
                  condition:
                    type: string
                    example: "country"
                  operator:
                    type: string
                    example: "equals"
                  value:
                    type: string
                    example: "Indonesia"
            exclude_rules:
              type: array
              items:
                type: object
        
        auto_end_conditions:
          type: object
          nullable: true
          description: "Automatic test ending conditions"
          properties:
            max_duration_days:
              type: integer
              example: 30
            significance_reached:
              type: boolean
              example: true
            sample_size_reached:
              type: boolean
              example: true

# ==========================================
# REMAINING ENTERPRISE FEATURES (Tables 15-23)
# ==========================================

# Homepage Import/Export System (Table 15 of 23)
HomepageImportExportRecord:
  allOf:
    - $ref: '../common/base.yaml#/BaseEntity'
    - $ref: '../common/base.yaml#/TenantEntity'
    - $ref: '../common/base.yaml#/AuditEntity'
    - type: object
      required:
        - operation_type
        - status
      properties:
        operation_type:
          type: string
          enum: [import, export, backup, restore, migrate]
          description: "Type of operation"
          example: "export"
        source_page_id:
          type: string
          format: uuid
          nullable: true
          description: "Source page for export/backup"
          example: "550e8400-e29b-41d4-a716-446655440000"
        target_page_id:
          type: string
          format: uuid
          nullable: true
          description: "Target page for import/restore"
          example: "550e8400-e29b-41d4-a716-446655440001"
        status:
          type: string
          enum: [pending, processing, completed, failed, cancelled]
          description: "Operation status"
          example: "completed"
        file_path:
          type: string
          nullable: true
          description: "Path to exported/imported file"
          maxLength: 500
          example: "/exports/homepage-backup-2025-11-12.json"
        file_size:
          type: integer
          nullable: true
          description: "File size in bytes"
          minimum: 0
          example: 1048576
        operation_config:
          type: object
          description: "Operation-specific configuration"
          additionalProperties: true
          example:
            include_images: true
            include_analytics: false
            compress_output: true
        progress_percentage:
          type: integer
          description: "Operation progress (0-100)"
          minimum: 0
          maximum: 100
          default: 0
          example: 85
        error_message:
          type: string
          nullable: true
          description: "Error message if operation failed"
          example: "Failed to upload image assets"
        completion_summary:
          type: object
          nullable: true
          description: "Summary of completed operation"
          properties:
            pages_processed:
              type: integer
              example: 1
            sections_processed:
              type: integer
              example: 8
            images_processed:
              type: integer
              example: 15
            warnings:
              type: array
              items:
                type: string
              example: ["Some images could not be optimized"]

# Homepage Version History (Table 16 of 23)
HomepageVersionHistory:
  allOf:
    - $ref: '../common/base.yaml#/BaseEntity'
    - $ref: '../common/base.yaml#/TenantEntity'
    - $ref: '../common/base.yaml#/AuditEntity'
    - type: object
      required:
        - page_id
        - version_number
        - change_type
      properties:
        page_id:
          type: string
          format: uuid
          description: "Page being versioned"
          example: "550e8400-e29b-41d4-a716-446655440000"
        version_number:
          type: integer
          description: "Version number (auto-incremented)"
          minimum: 1
          example: 5
        parent_version_id:
          type: string
          format: uuid
          nullable: true
          description: "Parent version reference"
          example: "550e8400-e29b-41d4-a716-446655440000"
        change_type:
          type: string
          enum: [create, update, delete, restore, merge, branch]
          description: "Type of change made"
          example: "update"
        change_summary:
          type: string
          description: "Summary of changes made"
          maxLength: 500
          example: "Updated hero section CTA buttons and added new testimonial"
        detailed_changes:
          type: object
          description: "Detailed change log"
          additionalProperties: true
          example:
            sections_modified: ["hero", "testimonials"]
            fields_changed: 
              hero:
                - "primary_button_text: 'Get Quote' → 'Get Free Quote'"
                - "secondary_button_text: 'Learn More' → 'View Portfolio'"
        content_snapshot:
          type: object
          description: "Complete page content at this version"
          additionalProperties: true
        is_major_version:
          type: boolean
          description: "Whether this is a major version change"
          default: false
          example: false
        tag:
          type: string
          nullable: true
          description: "Version tag/label"
          maxLength: 100
          example: "v2.1-hero-update"
        approval_status:
          type: string
          enum: [pending, approved, rejected, auto_approved]
          description: "Version approval status"
          default: "auto_approved"
          example: "approved"
        approved_by:
          type: string
          format: uuid
          nullable: true
          description: "User who approved this version"
          example: "550e8400-e29b-41d4-a716-446655440000"
        approved_at:
          type: string
          format: date-time
          nullable: true
          description: "When version was approved"
          example: "2025-11-12T10:30:00Z"
        rollback_available:
          type: boolean
          description: "Whether rollback is available"
          default: true
          example: true

# Additional Advanced Tables Schemas (Tables 17-23)
HomepageContentValidationRule:
  allOf:
    - $ref: '../common/base.yaml#/BaseEntity'
    - $ref: '../common/base.yaml#/TenantEntity'
    - type: object
      required:
        - rule_type
        - rule_name
        - validation_criteria
      properties:
        rule_type:
          type: string
          enum: [seo, accessibility, performance, content_quality, security, compliance]
          description: "Type of validation rule"
          example: "seo"
        rule_name:
          type: string
          description: "Human-readable rule name"
          maxLength: 255
          example: "Meta Description Length Check"
        validation_criteria:
          type: object
          description: "Validation criteria configuration"
          additionalProperties: true
          example:
            min_length: 120
            max_length: 160
            required: true
        severity_level:
          type: string
          enum: [info, warning, error, critical]
          description: "Rule violation severity"
          default: "warning"
          example: "error"
        is_active:
          type: boolean
          description: "Whether rule is active"
          default: true
        custom_message:
          type: string
          nullable: true
          description: "Custom violation message"
          example: "Meta description should be between 120-160 characters for optimal SEO"

# ==========================================
# REQUEST/RESPONSE SCHEMAS - CRUD Operations
# ==========================================

# Create Page Request
CreatePageRequest:
  type: object
  required:
    - title
    - page_type
    - slug
  properties:
    title:
      type: string
      maxLength: 255
      example: "Welcome to Acme Etching"
    slug:
      type: string
      pattern: "^[a-z0-9-]+$"
      maxLength: 255
      example: "homepage-v2"
    page_type:
      type: string
      enum: [home, about, contact, faq, custom]
      example: "home"
    template_id:
      type: string
      format: uuid
      nullable: true
      description: "Template to use for page creation"
      example: "550e8400-e29b-41d4-a716-446655440000"
    language_code:
      type: string
      pattern: "^[a-z]{2}$"
      default: "en"
      example: "en"
    publish_status:
      type: string
      enum: [draft, review, scheduled, published]
      default: "draft"
      example: "draft"
    scheduled_at:
      type: string
      format: date-time
      nullable: true
      description: "Schedule publication date"
      example: "2025-12-01T00:00:00Z"
    sections:
      type: array
      description: "Initial sections to create"
      items:
        $ref: '#/CreatePageSectionRequest'
      example: []

# Update Page Request
UpdatePageRequest:
  type: object
  properties:
    title:
      type: string
      maxLength: 255
      example: "Updated Homepage Title"
    slug:
      type: string
      pattern: "^[a-z0-9-]+$"
      maxLength: 255
      example: "new-homepage-slug"
    publish_status:
      type: string
      enum: [draft, review, scheduled, published, archived]
      example: "published"
    scheduled_at:
      type: string
      format: date-time
      nullable: true
      example: "2025-12-01T00:00:00Z"
    meta_title:
      type: string
      maxLength: 255
      nullable: true
      example: "Premium Etching Services | Acme Corp"
    meta_description:
      type: string
      nullable: true
      example: "Professional etching services with precision and quality"
    sections:
      type: array
      description: "Updated sections configuration"
      items:
        $ref: '#/UpdatePageSectionRequest'

# Create Page Section Request
CreatePageSectionRequest:
  type: object
  required:
    - section_type
    - title
  properties:
    section_type:
      type: string
      enum: [hero, social_proof, process, why_choose_us, achievements, services, testimonials, cta]
      example: "hero"
    title:
      type: string
      maxLength: 255
      example: "Premium Etching Services"
    subtitle:
      type: string
      nullable: true
      maxLength: 500
      example: "Professional precision craftsmanship"
    display_order:
      type: integer
      minimum: 0
      default: 0
      example: 0
    visibility:
      type: string
      enum: [visible, hidden, scheduled]
      default: "visible"
      example: "visible"
    content_data:
      type: object
      description: "Section-specific content data"
      additionalProperties: true
      example:
        typing_texts: ["Quality", "Precision", "Excellence"]
        primary_button:
          text: "Get Quote"
          link: "/contact"
          style: "primary"
    settings:
      type: object
      description: "Section display settings"
      additionalProperties: true
      example:
        background_color: "#f8fafc"
        text_alignment: "center"

# Update Page Section Request
UpdatePageSectionRequest:
  type: object
  properties:
    id:
      type: string
      format: uuid
      description: "Section ID (for existing sections)"
      example: "550e8400-e29b-41d4-a716-446655440000"
    title:
      type: string
      maxLength: 255
      example: "Updated Section Title"
    subtitle:
      type: string
      nullable: true
      maxLength: 500
      example: "Updated subtitle"
    display_order:
      type: integer
      minimum: 0
      example: 1
    visibility:
      type: string
      enum: [visible, hidden, scheduled]
      example: "visible"
    content_data:
      type: object
      additionalProperties: true
      example:
        typing_texts: ["Premium", "Professional", "Trusted"]
    settings:
      type: object
      additionalProperties: true
      example:
        background_type: "gradient"

# Page List Response
PageListResponse:
  allOf:
    - $ref: '../common/base.yaml#/PaginatedResponse'
    - type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/PageSummary'
        meta:
          type: object
          properties:
            total_pages:
              type: integer
              example: 15
            published_pages:
              type: integer
              example: 8
            draft_pages:
              type: integer
              example: 5
            scheduled_pages:
              type: integer
              example: 2

# Page Summary (for lists)
PageSummary:
  type: object
  properties:
    id:
      type: string
      format: uuid
      example: "550e8400-e29b-41d4-a716-446655440000"
    title:
      type: string
      example: "Homepage"
    slug:
      type: string
      example: "homepage"
    page_type:
      type: string
      example: "home"
    publish_status:
      type: string
      example: "published"
    language_code:
      type: string
      example: "en"
    page_views:
      type: integer
      example: 15420
    last_updated:
      type: string
      format: date-time
      example: "2025-11-12T10:00:00Z"
    sections_count:
      type: integer
      example: 8
    template_name:
      type: string
      nullable: true
      example: "Modern Etching Professional"
    security_score:
      type: integer
      nullable: true
      example: 95
    validation_score:
      type: integer
      nullable: true
      example: 88

# Template List Response
TemplateListResponse:
  allOf:
    - $ref: '../common/base.yaml#/PaginatedResponse'
    - type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/HomepageTemplate'
        filters:
          type: object
          properties:
            industries:
              type: array
              items:
                type: string
              example: ["etching", "manufacturing", "services"]
            template_types:
              type: array
              items:
                type: string
              example: ["system", "user_created", "marketplace"]

# Analytics Report Response
AnalyticsReportResponse:
  type: object
  properties:
    summary:
      $ref: '#/PageAnalyticsSummary'
    detailed_metrics:
      type: object
      properties:
        daily_breakdown:
          type: array
          items:
            type: object
            properties:
              date:
                type: string
                format: date
                example: "2025-11-12"
              page_views:
                type: integer
                example: 95
              unique_visitors:
                type: integer
                example: 78
              conversion_rate:
                type: number
                format: decimal
                example: 8.2
        section_performance:
          type: array
          items:
            type: object
            properties:
              section_type:
                type: string
                example: "hero"
              click_through_rate:
                type: number
                format: decimal
                example: 12.5
              engagement_score:
                type: integer
                example: 85
              conversion_rate:
                type: number
                format: decimal
                example: 9.2

# Validation Report Response
ValidationReportResponse:
  type: object
  properties:
    overall_score:
      type: integer
      minimum: 0
      maximum: 100
      example: 88
    validation_results:
      type: array
      items:
        $ref: '#/PageValidationResults'
    recommendations:
      type: array
      items:
        type: object
        properties:
          category:
            type: string
            example: "seo"
          priority:
            type: string
            enum: [low, medium, high, critical]
            example: "high"
          title:
            type: string
            example: "Add meta description"
          description:
            type: string
            example: "Meta descriptions improve click-through rates from search results"
          estimated_impact:
            type: string
            enum: [low, medium, high]
            example: "high"
          estimated_effort:
            type: string
            enum: [low, medium, high]
            example: "low"

# Security Scan Response
SecurityScanResponse:
  type: object
  properties:
    scan_summary:
      $ref: '#/HomepageSecurityScan'
    detailed_findings:
      type: array
      items:
        type: object
        properties:
          category:
            type: string
            example: "ssl"
          severity:
            type: string
            enum: [info, low, medium, high, critical]
            example: "medium"
          finding:
            type: string
            example: "SSL certificate expires in 30 days"
          recommendation:
            type: string
            example: "Renew SSL certificate before expiration"
          remediation_steps:
            type: array
            items:
              type: string
            example: ["Contact hosting provider", "Request certificate renewal"]
    compliance_status:
      type: object
      properties:
        gdpr_compliant:
          type: boolean
          example: true
        wcag_compliant:
          type: boolean
          example: false
        pci_compliant:
          type: boolean
          nullable: true
          example: null

# A/B Test Results Response
ABTestResultsResponse:
  type: object
  properties:
    test_summary:
      $ref: '#/HomepageABTest'
    variant_performance:
      type: array
      items:
        type: object
        properties:
          variant_id:
            type: string
            example: "control"
          variant_name:
            type: string
            example: "Control (Original)"
          visitors:
            type: integer
            example: 1250
          conversions:
            type: integer
            example: 108
          conversion_rate:
            type: number
            format: decimal
            example: 8.64
          confidence_interval:
            type: object
            properties:
              lower:
                type: number
                format: decimal
                example: 7.2
              upper:
                type: number
                format: decimal
                example: 10.1
          statistical_significance:
            type: boolean
            example: true
    recommendations:
      type: object
      properties:
        winning_variant:
          type: string
          nullable: true
          example: "variant_b"
        confidence_level:
          type: number
          format: decimal
          example: 97.5
        recommended_action:
          type: string
          enum: [continue_test, implement_winner, stop_test, extend_test]
          example: "implement_winner"
        rationale:
          type: string
          example: "Variant B shows 23% higher conversion rate with 97.5% confidence"

# Bulk Operations Request
BulkPagesRequest:
  type: object
  required:
    - page_ids
    - operation
  properties:
    page_ids:
      type: array
      items:
        type: string
        format: uuid
      minItems: 1
      maxItems: 50
      example: ["550e8400-e29b-41d4-a716-446655440000", "550e8400-e29b-41d4-a716-446655440001"]
    operation:
      type: string
      enum: [publish, unpublish, delete, archive, duplicate, export]
      example: "publish"
    operation_config:
      type: object
      description: "Operation-specific configuration"
      additionalProperties: true
      example:
        schedule_publish: false
        delete_permanent: false

# Bulk Operations Response
BulkOperationResponse:
  type: object
  properties:
    operation_id:
      type: string
      format: uuid
      description: "Bulk operation tracking ID"
      example: "550e8400-e29b-41d4-a716-446655440000"
    status:
      type: string
      enum: [pending, processing, completed, failed, partial]
      example: "processing"
    total_items:
      type: integer
      example: 5
    processed_items:
      type: integer
      example: 3
    failed_items:
      type: integer
      example: 0
    results:
      type: array
      items:
        type: object
        properties:
          page_id:
            type: string
            format: uuid
            example: "550e8400-e29b-41d4-a716-446655440000"
          status:
            type: string
            enum: [success, failed, skipped]
            example: "success"
          message:
            type: string
            nullable: true
            example: "Page published successfully"
    estimated_completion:
      type: string
      format: date-time
      nullable: true
      example: "2025-11-12T10:15:00Z"

# ==========================================
# ERROR RESPONSES
# ==========================================

HomepageError:
  allOf:
    - $ref: '../common/base.yaml#/ErrorResponse'
    - type: object
      properties:
        error_code:
          type: string
          enum: [
            PAGE_NOT_FOUND,
            TEMPLATE_NOT_FOUND,
            SECTION_NOT_FOUND,
            INVALID_PAGE_TYPE,
            SLUG_ALREADY_EXISTS,
            VALIDATION_FAILED,
            SECURITY_SCAN_FAILED,
            AB_TEST_RUNNING,
            BULK_OPERATION_FAILED,
            IMPORT_EXPORT_FAILED
          ]
          example: "PAGE_NOT_FOUND"
        details:
          type: object
          nullable: true
          example:
            page_id: "550e8400-e29b-41d4-a716-446655440000"
            tenant_id: "tenant-abc-123"
        section_type:
          type: string
          enum: [hero, social_proof, process, why_choose_us, achievements, services, testimonials, cta]
          description: Type of section
          example: "hero"
        title:
          type: string
          description: Section title
          example: "Premium Etching Services"
          maxLength: 255
        subtitle:
          type: string
          nullable: true
          description: Section subtitle
          example: "Precision craftsmanship for your custom projects"
          maxLength: 500
        visibility:
          type: string
          enum: [visible, hidden, scheduled]
          description: Section visibility status
          example: "visible"
          default: "visible"
        background_settings:
          type: object
          description: Section background configuration
          properties:
            type:
              type: string
              enum: [color, image, gradient, video]
              example: "image"
            color:
              $ref: '../common/base.yaml#/ColorValue'
            image_url:
              type: string
              format: uri
              nullable: true
              example: "https://cdn.example.com/backgrounds/hero-bg.jpg"
            video_url:
              type: string
              format: uri
              nullable: true
            gradient:
              type: object
              properties:
                direction:
                  type: string
                  enum: [to_right, to_left, to_top, to_bottom, diagonal]
                  example: "diagonal"
                colors:
                  type: array
                  items:
                    $ref: '../common/base.yaml#/ColorValue'
                  example: ["#ff6b6b", "#4ecdc4"]
        content_data:
          type: object
          description: Section-specific content (varies by section_type)
          additionalProperties: true
        settings:
          type: object
          description: Section display settings
          properties:
            padding_top:
              type: integer
              description: Top padding in pixels
              example: 80
            padding_bottom:
              type: integer
              description: Bottom padding in pixels
              example: 80
            max_width:
              type: integer
              description: Maximum width in pixels
              example: 1200
            text_align:
              type: string
              enum: [left, center, right, justify]
              example: "center"
            animation:
              type: object
              properties:
                type:
                  type: string
                  enum: [fade_in, slide_up, slide_down, slide_left, slide_right, zoom_in]
                  example: "fade_in"
                duration:
                  type: number
                  format: float
                  description: Animation duration in seconds
                  example: 0.8
                delay:
                  type: number
                  format: float
                  description: Animation delay in seconds
                  example: 0.2

# Hero Section Data
HeroSectionData:
  type: object
  required:
    - title
    - description
    - primary_cta
  properties:
    title:
      type: string
      description: Main hero title
      example: "Professional Etching Services"
      maxLength: 100
    subtitle:
      type: string
      nullable: true
      description: Hero subtitle
      example: "Precision. Quality. Excellence."
      maxLength: 200
    description:
      type: string
      description: Hero description
      example: "Transform your ideas into reality with our state-of-the-art etching technology"
      maxLength: 500
    primary_cta:
      $ref: '#/CTAButton'
    secondary_cta:
      allOf:
        - $ref: '#/CTAButton'
        - type: object
          properties:
            nullable: true
    hero_images:
      type: array
      description: Hero image carousel
      items:
        $ref: '#/HeroImage'
      maxItems: 10
    features_list:
      type: array
      description: Key features or USPs
      items:
        type: object
        properties:
          icon:
            type: string
            description: Feature icon (CSS class or URL)
            example: "fas fa-award"
          text:
            type: string
            description: Feature text
            example: "ISO 9001 Certified"
            maxLength: 100
      maxItems: 5

# Hero Image
HeroImage:
  type: object
  required:
    - image_url
    - alt_text
  properties:
    image_url:
      type: string
      format: uri
      description: Hero image URL
      example: "https://cdn.example.com/hero/etching-1.jpg"
    alt_text:
      type: string
      description: Image alt text for accessibility
      example: "Precision laser etching on metal surface"
      maxLength: 255
    caption:
      type: string
      nullable: true
      description: Image caption
      example: "Precision laser etching on stainless steel"
      maxLength: 500
    link_url:
      type: string
      format: uri
      nullable: true
      description: Click destination URL
      example: "https://example.com/services/laser-etching"
    sort_order:
      type: integer
      description: Display order in carousel
      example: 1
      minimum: 0

# Call-to-Action Button
CTAButton:
  type: object
  required:
    - text
    - url
    - style
  properties:
    text:
      type: string
      description: Button text
      example: "Get Free Quote"
      maxLength: 50
    url:
      type: string
      format: uri
      description: Button destination URL
      example: "https://example.com/quote"
    style:
      type: string
      enum: [primary, secondary, outline, ghost, link]
      description: Button style
      example: "primary"
    size:
      type: string
      enum: [small, medium, large, extra_large]
      description: Button size
      example: "large"
      default: "medium"
    icon:
      type: string
      nullable: true
      description: Button icon (CSS class or URL)
      example: "fas fa-arrow-right"
    target:
      type: string
      enum: [_self, _blank, _parent, _top]
      description: Link target
      example: "_self"
      default: "_self"
    tracking:
      type: object
      description: Analytics tracking configuration
      properties:
        event_name:
          type: string
          example: "hero_cta_click"
        category:
          type: string
          example: "engagement"
        label:
          type: string
          example: "hero_primary_cta"

# Social Proof Statistics
SocialProofStats:
  type: object
  properties:
    title:
      type: string
      description: Section title
      example: "Trusted by Industry Leaders"
      maxLength: 255
    description:
      type: string
      nullable: true
      description: Section description
      example: "Join thousands of satisfied customers worldwide"
      maxLength: 500
    stats:
      type: array
      description: Statistics to display
      items:
        type: object
        required:
          - label
          - value
        properties:
          label:
            type: string
            description: Statistic label
            example: "Projects Completed"
            maxLength: 100
          value:
            type: string
            description: Statistic value (can include formatting)
            example: "5000+"
            maxLength: 50
          description:
            type: string
            nullable: true
            description: Additional context
            example: "Across 50+ countries"
            maxLength: 200
          icon:
            type: string
            nullable: true
            description: Statistic icon
            example: "fas fa-trophy"
          color:
            $ref: '../common/base.yaml#/ColorValue'
          sort_order:
            type: integer
            example: 1
      maxItems: 6
    client_logos:
      type: array
      description: Client/partner logos
      items:
        type: object
        required:
          - name
          - logo_url
        properties:
          name:
            type: string
            description: Client/partner name
            example: "Acme Corporation"
            maxLength: 100
          logo_url:
            type: string
            format: uri
            description: Logo image URL
            example: "https://cdn.example.com/logos/acme.png"
          website_url:
            type: string
            format: uri
            nullable: true
            description: Client website URL
            example: "https://acme.com"
          sort_order:
            type: integer
            example: 1
      maxItems: 12

# Process Steps
ProcessSteps:
  type: object
  properties:
    title:
      type: string
      description: Process section title
      example: "Our Proven Process"
      maxLength: 255
    description:
      type: string
      nullable: true
      description: Process description
      example: "From concept to completion, we ensure quality at every step"
      maxLength: 500
    steps:
      type: array
      description: Process steps
      items:
        type: object
        required:
          - step_number
          - title
          - description
        properties:
          step_number:
            type: integer
            description: Step number (1-based)
            example: 1
            minimum: 1
          title:
            type: string
            description: Step title
            example: "Consultation & Design"
            maxLength: 100
          description:
            type: string
            description: Step description
            example: "We work with you to understand your requirements and create the perfect design"
            maxLength: 500
          icon:
            type: string
            nullable: true
            description: Step icon
            example: "fas fa-comments"
          image_url:
            type: string
            format: uri
            nullable: true
            description: Step illustration image
            example: "https://cdn.example.com/process/consultation.jpg"
          estimated_time:
            type: string
            nullable: true
            description: Estimated time for this step
            example: "1-2 days"
            maxLength: 50
      maxItems: 8

# Why Choose Us Features
WhyChooseUsFeatures:
  type: object
  properties:
    title:
      type: string
      description: Section title
      example: "Why Choose Our Services"
      maxLength: 255
    description:
      type: string
      nullable: true
      description: Section description
      example: "Discover what sets us apart from the competition"
      maxLength: 500
    features:
      type: array
      description: Key features/advantages
      items:
        type: object
        required:
          - title
          - description
        properties:
          title:
            type: string
            description: Feature title
            example: "Precision Engineering"
            maxLength: 100
          description:
            type: string
            description: Feature description
            example: "State-of-the-art equipment ensures micron-level precision"
            maxLength: 500
          icon:
            type: string
            nullable: true
            description: Feature icon
            example: "fas fa-crosshairs"
          image_url:
            type: string
            format: uri
            nullable: true
            description: Feature image
            example: "https://cdn.example.com/features/precision.jpg"
          badge:
            type: string
            nullable: true
            description: Feature badge/label
            example: "Most Popular"
            maxLength: 50
          sort_order:
            type: integer
            example: 1
      maxItems: 8

# Testimonials
Testimonials:
  type: object
  properties:
    title:
      type: string
      description: Testimonials section title
      example: "What Our Customers Say"
      maxLength: 255
    description:
      type: string
      nullable: true
      description: Section description
      example: "Real feedback from real customers"
      maxLength: 500
    testimonials:
      type: array
      description: Customer testimonials
      items:
        type: object
        required:
          - name
          - testimonial
          - rating
        properties:
          name:
            type: string
            description: Customer name
            example: "John Smith"
            maxLength: 100
          title:
            type: string
            nullable: true
            description: Customer title/position
            example: "Manufacturing Director"
            maxLength: 100
          company:
            type: string
            nullable: true
            description: Customer company
            example: "Tech Industries Inc."
            maxLength: 100
          testimonial:
            type: string
            description: Testimonial text
            example: "Exceptional quality and service. Highly recommended!"
            maxLength: 1000
          rating:
            type: integer
            description: Rating (1-5 stars)
            example: 5
            minimum: 1
            maximum: 5
          avatar_url:
            type: string
            format: uri
            nullable: true
            description: Customer avatar image
            example: "https://cdn.example.com/avatars/john-smith.jpg"
          date:
            type: string
            format: date
            nullable: true
            description: Testimonial date
            example: "2025-10-15"
          verified:
            type: boolean
            description: Whether testimonial is verified
            example: true
            default: false
          sort_order:
            type: integer
            example: 1
      maxItems: 12

# Page Analytics Summary
PageAnalytics:
  type: object
  properties:
    views:
      type: object
      properties:
        total:
          type: integer
          description: Total page views
          example: 15420
        unique:
          type: integer
          description: Unique page views
          example: 12350
        today:
          type: integer
          description: Views today
          example: 145
        this_week:
          type: integer
          description: Views this week
          example: 980
        this_month:
          type: integer
          description: Views this month
          example: 4250
    engagement:
      type: object
      properties:
        average_time_on_page:
          type: number
          format: float
          description: Average time on page (seconds)
          example: 185.5
        bounce_rate:
          type: number
          format: float
          description: Bounce rate (percentage)
          example: 35.2
        scroll_depth:
          type: number
          format: float
          description: Average scroll depth (percentage)
          example: 68.5
    conversions:
      type: object
      properties:
        cta_clicks:
          type: integer
          description: Total CTA button clicks
          example: 320
        form_submissions:
          type: integer
          description: Contact form submissions
          example: 45
        phone_calls:
          type: integer
          description: Phone number clicks
          example: 78
        conversion_rate:
          type: number
          format: float
          description: Overall conversion rate (percentage)
          example: 3.2

# Page Template
PageTemplate:
  allOf:
    - $ref: '../common/base.yaml#/BaseEntity'
    - type: object
      required:
        - name
        - category
        - template_data
      properties:
        name:
          type: string
          description: Template name
          example: "Manufacturing Hero Template"
          maxLength: 255
        description:
          type: string
          nullable: true
          description: Template description
          example: "Professional template for manufacturing companies"
          maxLength: 1000
        category:
          type: string
          enum: [manufacturing, services, corporate, creative, ecommerce, portfolio]
          description: Template category
          example: "manufacturing"
        preview_image_url:
          type: string
          format: uri
          nullable: true
          description: Template preview image
          example: "https://cdn.example.com/templates/manufacturing-preview.jpg"
        template_data:
          type: object
          description: Complete template structure and content
          additionalProperties: true
        is_premium:
          type: boolean
          description: Whether template requires premium subscription
          example: false
          default: false
        usage_count:
          type: integer
          description: Number of times template has been used
          example: 150
          readOnly: true
        rating:
          type: number
          format: float
          description: Template rating (1-5)
          example: 4.5
          minimum: 0
          maximum: 5
          readOnly: true

# Create Page Request
CreatePageRequest:
  type: object
  required:
    - title
    - slug
    - page_type
  properties:
    title:
      type: string
      description: Page title
      example: "Our Homepage"
      maxLength: 255
    slug:
      type: string
      description: URL slug
      pattern: "^[a-z0-9-]+$"
      example: "homepage"
      maxLength: 255
    page_type:
      type: string
      enum: [home, about, contact, faq, custom]
      description: Type of page
      example: "home"
    template_id:
      type: string
      format: uuid
      nullable: true
      description: Template to use
      example: "550e8400-e29b-41d4-a716-446655440000"
    publish_status:
      type: string
      enum: [draft, review, scheduled, published, archived]
      description: Initial publish status
      example: "draft"
      default: "draft"
    scheduled_at:
      type: string
      format: date-time
      nullable: true
      description: Schedule publication time
      example: "2025-11-15T09:00:00Z"
    meta_title:
      type: string
      nullable: true
      description: SEO meta title
      example: "Professional Etching Services - Acme Manufacturing"
      maxLength: 60
    meta_description:
      type: string
      nullable: true
      description: SEO meta description
      example: "Premium etching services with precision and quality. Contact us today for your custom project."
      maxLength: 160

# Update Page Request
UpdatePageRequest:
  type: object
  properties:
    title:
      type: string
      description: Page title
      example: "Updated Homepage"
      maxLength: 255
    publish_status:
      type: string
      enum: [draft, review, scheduled, published, archived]
      description: Publish status
      example: "published"
    scheduled_at:
      type: string
      format: date-time
      nullable: true
      description: Schedule publication time
      example: "2025-11-15T09:00:00Z"
    meta_title:
      type: string
      nullable: true
      description: SEO meta title
      maxLength: 60
    meta_description:
      type: string
      nullable: true
      description: SEO meta description
      maxLength: 160
    version_notes:
      type: string
      nullable: true
      description: Version change notes
      example: "Updated hero section and testimonials"
      maxLength: 500