paths:
  /pages/contact:
    get:
      tags:
        - Contact
      summary: Get Contact Page Content
      description: |
        Retrieve contact page content including:
        - Hero section
        - Contact information (address, phone, email, hours)
        - Dynamic contact form structure
        - Map location
        - Quick contact options (WhatsApp, Telegram, etc.)
      operationId: getContactPage
      security: []
      responses:
        '200':
          description: Contact page content retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ContactPageResponse'
        '404':
          $ref: '../components/responses/common.yaml#/NotFound'

  /contact/submit:
    post:
      tags:
        - Contact
      summary: Submit Contact Form
      description: |
        Submit contact form data.
        
        **Rate Limiting:** 5 submissions per hour per IP address
      operationId: submitContactForm
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ContactFormSubmission'
      responses:
        '201':
          description: Form submitted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Thank you! We will contact you soon."
        '422':
          $ref: '../components/responses/common.yaml#/ValidationError'
        '429':
          $ref: '../components/responses/common.yaml#/RateLimitExceeded'

  /admin/pages/contact:
    get:
      tags:
        - Contact
      summary: Get Contact Page Admin Data
      operationId: getContactPageAdmin
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Contact page admin data retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ContactPageResponse'
        '401':
          $ref: '../components/responses/common.yaml#/Unauthorized'

    put:
      tags:
        - Contact
      summary: Update Contact Page
      description: Update all contact page sections
      operationId: updateContactPage
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ContactPageUpdateInput'
      responses:
        '200':
          description: Contact page updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Contact page updated successfully"
        '401':
          $ref: '../components/responses/common.yaml#/Unauthorized'
        '422':
          $ref: '../components/responses/common.yaml#/ValidationError'

  /admin/contact/forms:
    get:
      tags:
        - Contact
      summary: Get Contact Forms
      description: List all contact form configurations
      operationId: listContactForms
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Contact forms retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/ContactForm'
        '401':
          $ref: '../components/responses/common.yaml#/Unauthorized'

  /admin/contact/submissions:
    get:
      tags:
        - Contact
      summary: List Form Submissions
      description: List all contact form submissions with filtering and pagination
      operationId: listSubmissions
      security:
        - bearerAuth: []
      parameters:
        - $ref: '../components/parameters/common.yaml#/PageQuery'
        - $ref: '../components/parameters/common.yaml#/PerPageQuery'
        - name: status
          in: query
          schema:
            type: string
            enum: [new, read, replied, archived]
        - $ref: '../components/parameters/common.yaml#/DateFromQuery'
        - $ref: '../components/parameters/common.yaml#/DateToQuery'
      responses:
        '200':
          description: Submissions retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/FormSubmission'
                  meta:
                    $ref: '../components/schemas/common.yaml#/PaginationMeta'
        '401':
          $ref: '../components/responses/common.yaml#/Unauthorized'

components:
  schemas:
    ContactPageResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: object
          properties:
            page:
              type: object
              properties:
                id:
                  type: integer
                  example: 3
                slug:
                  type: string
                  example: "contact"
                title:
                  type: string
                  example: "Contact Us"
            hero:
              type: object
              properties:
                title:
                  type: string
                  example: "Get in Touch"
                subtitle:
                  type: string
                  example: "We're here to help"
            contactInfo:
              type: object
              properties:
                enabled:
                  type: boolean
                  example: true
                items:
                  type: array
                  items:
                    $ref: '#/components/schemas/ContactInfoItem'
            form:
              $ref: '#/components/schemas/ContactForm'
            map:
              $ref: '#/components/schemas/MapConfig'
            quickContacts:
              type: array
              items:
                $ref: '#/components/schemas/QuickContact'

    ContactInfoItem:
      type: object
      properties:
        id:
          type: integer
          example: 1
        iconName:
          type: string
          example: "MapPin"
        title:
          type: string
          example: "Our Address"
        content:
          type: string
          example: "Jl. Sudirman No. 123\nJakarta Pusat"
        displayOrder:
          type: integer
          example: 1

    ContactForm:
      type: object
      properties:
        id:
          type: integer
          example: 1
        enabled:
          type: boolean
          example: true
        title:
          type: string
          example: "Send us a Message"
        subtitle:
          type: string
          example: "Fill out the form below"
        successMessage:
          type: string
          example: "Thank you! We will contact you soon."
        fields:
          type: array
          items:
            $ref: '#/components/schemas/FormField'

    FormField:
      type: object
      properties:
        id:
          type: integer
          example: 1
        fieldName:
          type: string
          example: "name"
        fieldType:
          type: string
          enum: [text, email, tel, textarea, select, checkbox, radio, file]
          example: "text"
        fieldLabel:
          type: string
          example: "Full Name"
        placeholder:
          type: string
          example: "Enter your full name"
        isRequired:
          type: boolean
          example: true
        validationRules:
          type: object
          example:
            minLength: 3
            maxLength: 100
        options:
          type: array
          items:
            type: string
          example: ["General Inquiry", "Product Question", "Support"]

    MapConfig:
      type: object
      properties:
        enabled:
          type: boolean
          example: true
        latitude:
          type: number
          format: double
          example: -6.2088
        longitude:
          type: number
          format: double
          example: 106.8456
        zoomLevel:
          type: integer
          minimum: 1
          maximum: 20
          example: 15
        markerTitle:
          type: string
          example: "Our Jakarta Office"

    QuickContact:
      type: object
      properties:
        id:
          type: integer
          example: 1
        contactType:
          type: string
          enum: [whatsapp, telegram, line, phone, email, other]
          example: "whatsapp"
        contactLabel:
          type: string
          example: "Chat via WhatsApp"
        contactValue:
          type: string
          example: "6281234567890"
        iconName:
          type: string
          example: "MessageCircle"
        enabled:
          type: boolean
          example: true

    ContactFormSubmission:
      type: object
      required:
        - formData
      properties:
        formData:
          type: object
          description: Dynamic form data based on form fields
          example:
            name: "John Doe"
            email: "john@example.com"
            phone: "+62 812-3456-7890"
            subject: "Product Inquiry"
            message: "I would like to know more..."

    FormSubmission:
      type: object
      properties:
        id:
          type: integer
          example: 1
        formId:
          type: integer
          example: 1
        submissionData:
          type: object
          example:
            name: "John Doe"
            email: "john@example.com"
            message: "I would like to know more..."
        status:
          type: string
          enum: [new, read, replied, archived]
          example: "new"
        submitterIp:
          type: string
          example: "192.168.1.1"
        repliedAt:
          type: string
          format: date-time
          nullable: true
        replyMessage:
          type: string
          nullable: true
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    ContactPageUpdateInput:
      type: object
      properties:
        hero:
          type: object
          properties:
            title:
              type: string
              maxLength: 255
            subtitle:
              type: string
        contactInfo:
          type: object
          properties:
            enabled:
              type: boolean
            items:
              type: array
              items:
                type: object
                properties:
                  iconName:
                    type: string
                  title:
                    type: string
                    maxLength: 255
                  content:
                    type: string
        form:
          type: object
          properties:
            enabled:
              type: boolean
            title:
              type: string
            subtitle:
              type: string
            successMessage:
              type: string
            fields:
              type: array
              items:
                type: object
                required:
                  - fieldName
                  - fieldType
                  - fieldLabel
                properties:
                  fieldName:
                    type: string
                  fieldType:
                    type: string
                    enum: [text, email, tel, textarea, select, checkbox, radio, file]
                  fieldLabel:
                    type: string
                  placeholder:
                    type: string
                  isRequired:
                    type: boolean
                  validationRules:
                    type: object
                  options:
                    type: array
                    items:
                      type: string
        map:
          type: object
          properties:
            enabled:
              type: boolean
            latitude:
              type: number
              format: double
            longitude:
              type: number
              format: double
            zoomLevel:
              type: integer
            markerTitle:
              type: string
        quickContacts:
          type: array
          items:
            type: object
            properties:
              contactType:
                type: string
                enum: [whatsapp, telegram, line, phone, email, other]
              contactLabel:
                type: string
              contactValue:
                type: string
              iconName:
                type: string
              enabled:
                type: boolean
