/orders:
  post:
    tags:
    - Customer Orders
    summary: Create New Order
    description: 'Create a new order from customer (walk-in, phone, or website).


      **Business Workflow:**

      - Customer submits order with items and customization

      - System generates unique order code (ORD-YYYY-MM-NNNN)

      - Order status set to ''new''

      - Automatic notification sent to admin team

      - Production type determined based on product specifications


      **Features:**

      - Multi-item orders with individual customization

      - Design file upload support

      - Automatic customer validation

      - Tenant-scoped order numbering

      - Real-time inventory checking (if applicable)

      '
    operationId: createOrder
    security: []
    parameters:
    - $ref: '#/components/parameters/TenantHeader'
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/CreateOrderRequest'
          examples:
            etching_order:
              summary: Etching order with customization
              value:
                customer:
                  name: Budi Santoso
                  email: budi@example.com
                  phone: '+628123456789'
                  company: PT Example Indonesia
                  type: business
                items:
                - product_name: Custom Etched Brass Plate
                  quantity: 5
                  customization:
                    bahan: Kuningan
                    kualitas: premium
                    ketebalan: 2mm
                    ukuran: 30cm x 20cm
                    warna_background: '#FFFFFF'
                    custom_text: Best Employee 2025
                    custom_text_placement: center
                  design_file_url: https://storage.example.com/designs/logo.png
                shipping_address:
                  address: Jl. Sudirman No. 123, Blok A-5
                  city: Jakarta Pusat
                  province: DKI Jakarta
                  postal_code: '10110'
                  country: Indonesia
                customer_notes: Please pack carefully for corporate event
                priority: normal
    responses:
      '201':
        description: Order created successfully
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  data:
                    $ref: '#/components/schemas/PurchaseOrder'
            examples:
              success:
                summary: Order created successfully
                value:
                  success: true
                  message: Order created successfully. Our team will contact you shortly.
                  data:
                    id: 550e8400-e29b-41d4-a716-446655440000
                    order_code: ORD-2025-01-0001
                    status: new
                    customer_name: Budi Santoso
                    customer_email: budi@example.com
                    total_amount: 0
                    currency: IDR
                    created_at: '2025-01-15T10:30:00Z'
      '400':
        $ref: '#/components/responses/BadRequest'
      '422':
        $ref: '#/components/responses/ValidationError'
/orders/{order_code}/status:
  get:
    tags:
    - Customer Orders
    summary: Check Order Status
    description: 'Check order status by order code (public endpoint for customers).


      **Returns:**

      - Current order status and timeline

      - Payment status and amount due

      - Estimated completion date

      - Shipping tracking information

      - Customer-safe information only (no internal notes)

      '
    operationId: checkOrderStatus
    security: []
    parameters:
    - $ref: '#/components/parameters/TenantHeader'
    - name: order_code
      in: path
      required: true
      schema:
        type: string
        pattern: ^ORD-\d{4}-\d{2}-\d{4}$
      description: Order code to check
      example: ORD-2025-01-0001
    responses:
      '200':
        description: Order status retrieved
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  data:
                    type: object
                    properties:
                      order_code:
                        type: string
                      status:
                        type: string
                      status_display:
                        type: string
                      payment_status:
                        type: string
                      total_amount:
                        type: number
                      paid_amount:
                        type: number
                      remaining_amount:
                        type: number
                      estimated_completion_date:
                        type: string
                        format: date
                      tracking_number:
                        type: string
                      timeline:
                        type: array
                        items:
                          type: object
                          properties:
                            status:
                              type: string
                            timestamp:
                              type: string
                              format: date-time
                            description:
                              type: string
            example:
              success: true
              data:
                id: 550e8400-e29b-41d4-a716-446655440000
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
                title: Sample Orders Title
                created_at: '2025-11-13T18:58:00Z'
                updated_at: '2025-11-13T18:58:00Z'
              message: Orders retrieved successfully
              meta:
                timestamp: '2025-11-13T18:58:00Z'
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
      '404':
        $ref: '#/components/responses/NotFound'
/admin/orders:
  get:
    tags:
    - Orders Management
    summary: List All Orders
    description: 'Retrieve paginated list of all orders with comprehensive filtering
      and search.


      **Admin Features:**

      - Multi-status filtering

      - Date range filtering

      - Customer and vendor filtering

      - Full-text search across order details

      - Advanced sorting options

      - Real-time statistics


      **Performance:**

      - Optimized queries with tenant-aware indexing

      - Pagination for large datasets

      - Efficient status aggregation

      '
    operationId: listOrders
    security:
    - bearerAuth: []
    parameters:
    - $ref: '#/components/parameters/TenantHeader'
    - name: status
      in: query
      schema:
        type: array
        items:
          type: string
      style: form
      explode: false
      description: Filter by order status
    - name: payment_status
      in: query
      schema:
        type: array
        items:
          type: string
      style: form
      explode: false
      description: Filter by payment status
    - name: production_type
      in: query
      schema:
        type: string
        enum:
        - internal
        - vendor
      description: Filter by production type
    - name: customer_id
      in: query
      schema:
        type: string
        format: uuid
      description: Filter by specific customer
    - name: vendor_id
      in: query
      schema:
        type: string
        format: uuid
      description: Filter by specific vendor
    - name: date_from
      in: query
      schema:
        type: string
        format: date
      description: Orders from date (YYYY-MM-DD)
    - name: date_to
      in: query
      schema:
        type: string
        format: date
      description: Orders to date (YYYY-MM-DD)
    - name: search
      in: query
      schema:
        type: string
      description: Search order code, customer name, email, phone
    - name: priority
      in: query
      schema:
        type: array
        items:
          type: string
          enum:
          - low
          - normal
          - high
          - urgent
      style: form
      explode: false
      description: Filter by priority
    - name: tags
      in: query
      schema:
        type: array
        items:
          type: string
      style: form
      explode: false
      description: Filter by tags
    - $ref: '#/components/parameters/PageParam'
    - $ref: '#/components/parameters/PerPageParam'
    - $ref: '#/components/parameters/SortParam'
    - $ref: '#/components/parameters/OrderParam'
    responses:
      '200':
        description: Orders list retrieved successfully
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  data:
                    $ref: '#/components/schemas/OrdersPageData'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
            example:
              success: true
              data:
                id: 550e8400-e29b-41d4-a716-446655440000
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
                title: Sample Orders Title
                created_at: '2025-11-13T18:58:00Z'
                updated_at: '2025-11-13T18:58:00Z'
              message: Orders retrieved successfully
              meta:
                timestamp: '2025-11-13T18:58:00Z'
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
      '401':
        $ref: '#/components/responses/Unauthorized'
      '403':
        $ref: '#/components/responses/Forbidden'
  post:
    tags:
    - Orders Management
    summary: Create Order (Admin)
    description: 'Create new order through admin interface with enhanced features.


      **Admin Capabilities:**

      - Create orders on behalf of customers

      - Set custom pricing and terms

      - Assign vendor during creation

      - Set priority and tags

      - Upload multiple design files

      '
    operationId: createOrderAdmin
    security:
    - bearerAuth: []
    parameters:
    - $ref: '#/components/parameters/TenantHeader'
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/CreateOrderRequest'
          example:
            title: New Orders Title
            description: Sample description for orders
            is_active: true
    responses:
      '201':
        description: Order created successfully
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  data:
                    $ref: '#/components/schemas/PurchaseOrder'
            example:
              success: true
              data:
                id: 550e8400-e29b-41d4-a716-446655440000
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
                created_at: '2025-11-13T18:58:00Z'
              message: Orders created successfully
              meta:
                timestamp: '2025-11-13T18:58:00Z'
      '400':
        $ref: '#/components/responses/BadRequest'
      '401':
        $ref: '#/components/responses/Unauthorized'
      '403':
        $ref: '#/components/responses/Forbidden'
      '422':
        $ref: '#/components/responses/ValidationError'
/admin/orders/{id}:
  get:
    tags:
    - Orders Management
    summary: Get Order Details
    description: 'Retrieve complete order details including all related data.


      **Comprehensive Data:**

      - Complete order information

      - All order items with customization

      - Quotation history and versions

      - Payment records and verification

      - Shipment tracking and POD

      - Complete status history and audit trail

      - Profitability calculations

      - Communication logs

      '
    operationId: getOrderDetails
    security:
    - bearerAuth: []
    parameters:
    - $ref: '#/components/parameters/TenantHeader'
    - name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: Order ID
    responses:
      '200':
        description: Order details retrieved successfully
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  data:
                    type: object
                    properties:
                      order:
                        $ref: '#/components/schemas/PurchaseOrder'
                      items:
                        type: array
                        items:
                          $ref: '#/components/schemas/OrderItem'
                      quotations:
                        type: array
                        items:
                          $ref: '#/components/schemas/OrderQuotation'
                      negotiations:
                        type: array
                        items:
                          $ref: '#/components/schemas/OrderNegotiation'
                      payments:
                        type: array
                        items:
                          $ref: '#/components/schemas/OrderPayment'
                      shipments:
                        type: array
                        items:
                          $ref: '#/components/schemas/OrderShipment'
                      status_history:
                        type: array
                        items:
                          $ref: '#/components/schemas/OrderStatusHistory'
            example:
              success: true
              data:
                id: 550e8400-e29b-41d4-a716-446655440000
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
                title: Sample Orders Title
                created_at: '2025-11-13T18:58:00Z'
                updated_at: '2025-11-13T18:58:00Z'
              message: Orders retrieved successfully
              meta:
                timestamp: '2025-11-13T18:58:00Z'
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
      '401':
        $ref: '#/components/responses/Unauthorized'
      '403':
        $ref: '#/components/responses/Forbidden'
      '404':
        $ref: '#/components/responses/NotFound'
  put:
    tags:
    - Orders Management
    summary: Update Order
    description: 'Update order information (limited fields for data integrity).


      **Updateable Fields:**

      - Customer contact information

      - Shipping/billing addresses

      - Customer notes and internal notes

      - Tags and priority

      - Custom fields per tenant configuration


      **Protected Fields:**

      - Order code, status, and financial data

      - Payment and vendor information

      - System timestamps

      '
    operationId: updateOrder
    security:
    - bearerAuth: []
    parameters:
    - $ref: '#/components/parameters/TenantHeader'
    - name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: Order ID
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              customer_name:
                type: string
                maxLength: 255
              customer_email:
                type: string
                format: email
              customer_phone:
                type: string
              customer_company:
                type: string
              shipping_address:
                type: string
              shipping_city:
                type: string
              shipping_province:
                type: string
              shipping_postal_code:
                type: string
              customer_notes:
                type: string
              internal_notes:
                type: string
              admin_notes:
                type: string
              tags:
                type: array
                items:
                  type: string
              priority:
                type: string
                enum:
                - low
                - normal
                - high
                - urgent
          example:
            title: Updated Orders Title
            description: Updated description for orders
            is_active: true
    responses:
      '200':
        description: Order updated successfully
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  data:
                    $ref: '#/components/schemas/PurchaseOrder'
            example:
              success: true
              data:
                id: 550e8400-e29b-41d4-a716-446655440000
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
              message: Orders puted successfully
              meta:
                timestamp: '2025-11-13T18:58:00Z'
      '400':
        $ref: '#/components/responses/BadRequest'
      '401':
        $ref: '#/components/responses/Unauthorized'
      '403':
        $ref: '#/components/responses/Forbidden'
      '404':
        $ref: '#/components/responses/NotFound'
      '422':
        $ref: '#/components/responses/ValidationError'
  delete:
    tags:
    - Orders Management
    summary: Cancel Order
    description: 'Cancel order (soft delete with audit trail).


      **Business Rules:**

      - Orders can only be cancelled in certain statuses

      - Paid orders require refund processing

      - Vendor orders require vendor notification

      - Complete audit trail maintained

      - Customer notification automatic

      '
    operationId: cancelOrder
    security:
    - bearerAuth: []
    parameters:
    - $ref: '#/components/parameters/TenantHeader'
    - name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: Order ID
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
            - reason
            properties:
              reason:
                type: string
                description: Cancellation reason
              notify_customer:
                type: boolean
                default: true
              notify_vendor:
                type: boolean
                default: true
              refund_amount:
                type: number
                format: decimal
                description: Amount to refund
    responses:
      '200':
        description: Order cancelled successfully
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BaseResponse'
            example:
              success: true
              data:
                id: 550e8400-e29b-41d4-a716-446655440000
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
              message: Orders deleteed successfully
              meta:
                timestamp: '2025-11-13T18:58:00Z'
      '400':
        $ref: '#/components/responses/BadRequest'
      '401':
        $ref: '#/components/responses/Unauthorized'
      '403':
        $ref: '#/components/responses/Forbidden'
      '404':
        $ref: '#/components/responses/NotFound'
/admin/orders/{id}/assign-vendor:
  post:
    tags:
    - Orders Management
    summary: Assign Vendor to Order
    description: "Assign vendor for production with automatic vendor matching.\n\n\
      **Vendor Selection:**\n- Automatic vendor suggestions based on:\n  - Material\
      \ specializations\n  - Quality tier requirements\n  - Historical performance\
      \ ratings\n  - Lead time capacity\n  - Geographic proximity\n- Manual vendor\
      \ override capability\n- Vendor availability checking\n"
    operationId: assignVendor
    security:
    - bearerAuth: []
    parameters:
    - $ref: '#/components/parameters/TenantHeader'
    - name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: Order ID
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
            - vendor_id
            properties:
              vendor_id:
                type: string
                format: uuid
                description: Selected vendor ID
              production_type:
                type: string
                enum:
                - vendor
                - internal
                default: vendor
                description: Production method
              notes:
                type: string
                description: Assignment notes
              auto_start_negotiation:
                type: boolean
                default: true
                description: Automatically start price negotiation
          example:
            title: New Orders Title
            description: Sample description for orders
            is_active: true
    responses:
      '200':
        description: Vendor assigned successfully
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  data:
                    type: object
                    properties:
                      order_id:
                        type: string
                        format: uuid
                      vendor_id:
                        type: string
                        format: uuid
                      vendor_name:
                        type: string
                      assigned_at:
                        type: string
                        format: date-time
                      status:
                        type: string
            example:
              success: true
              data:
                id: 550e8400-e29b-41d4-a716-446655440000
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
              message: Orders posted successfully
              meta:
                timestamp: '2025-11-13T18:58:00Z'
      '400':
        $ref: '#/components/responses/BadRequest'
      '401':
        $ref: '#/components/responses/Unauthorized'
      '403':
        $ref: '#/components/responses/Forbidden'
      '404':
        $ref: '#/components/responses/NotFound'
/admin/orders/{id}/status:
  patch:
    tags:
    - Orders Management
    summary: Update Order Status
    description: 'Update order status with validation and automatic workflows.


      **Status Workflow Validation:**

      - Validates allowed status transitions via state machine engine

      - Checks business rule compliance including payment guarantees and inventory holds

      - Triggers automatic workflows with SLA timers and escalation policies

      - Sends notifications to relevant parties across email, WhatsApp, and SMS

      - Updates related records (payments, shipments, reservations, analytics snapshots)


      **Automatic Triggers:**

      - Payment verification workflows with DP/full settlement checks

      - Production start notifications with vendor/internal routing

      - Customer status updates and communication queue dispatch

      - Vendor communication, SLA monitoring, and compliance logging

      - Accounting system updates and profitability snapshots

      '
    operationId: updateOrderStatus
    security:
    - bearerAuth: []
    parameters:
    - $ref: '#/components/parameters/TenantHeader'
    - name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: Order ID
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/UpdateOrderStatusRequest'
          examples:
            production_complete:
              summary: Mark production as complete
              value:
                status: production_complete
                notes: All 5 brass plates completed, QC passed
                notify_customer: true
    responses:
      '200':
        description: Status updated successfully
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  data:
                    type: object
                    properties:
                      order_id:
                        type: string
                        format: uuid
                      from_status:
                        type: string
                      to_status:
                        type: string
                      changed_at:
                        type: string
                        format: date-time
                      notification_sent:
                        type: boolean
            example:
              success: true
              data:
                id: 550e8400-e29b-41d4-a716-446655440000
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
              message: Orders patched successfully
              meta:
                timestamp: '2025-11-13T18:58:00Z'
      '400':
        $ref: '#/components/responses/BadRequest'
      '401':
        $ref: '#/components/responses/Unauthorized'
      '403':
        $ref: '#/components/responses/Forbidden'
      '404':
        $ref: '#/components/responses/NotFound'
/admin/orders/{id}/communications:
  get:
    tags:
    - Orders Management
    summary: List Order Communications
    description: 'Retrieve omni-channel communication history for the order.


      **Channels Covered:**

      - Email notifications with templating

      - WhatsApp enterprise messaging

      - SMS transactional alerts

      - Internal task assignments and notes

      - Webhook callbacks to external CRMs


      **Compliance:**

      - Tenant-scoped delivery policies

      - GDPR/PDPA consent tracking

      - Delivery auditing and failure escalation
      '
    operationId: listOrderCommunications
    security:
    - bearerAuth: []
    parameters:
    - $ref: '#/components/parameters/TenantHeader'
    - name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: Order ID
    - name: channel
      in: query
      schema:
        type: string
        enum:
        - email
        - whatsapp
        - sms
        - internal
        - webhook
      description: Filter by communication channel
    - name: status
      in: query
      schema:
        type: string
        enum:
        - queued
        - delivered
        - failed
        - read
        - acknowledged
      description: Filter by delivery status
    responses:
      '200':
        description: Communication history retrieved successfully
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          format: uuid
                        channel:
                          type: string
                        recipient:
                          type: string
                        message_subject:
                          type: string
                          nullable: true
                        message_body:
                          type: string
                        delivery_status:
                          type: string
                        sent_at:
                          type: string
                          format: date-time
                        metadata:
                          type: object
                          additionalProperties: true
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
            example:
              success: true
              data:
              - id: "3a4692f9-5fb0-4a5c-83d0-9a4d94757b0e"
                channel: email
                recipient: budi@example.com
                message_subject: Order ORD-2025-01-0001 Confirmed
                message_body: Email template payload
                delivery_status: delivered
                sent_at: '2025-11-18T09:45:00Z'
                metadata:
                  template_code: order.confirmation
                  actor_id: "6c23d864-4f83-48a4-8ae8-3d5b3d2f8b31"
              meta:
                timestamp: '2025-11-18T09:45:05Z'
                tenant_id: "6ba7b810-9dad-11d1-80b4-00c04fd430c8"
  post:
    tags:
    - Orders Management
    summary: Queue Order Communication
    description: 'Send or schedule new communication for an order.


      **Automation:**

      - Template-based messaging with localization

      - Multi-channel dispatch with fallbacks

      - Escalation rules when delivery fails

      - Attachment delivery and signed document support

      - Integration with analytics events for engagement tracking
      '
    operationId: queueOrderCommunication
    security:
    - bearerAuth: []
    parameters:
    - $ref: '#/components/parameters/TenantHeader'
    - name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: Order ID
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
            - channel
            - recipients
            - template_code
            properties:
              channel:
                type: string
                enum:
                - email
                - whatsapp
                - sms
                - internal
                - webhook
              recipients:
                type: array
                minItems: 1
                items:
                  type: string
              template_code:
                type: string
                maxLength: 100
              template_variables:
                type: object
                additionalProperties: true
              attachments:
                type: array
                items:
                  type: object
                  properties:
                    url:
                      type: string
                      format: uri
                    filename:
                      type: string
                    mime_type:
                      type: string
                    size:
                      type: integer
              send_at:
                type: string
                format: date-time
                description: Schedule delivery time (UTC)
                nullable: true
              escalation_on_failure:
                type: object
                nullable: true
                properties:
                  retry_attempts:
                    type: integer
                    default: 3
                  fallback_channel:
                    type: string
                    enum:
                    - email
                    - whatsapp
                    - sms
                    - internal
                  notify_roles:
                    type: array
                    items:
                      type: string
                  create_task:
                    type: boolean
                    default: false
          example:
            channel: whatsapp
            recipients:
            - '+628123456789'
            template_code: order.production.start
            template_variables:
              order_code: ORD-2025-01-0001
              customer_name: Budi Santoso
              production_eta: '2025-01-28'
            escalation_on_failure:
              retry_attempts: 2
              fallback_channel: sms
              notify_roles:
              - operations_manager
              create_task: true
    responses:
      '202':
        description: Communication queued successfully
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  data:
                    type: object
                    properties:
                      communication_id:
                        type: string
                        format: uuid
                      status:
                        type: string
                      scheduled_at:
                        type: string
                        format: date-time
                      escalation_enabled:
                        type: boolean
            example:
              success: true
              data:
                communication_id: "879a83e9-3a20-4ef9-a631-c6d02f22a4db"
                status: queued
                scheduled_at: '2025-11-18T10:00:00Z'
                escalation_enabled: true
              message: Communication queued for delivery
              meta:
                timestamp: '2025-11-18T09:45:10Z'
                tenant_id: "6ba7b810-9dad-11d1-80b4-00c04fd430c8"
      '400':
        $ref: '#/components/responses/BadRequest'
      '401':
        $ref: '#/components/responses/Unauthorized'
      '403':
        $ref: '#/components/responses/Forbidden'
      '404':
        $ref: '#/components/responses/NotFound'

/admin/orders/{id}/sla:
  get:
    tags:
    - Orders Management
    summary: Get Order SLA Snapshot
    description: 'Retrieve SLA timers, breach risk, and escalation policies for an order.


      **Insights:**

      - Current and upcoming milestones

      - Time remaining vs contractual SLA

      - Breach risk scoring with color coding

      - Pending escalations and assigned owners

      - Historical breach patterns
      '
    operationId: getOrderSLA
    security:
    - bearerAuth: []
    parameters:
    - $ref: '#/components/parameters/TenantHeader'
    - name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: Order ID
    responses:
      '200':
        description: SLA snapshot retrieved successfully
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  data:
                    type: object
                    properties:
                      order_id:
                        type: string
                        format: uuid
                      breach_risk_score:
                        type: number
                        format: double
                      breach_risk_level:
                        type: string
                        enum:
                        - low
                        - medium
                        - high
                        - critical
                      next_checkpoint:
                        type: string
                        format: date-time
                      milestones:
                        type: array
                        items:
                          type: object
                          properties:
                            code:
                              type: string
                            name:
                              type: string
                            due_at:
                              type: string
                              format: date-time
                            status:
                              type: string
                              enum:
                              - pending
                              - on_track
                              - breached
                              - recovered
                            slack_minutes:
                              type: integer
                            escalation_owner:
                              type: string
                            notifications_sent:
                              type: array
                              items:
                                type: string
                      last_evaluated_at:
                        type: string
                        format: date-time
                      evaluator_version:
                        type: string
            example:
              success: true
              data:
                order_id: "550e8400-e29b-41d4-a716-446655440000"
                breach_risk_score: 72.5
                breach_risk_level: high
                next_checkpoint: '2025-11-18T15:00:00Z'
                milestones:
                - code: vendor-quotation-response
                  name: Vendor quotation response
                  due_at: '2025-11-18T12:00:00Z'
                  status: breached
                  slack_minutes: -90
                  escalation_owner: operations_manager
                  notifications_sent:
                  - vendor.followup
                  - manager.alert
                - code: production-start
                  name: Production start
                  due_at: '2025-11-19T09:00:00Z'
                  status: on_track
                  slack_minutes: 240
                  escalation_owner: production_lead
                  notifications_sent:
                  - production.reminder
                last_evaluated_at: '2025-11-18T09:40:00Z'
                evaluator_version: workflow-sla-engine@1.2.0
              meta:
                timestamp: '2025-11-18T09:40:05Z'
                tenant_id: "6ba7b810-9dad-11d1-80b4-00c04fd430c8"
  patch:
    tags:
    - Orders Management
    summary: Override SLA Milestones
    description: 'Adjust SLA targets, escalation owners, or pause timers with full audit logging.


      **Use Cases:**

      - Customer-approved delivery extension

      - Force majeure adjustments

      - Manual escalation assignment

      - Pause timers during vendor shutdowns

      - Sync SLA updates from external ERP
      '
    operationId: overrideOrderSLA
    security:
    - bearerAuth: []
    parameters:
    - $ref: '#/components/parameters/TenantHeader'
    - name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: Order ID
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              milestone_code:
                type: string
                description: SLA milestone identifier to update
              new_due_at:
                type: string
                format: date-time
                nullable: true
              pause_until:
                type: string
                format: date-time
                nullable: true
              escalation_owner:
                type: string
                nullable: true
              notes:
                type: string
              notify_parties:
                type: array
                items:
                  type: string
              reason_code:
                type: string
                enum:
                - customer_request
                - internal_issue
                - vendor_issue
                - force_majeure
                - system_adjustment
              propagate_to_related_orders:
                type: boolean
                default: false
          example:
            milestone_code: production-start
            new_due_at: '2025-11-20T09:00:00Z'
            escalation_owner: production_director
            notify_parties:
            - operations_manager
            - production_lead
            reason_code: vendor_issue
            notes: Vendor requested 1-day extension due to raw material shortage
    responses:
      '200':
        description: SLA updated successfully
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  data:
                    type: object
                    properties:
                      order_id:
                        type: string
                        format: uuid
                      milestone_code:
                        type: string
                      previous_due_at:
                        type: string
                        format: date-time
                        nullable: true
                      new_due_at:
                        type: string
                        format: date-time
                        nullable: true
                      pause_until:
                        type: string
                        format: date-time
                        nullable: true
                      escalation_owner:
                        type: string
                        nullable: true
                      audit_id:
                        type: string
                        format: uuid
            example:
              success: true
              data:
                order_id: "550e8400-e29b-41d4-a716-446655440000"
                milestone_code: production-start
                previous_due_at: '2025-11-19T09:00:00Z'
                new_due_at: '2025-11-20T09:00:00Z'
                pause_until: null
                escalation_owner: production_director
                audit_id: "1d6d78f5-8b9a-4d25-b1ea-b4d1b84d55e9"
              message: SLA updated and audit logged
              meta:
                timestamp: '2025-11-18T09:45:15Z'
                tenant_id: "6ba7b810-9dad-11d1-80b4-00c04fd430c8"
      '400':
        $ref: '#/components/responses/BadRequest'
      '401':
        $ref: '#/components/responses/Unauthorized'
      '403':
        $ref: '#/components/responses/Forbidden'
      '404':
        $ref: '#/components/responses/NotFound'

/admin/orders/{id}/quotations:
  get:
    tags:
    - Quotations Management
    summary: List Order Quotations
    description: 'Retrieve all quotations for an order with version history.


      **Quotation Types:**

      - Vendor quotations (incoming quotes from vendors)

      - Customer quotations (outgoing quotes to customers)

      - Version tracking for quote revisions

      - Approval and rejection history

      '
    operationId: listOrderQuotations
    security:
    - bearerAuth: []
    parameters:
    - $ref: '#/components/parameters/TenantHeader'
    - name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: Order ID
    - name: quotation_type
      in: query
      schema:
        type: string
        enum:
        - vendor
        - customer
      description: Filter by quotation type
    - name: status
      in: query
      schema:
        type: string
      description: Filter by quotation status
    responses:
      '200':
        description: Quotations retrieved successfully
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/OrderQuotation'
            example:
              success: true
              data:
                id: 550e8400-e29b-41d4-a716-446655440000
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
                title: Sample Orders Title
                created_at: '2025-11-13T18:58:00Z'
                updated_at: '2025-11-13T18:58:00Z'
              message: Orders retrieved successfully
              meta:
                timestamp: '2025-11-13T18:58:00Z'
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
      '401':
        $ref: '#/components/responses/Unauthorized'
      '403':
        $ref: '#/components/responses/Forbidden'
      '404':
        $ref: '#/components/responses/NotFound'
  post:
    tags:
    - Quotations Management
    summary: Create Order Quotation
    description: 'Create new quotation for order (vendor or customer quote).


      **Quotation Creation:**

      - Vendor quotations: Create from vendor negotiations

      - Customer quotations: Create with markup calculations

      - Automatic pricing calculations

      - Version management for revisions

      - Approval workflow integration

      '
    operationId: createOrderQuotation
    security:
    - bearerAuth: []
    parameters:
    - $ref: '#/components/parameters/TenantHeader'
    - name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: Order ID
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/CreateQuotationRequest'
          example:
            title: New Orders Title
            description: Sample description for orders
            is_active: true
    responses:
      '201':
        description: Quotation created successfully
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  data:
                    $ref: '#/components/schemas/OrderQuotation'
            example:
              success: true
              data:
                id: 550e8400-e29b-41d4-a716-446655440000
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
                created_at: '2025-11-13T18:58:00Z'
              message: Orders created successfully
              meta:
                timestamp: '2025-11-13T18:58:00Z'
      '400':
        $ref: '#/components/responses/BadRequest'
      '401':
        $ref: '#/components/responses/Unauthorized'
      '403':
        $ref: '#/components/responses/Forbidden'
      '422':
        $ref: '#/components/responses/ValidationError'
/admin/orders/{id}/quotations/{quotation_id}:
  get:
    tags:
    - Quotations Management
    summary: Get Quotation Details
    description: Retrieve detailed quotation information
    operationId: getQuotationDetails
    security:
    - bearerAuth: []
    parameters:
    - $ref: '#/components/parameters/TenantHeader'
    - name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid
    - name: quotation_id
      in: path
      required: true
      schema:
        type: string
        format: uuid
    responses:
      '200':
        description: Quotation details retrieved
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  data:
                    $ref: '#/components/schemas/OrderQuotation'
            example:
              success: true
              data:
                id: 550e8400-e29b-41d4-a716-446655440000
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
                title: Sample Orders Title
                created_at: '2025-11-13T18:58:00Z'
                updated_at: '2025-11-13T18:58:00Z'
              message: Orders retrieved successfully
              meta:
                timestamp: '2025-11-13T18:58:00Z'
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
      '404':
        $ref: '#/components/responses/NotFound'
/admin/orders/{id}/quotations/{quotation_id}/approve:
  post:
    tags:
    - Quotations Management
    summary: Approve Quotation
    description: "Approve quotation and proceed to next workflow stage.\n\n**Approval\
      \ Workflow:**\n- Vendor quotation approval \u2192 Generate customer quotation\n\
      - Customer quotation approval \u2192 Send to customer\n- Automatic price calculations\n\
      - Status transitions\n- Notification triggers\n"
    operationId: approveQuotation
    security:
    - bearerAuth: []
    parameters:
    - $ref: '#/components/parameters/TenantHeader'
    - name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid
    - name: quotation_id
      in: path
      required: true
      schema:
        type: string
        format: uuid
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              approval_notes:
                type: string
                description: Approval notes
              send_to_customer:
                type: boolean
                default: true
                description: Send customer quotation automatically
              custom_markup:
                type: number
                format: decimal
                description: Override default markup
          example:
            title: New Orders Title
            description: Sample description for orders
            is_active: true
    responses:
      '200':
        description: Quotation approved successfully
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  data:
                    type: object
                    properties:
                      quotation_id:
                        type: string
                        format: uuid
                      status:
                        type: string
                      approved_at:
                        type: string
                        format: date-time
                      order_status:
                        type: string
            example:
              success: true
              data:
                id: 550e8400-e29b-41d4-a716-446655440000
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
              message: Orders posted successfully
              meta:
                timestamp: '2025-11-13T18:58:00Z'
      '400':
        $ref: '#/components/responses/BadRequest'
      '404':
        $ref: '#/components/responses/NotFound'
/admin/orders/{id}/negotiations:
  get:
    tags:
    - Negotiations Management
    summary: List Order Negotiations
    description: 'Retrieve complete negotiation history for order.


      **Negotiation Tracking:**

      - All negotiation rounds with vendors

      - Price evolution and counter-offers

      - Decision tracking and reasons

      - Communication logs

      - Timeline analysis

      '
    operationId: listOrderNegotiations
    security:
    - bearerAuth: []
    parameters:
    - $ref: '#/components/parameters/TenantHeader'
    - name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid
    - name: vendor_id
      in: query
      schema:
        type: string
        format: uuid
      description: Filter by specific vendor
    - name: status
      in: query
      schema:
        type: string
      description: Filter by negotiation status
    responses:
      '200':
        description: Negotiations retrieved successfully
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/OrderNegotiation'
            example:
              success: true
              data:
                id: 550e8400-e29b-41d4-a716-446655440000
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
                title: Sample Orders Title
                created_at: '2025-11-13T18:58:00Z'
                updated_at: '2025-11-13T18:58:00Z'
              message: Orders retrieved successfully
              meta:
                timestamp: '2025-11-13T18:58:00Z'
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
  post:
    tags:
    - Negotiations Management
    summary: Create Negotiation Round
    description: 'Create new negotiation round with vendor.


      **Negotiation Process:**

      - Initial vendor requests

      - Counter-offers and price negotiations

      - Lead time discussions

      - Terms and conditions negotiation

      - Automatic email notifications

      '
    operationId: createNegotiationRound
    security:
    - bearerAuth: []
    parameters:
    - $ref: '#/components/parameters/TenantHeader'
    - name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
            - vendor_id
            - negotiation_type
            - offered_price
            - offered_lead_time_days
            properties:
              vendor_id:
                type: string
                format: uuid
              negotiation_type:
                type: string
                enum:
                - initial_request
                - counter_offer
                - final_offer
              offered_price:
                type: number
                format: decimal
              offered_lead_time_days:
                type: integer
              payment_terms:
                type: string
              notes:
                type: string
              send_email:
                type: boolean
                default: true
              response_deadline_hours:
                type: integer
                default: 72
          example:
            title: New Orders Title
            description: Sample description for orders
            is_active: true
    responses:
      '201':
        description: Negotiation round created
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  data:
                    $ref: '#/components/schemas/OrderNegotiation'
            example:
              success: true
              data:
                id: 550e8400-e29b-41d4-a716-446655440000
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
                created_at: '2025-11-13T18:58:00Z'
              message: Orders created successfully
              meta:
                timestamp: '2025-11-13T18:58:00Z'
/admin/orders/{id}/payments:
  get:
    tags:
    - Payments Management
    summary: List Order Payments
    description: 'Retrieve all payment records for order.


      **Payment Tracking:**

      - Customer payments (DP and full payments)

      - Vendor payments (DP and balance)

      - Payment verification status

      - Refund records

      - Accounting integration status

      '
    operationId: listOrderPayments
    security:
    - bearerAuth: []
    parameters:
    - $ref: '#/components/parameters/TenantHeader'
    - name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid
    - name: payment_type
      in: query
      schema:
        type: string
        enum:
        - customer_payment
        - vendor_payment
      description: Filter by payment type
    - name: status
      in: query
      schema:
        type: string
      description: Filter by payment status
    responses:
      '200':
        description: Payments retrieved successfully
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/OrderPayment'
            example:
              success: true
              data:
                id: 550e8400-e29b-41d4-a716-446655440000
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
                title: Sample Orders Title
                created_at: '2025-11-13T18:58:00Z'
                updated_at: '2025-11-13T18:58:00Z'
              message: Orders retrieved successfully
              meta:
                timestamp: '2025-11-13T18:58:00Z'
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
  post:
    tags:
    - Payments Management
    summary: Record Payment
    description: 'Record new payment (customer or vendor payment).


      **Payment Processing:**

      - Customer payment recording

      - Vendor payment processing

      - Automatic invoice generation

      - Payment verification workflows

      - Accounting system integration

      '
    operationId: recordOrderPayment
    security:
    - bearerAuth: []
    parameters:
    - $ref: '#/components/parameters/TenantHeader'
    - name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
            - payment_type
            - payment_for
            - amount
            - payment_method
            properties:
              payment_type:
                type: string
                enum:
                - customer_payment
                - vendor_payment
              payment_for:
                type: string
                enum:
                - dp
                - full
                - remaining
                - refund
              amount:
                type: number
                format: decimal
              payment_method:
                type: string
                enum:
                - cash
                - bank_transfer
                - credit_card
                - ewallet
              payment_date:
                type: string
                format: date-time
              bank_transfer_details:
                type: object
                properties:
                  bank_name:
                    type: string
                  account_number:
                    type: string
                  reference:
                    type: string
              proof_of_payment_url:
                type: string
                format: uri
              notes:
                type: string
              auto_verify:
                type: boolean
                default: false
          example:
            title: New Orders Title
            description: Sample description for orders
            is_active: true
    responses:
      '201':
        description: Payment recorded successfully
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  data:
                    $ref: '#/components/schemas/OrderPayment'
            example:
              success: true
              data:
                id: 550e8400-e29b-41d4-a716-446655440000
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
                created_at: '2025-11-13T18:58:00Z'
              message: Orders created successfully
              meta:
                timestamp: '2025-11-13T18:58:00Z'
/admin/orders/{id}/payments/{payment_id}/verify:
  post:
    tags:
    - Payments Management
    summary: Verify Payment
    description: 'Verify customer payment and update order status.


      **Verification Process:**

      - Manual verification for bank transfers

      - Automatic verification for payment gateways

      - Amount matching validation

      - Order status progression

      - Customer and vendor notifications

      '
    operationId: verifyOrderPayment
    security:
    - bearerAuth: []
    parameters:
    - $ref: '#/components/parameters/TenantHeader'
    - name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid
    - name: payment_id
      in: path
      required: true
      schema:
        type: string
        format: uuid
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
            - verification_status
            properties:
              verification_status:
                type: string
                enum:
                - verified
                - rejected
              verification_notes:
                type: string
              actual_amount:
                type: number
                format: decimal
                description: Actual amount received (if different)
          example:
            title: New Orders Title
            description: Sample description for orders
            is_active: true
    responses:
      '200':
        description: Payment verification completed
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  data:
                    type: object
                    properties:
                      payment_id:
                        type: string
                        format: uuid
                      status:
                        type: string
                      verified_at:
                        type: string
                        format: date-time
                      order_payment_status:
                        type: string
                      order_status:
                        type: string
            example:
              success: true
              data:
                id: 550e8400-e29b-41d4-a716-446655440000
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
              message: Orders posted successfully
              meta:
                timestamp: '2025-11-13T18:58:00Z'
/admin/orders/{id}/shipments:
  get:
    tags:
    - Shipments Management
    summary: List Order Shipments
    description: 'Retrieve all shipment records for order.


      **Shipment Information:**

      - Shipment details and tracking

      - Courier information

      - Delivery status and POD

      - Issue tracking and resolution

      - Return/exchange records

      '
    operationId: listOrderShipments
    security:
    - bearerAuth: []
    parameters:
    - $ref: '#/components/parameters/TenantHeader'
    - name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid
    responses:
      '200':
        description: Shipments retrieved successfully
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/OrderShipment'
            example:
              success: true
              data:
                id: 550e8400-e29b-41d4-a716-446655440000
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
                title: Sample Orders Title
                created_at: '2025-11-13T18:58:00Z'
                updated_at: '2025-11-13T18:58:00Z'
              message: Orders retrieved successfully
              meta:
                timestamp: '2025-11-13T18:58:00Z'
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
  post:
    tags:
    - Shipments Management
    summary: Create Shipment
    description: 'Create shipment record and ship order.


      **Shipping Process:**

      - Package preparation and documentation

      - Courier selection and booking

      - Tracking number generation

      - Customer notification

      - Status tracking setup

      '
    operationId: createOrderShipment
    security:
    - bearerAuth: []
    parameters:
    - $ref: '#/components/parameters/TenantHeader'
    - name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
            - courier_name
            - shipping_method
            properties:
              courier_name:
                type: string
              courier_service:
                type: string
              tracking_number:
                type: string
              shipping_method:
                type: string
                enum:
                - standard
                - express
                - same_day
                - next_day
              estimated_delivery_date:
                type: string
                format: date
              weight_kg:
                type: number
                format: decimal
              dimensions_cm:
                type: string
              shipping_cost:
                type: number
                format: decimal
              insurance_cost:
                type: number
                format: decimal
              special_handling:
                type: string
              notify_customer:
                type: boolean
                default: true
          example:
            title: New Orders Title
            description: Sample description for orders
            is_active: true
    responses:
      '201':
        description: Shipment created successfully
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  data:
                    $ref: '#/components/schemas/OrderShipment'
            example:
              success: true
              data:
                id: 550e8400-e29b-41d4-a716-446655440000
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
                created_at: '2025-11-13T18:58:00Z'
              message: Orders created successfully
              meta:
                timestamp: '2025-11-13T18:58:00Z'
/admin/orders/{id}/profitability:
  get:
    tags:
    - Analytics & Reports
    summary: Get Order Profitability Report
    description: 'Calculate and retrieve detailed profitability analysis for completed
      order.


      **Profitability Analysis:**

      - Complete revenue breakdown

      - All cost allocations (vendor, shipping, handling)

      - Profit calculations and margins

      - ROI analysis

      - Comparison with target margins

      '
    operationId: getOrderProfitability
    security:
    - bearerAuth: []
    parameters:
    - $ref: '#/components/parameters/TenantHeader'
    - name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid
    responses:
      '200':
        description: Profitability report generated
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  data:
                    $ref: '#/components/schemas/ProfitabilityReport'
            example:
              success: true
              data:
                id: 550e8400-e29b-41d4-a716-446655440000
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
                title: Sample Orders Title
                created_at: '2025-11-13T18:58:00Z'
                updated_at: '2025-11-13T18:58:00Z'
              message: Orders retrieved successfully
              meta:
                timestamp: '2025-11-13T18:58:00Z'
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
      '404':
        $ref: '#/components/responses/NotFound'
/admin/orders/analytics/dashboard:
  get:
    tags:
    - Analytics & Reports
    summary: Get Orders Dashboard Analytics
    description: 'Retrieve comprehensive order analytics for dashboard.


      **Dashboard Metrics:**

      - Order volume and trends

      - Revenue and profitability summaries

      - Status distribution analysis

      - Performance metrics (lead times, completion rates)

      - Vendor performance comparison

      - Customer satisfaction indicators

      '
    operationId: getOrdersDashboard
    security:
    - bearerAuth: []
    parameters:
    - $ref: '#/components/parameters/TenantHeader'
    - name: period
      in: query
      schema:
        type: string
        enum:
        - day
        - week
        - month
        - quarter
        - year
        default: month
      description: Analytics period
    - name: date_from
      in: query
      schema:
        type: string
        format: date
      description: Custom period start
    - name: date_to
      in: query
      schema:
        type: string
        format: date
      description: Custom period end
    responses:
      '200':
        description: Dashboard analytics retrieved
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  data:
                    type: object
                    properties:
                      summary:
                        $ref: '#/components/schemas/OrdersSummary'
                      trends:
                        type: object
                      performance_metrics:
                        type: object
                      vendor_analysis:
                        type: object
            example:
              success: true
              data:
                id: 550e8400-e29b-41d4-a716-446655440000
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
                title: Sample Orders Title
                created_at: '2025-11-13T18:58:00Z'
                updated_at: '2025-11-13T18:58:00Z'
              message: Orders retrieved successfully
              meta:
                timestamp: '2025-11-13T18:58:00Z'
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
/admin/orders/bulk/update-status:
  post:
    tags:
    - Bulk Operations
    summary: Bulk Update Order Status
    description: 'Update status for multiple orders simultaneously.


      **Bulk Operations:**

      - Multi-order status updates

      - Batch processing with validation

      - Error handling and reporting

      - Audit trail maintenance

      - Notification management

      '
    operationId: bulkUpdateOrderStatus
    security:
    - bearerAuth: []
    parameters:
    - $ref: '#/components/parameters/TenantHeader'
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
            - order_ids
            - status
            properties:
              order_ids:
                type: array
                items:
                  type: string
                  format: uuid
                minItems: 1
                maxItems: 100
              status:
                type: string
              notes:
                type: string
              notify_customers:
                type: boolean
                default: false
          example:
            title: New Orders Title
            description: Sample description for orders
            is_active: true
    responses:
      '200':
        description: Bulk update completed
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  data:
                    type: object
                    properties:
                      updated_count:
                        type: integer
                      failed_count:
                        type: integer
                      errors:
                        type: array
                        items:
                          type: object
                          properties:
                            order_id:
                              type: string
                            error:
                              type: string
            example:
              success: true
              data:
                id: 550e8400-e29b-41d4-a716-446655440000
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
              message: Orders posted successfully
              meta:
                timestamp: '2025-11-13T18:58:00Z'
/admin/orders/export:
  post:
    tags:
    - Export & Import
    summary: Export Orders Data
    description: 'Export orders data in various formats (Excel, CSV, PDF).


      **Export Options:**

      - Multiple file formats

      - Custom field selection

      - Date range filtering

      - Status-based filtering

      - Detailed vs summary exports

      '
    operationId: exportOrdersData
    security:
    - bearerAuth: []
    parameters:
    - $ref: '#/components/parameters/TenantHeader'
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
            - format
            properties:
              format:
                type: string
                enum:
                - excel
                - csv
                - pdf
              date_from:
                type: string
                format: date
              date_to:
                type: string
                format: date
              status_filter:
                type: array
                items:
                  type: string
              include_items:
                type: boolean
                default: true
              include_payments:
                type: boolean
                default: true
              include_shipments:
                type: boolean
                default: true
          example:
            title: New Orders Title
            description: Sample description for orders
            is_active: true
    responses:
      '200':
        description: Export file generated
        content:
          application/json:
            schema:
              allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  data:
                    type: object
                    properties:
                      download_url:
                        type: string
                        format: uri
                      filename:
                        type: string
                      expires_at:
                        type: string
                        format: date-time
            example:
              success: true
              data:
                id: 550e8400-e29b-41d4-a716-446655440000
                tenant_id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
              message: Orders posted successfully
              meta:
                timestamp: '2025-11-13T18:58:00Z'
