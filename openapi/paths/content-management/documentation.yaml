# Documentation & Help Center API Path Items - Platform & Tenant Separated
# This file contains only path items (no openapi/info/paths wrapper)
# Refactored for platform/tenant endpoint separation compliance

# ================================================================
# PLATFORM DOCUMENTATION ENDPOINTS - Admin Management
# ================================================================

# Platform Documentation Articles - Admin management across all tenants
/platform/documentation/articles:
  get:
    tags:
      - Platform Documentation Articles
    summary: List All Documentation Articles (Platform)
    description: |
      Platform-level endpoint to retrieve paginated list of all documentation articles across all tenants.
      
      Platform Admin Features:
      - Cross-tenant article management
      - Global search and filtering
      - Analytics and performance metrics
      - Content approval workflows
      - System-wide categorization
    operationId: platformListDocumentationArticles
    security:
      - bearerAuth: []
    x-permissions:
      - platform.doc.list
    parameters:
      - $ref: '../../components/parameters.yaml#/PageParam'
      - $ref: '../../components/parameters.yaml#/PerPageParam'
      - $ref: '../../components/parameters.yaml#/SortParam'
      - name: tenant_id
        in: query
        description: Filter by specific tenant UUID
        schema:
          type: string
          format: uuid
        example: "550e8400-e29b-41d4-a716-446655440000"
      - name: search
        in: query
        description: Search in title, content, excerpt
        schema:
          type: string
          maxLength: 255
        example: "etching design"
      - name: category_id
        in: query
        description: Filter by category UUID
        schema:
          type: string
          format: uuid
        example: "550e8400-e29b-41d4-a716-446655440000"
      - name: status
        in: query
        description: Filter by article status
        schema:
          type: string
          enum: [draft, review, approved, published, archived]
        example: "published"
      - name: visibility
        in: query
        description: Filter by visibility level
        schema:
          type: string
          enum: [private, internal, public, customer]
        example: "customer"
    responses:
      '200':
        description: Platform documentation articles retrieved successfully
        content:
          application/json:
            schema:
              $ref: '../../components/schemas.yaml#/DocumentationArticlesResponse'
      '400':
        $ref: '../../components/responses.yaml#/ValidationError'
      '401':
        $ref: '../../components/responses.yaml#/Unauthorized'
      '403':
        $ref: '../../components/responses.yaml#/Forbidden'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

  post:
    tags:
      - Platform Documentation Articles
    summary: Create Documentation Article (Platform)
    description: |
      Platform-level endpoint to create documentation articles with admin privileges.
    operationId: platformCreateDocumentationArticle
    security:
      - bearerAuth: []
    x-permissions:
      - platform.doc.create
    requestBody:
      required: true
      content:
        application/json:
          schema:
            allOf:
              - $ref: '../../components/schemas.yaml#/DocumentationArticleInput'
              - type: object
                properties:
                  tenant_id:
                    type: string
                    format: uuid
                    description: Target tenant for article creation
                    example: "550e8400-e29b-41d4-a716-446655440000"
    responses:
      '201':
        description: Platform documentation article created successfully
        content:
          application/json:
            schema:
              $ref: '../../components/schemas.yaml#/DocumentationArticleResponse'
      '400':
        $ref: '../../components/responses.yaml#/ValidationError'
      '401':
        $ref: '../../components/responses.yaml#/Unauthorized'
      '403':
        $ref: '../../components/responses.yaml#/Forbidden'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

/platform/documentation/articles/{articleId}:
  get:
    tags:
      - Platform Documentation Articles
    summary: Get Documentation Article (Platform)
    description: |
      Platform-level endpoint to retrieve specific documentation article with admin privileges.
    operationId: platformGetDocumentationArticle
    security:
      - bearerAuth: []
    x-permissions:
      - platform.doc.read
    parameters:
      - name: articleId
        in: path
        required: true
        description: Documentation article UUID
        schema:
          type: string
          format: uuid
        example: "550e8400-e29b-41d4-a716-446655440000"
    responses:
      '200':
        description: Platform documentation article retrieved successfully
        content:
          application/json:
            schema:
              $ref: '../../components/schemas.yaml#/DocumentationArticleResponse'
      '404':
        $ref: '../../components/responses.yaml#/NotFound'
      '401':
        $ref: '../../components/responses.yaml#/Unauthorized'
      '403':
        $ref: '../../components/responses.yaml#/Forbidden'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

  patch:
    tags:
      - Platform Documentation Articles
    summary: Update Documentation Article (Platform)
    description: |
      Platform-level endpoint to update documentation articles with admin privileges.
    operationId: platformUpdateDocumentationArticle
    security:
      - bearerAuth: []
    x-permissions:
      - platform.doc.update
    parameters:
      - name: articleId
        in: path
        required: true
        description: Documentation article UUID
        schema:
          type: string
          format: uuid
        example: "550e8400-e29b-41d4-a716-446655440000"
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../../components/schemas.yaml#/DocumentationArticleInput'
    responses:
      '200':
        description: Platform documentation article updated successfully
        content:
          application/json:
            schema:
              $ref: '../../components/schemas.yaml#/DocumentationArticleResponse'
      '400':
        $ref: '../../components/responses.yaml#/ValidationError'
      '401':
        $ref: '../../components/responses.yaml#/Unauthorized'
      '403':
        $ref: '../../components/responses.yaml#/Forbidden'
      '404':
        $ref: '../../components/responses.yaml#/NotFound'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

  delete:
    tags:
      - Platform Documentation Articles
    summary: Delete Documentation Article (Platform)
    description: |
      Platform-level endpoint to delete documentation articles with admin privileges.
    operationId: platformDeleteDocumentationArticle
    security:
      - bearerAuth: []
    x-permissions:
      - platform.doc.delete
    parameters:
      - name: articleId
        in: path
        required: true
        description: Documentation article UUID
        schema:
          type: string
          format: uuid
        example: "550e8400-e29b-41d4-a716-446655440000"
    responses:
      '200':
        description: Platform documentation article deleted successfully
        content:
          application/json:
            schema:
              allOf:
                - $ref: '../../components/schemas.yaml#/BaseResponse'
                - type: object
                  properties:
                    message:
                      type: string
                      example: "Documentation article deleted successfully"
      '401':
        $ref: '../../components/responses.yaml#/Unauthorized'
      '403':
        $ref: '../../components/responses.yaml#/Forbidden'
      '404':
        $ref: '../../components/responses.yaml#/NotFound'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

# Platform Documentation Categories
/platform/documentation/categories:
  get:
    tags:
      - Platform Documentation Categories
    summary: List All Documentation Categories (Platform)
    description: |
      Platform-level endpoint to manage documentation categories across all tenants.
    operationId: platformListDocumentationCategories
    security:
      - bearerAuth: []
    x-permissions:
      - platform.doc.category.list
    parameters:
      - name: tenant_id
        in: query
        description: Filter by specific tenant UUID
        schema:
          type: string
          format: uuid
        example: "550e8400-e29b-41d4-a716-446655440000"
    responses:
      '200':
        description: Platform documentation categories retrieved successfully
        content:
          application/json:
            schema:
              $ref: '../../components/schemas.yaml#/DocumentationCategoriesResponse'
      '401':
        $ref: '../../components/responses.yaml#/Unauthorized'
      '403':
        $ref: '../../components/responses.yaml#/Forbidden'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

  post:
    tags:
      - Platform Documentation Categories
    summary: Create Documentation Category (Platform)
    description: |
      Platform-level endpoint to create documentation categories.
    operationId: platformCreateDocumentationCategory
    security:
      - bearerAuth: []
    x-permissions:
      - platform.doc.category.create
    requestBody:
      required: true
      content:
        application/json:
          schema:
            allOf:
              - $ref: '../../components/schemas.yaml#/DocumentationCategoryInput'
              - type: object
                properties:
                  tenant_id:
                    type: string
                    format: uuid
                    description: Target tenant for category creation
                    example: "550e8400-e29b-41d4-a716-446655440000"
    responses:
      '201':
        description: Platform documentation category created successfully
        content:
          application/json:
            schema:
              $ref: '../../components/schemas.yaml#/DocumentationCategoryResponse'
      '400':
        $ref: '../../components/responses.yaml#/ValidationError'
      '401':
        $ref: '../../components/responses.yaml#/Unauthorized'
      '403':
        $ref: '../../components/responses.yaml#/Forbidden'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

# ================================================================
# TENANT DOCUMENTATION ENDPOINTS - Tenant-Specific Operations
# ================================================================

# Tenant Documentation Articles - Tenant-specific operations
/tenant/documentation/articles:
  get:
    tags:
      - Tenant Documentation Articles
    summary: List Documentation Articles (Tenant)
    description: |
      Tenant-specific endpoint to retrieve documentation articles within tenant scope.
      
      Tenant Features:
      - Tenant-scoped article access
      - Customer/internal visibility filtering
      - Tenant-specific categorization
      - Content personalization
      - Usage analytics
    operationId: tenantListDocumentationArticles
    security:
      - bearerAuth: []
    x-permissions:
      - tenant.doc.list
    parameters:
      - $ref: '../../components/parameters.yaml#/TenantHeader'
      - $ref: '../../components/parameters.yaml#/PageParam'
      - $ref: '../../components/parameters.yaml#/PerPageParam'
      - $ref: '../../components/parameters.yaml#/SortParam'
      - name: search
        in: query
        description: Search in title, content, excerpt
        schema:
          type: string
          maxLength: 255
        example: "etching design"
      - name: category_id
        in: query
        description: Filter by category UUID
        schema:
          type: string
          format: uuid
        example: "550e8400-e29b-41d4-a716-446655440000"
      - name: status
        in: query
        description: Filter by article status
        schema:
          type: string
          enum: [draft, review, approved, published, archived]
        example: "published"
      - name: visibility
        in: query
        description: Filter by visibility level
        schema:
          type: string
          enum: [private, internal, public, customer]
        example: "customer"
      - name: difficulty_level
        in: query
        description: Filter by difficulty level
        schema:
          type: string
          enum: [beginner, intermediate, advanced, expert]
        example: "beginner"
      - name: author_id
        in: query
        description: Filter by author UUID
        schema:
          type: string
          format: uuid
        example: "123e4567-e89b-12d3-a456-426614174000"
      - name: tags
        in: query
        description: Filter by comma-separated tags
        schema:
          type: string
        example: "design,tutorial,metal"
      - name: published_from
        in: query
        description: Filter articles published after this date
        schema:
          type: string
          format: date
        example: "2025-01-01"
      - name: published_to
        in: query
        description: Filter articles published before this date
        schema:
          type: string
          format: date
        example: "2025-12-31"
    responses:
      '200':
        description: Tenant documentation articles retrieved successfully
        content:
          application/json:
            schema:
              $ref: '../../components/schemas.yaml#/DocumentationArticlesResponse'
            examples:
              ok:
                summary: Articles list
                value:
                  success: true
                  data:
                    items:
                      - id: "550e8400-e29b-41d4-a716-446655440000"
                        title: "Advanced Metal Etching Techniques"
                        slug: "advanced-metal-etching-techniques"
                        status: "published"
                        visibility: "public"
                        category_id: "987fcdeb-51a2-43d1-9f4b-123456789abc"
                        published_at: "2025-02-10T09:30:00Z"
                      - id: "123e4567-e89b-12d3-a456-426614174000"
                        title: "Beginner's Guide to Etching"
                        slug: "beginners-guide-etching"
                        status: "published"
                        visibility: "customer"
                        category_id: "876e4321-e89b-12d3-a456-426614174000"
                        published_at: "2025-02-14T12:00:00Z"
                    meta:
                      page: 1
                      per_page: 10
                      total: 2
      '400':
        $ref: '../../components/responses.yaml#/ValidationError'
      '401':
        $ref: '../../components/responses.yaml#/Unauthorized'
      '429':
        $ref: '../../components/responses.yaml#/RateLimitExceeded'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

  post:
    tags:
      - Tenant Documentation Articles
    summary: Create Documentation Article (Tenant)
    description: |
      Tenant-specific endpoint to create new documentation articles.
      
      Tenant Features:
      - Tenant-scoped article creation
      - Rich content with markdown/HTML support
      - Category assignment and tagging
      - SEO metadata management
      - Version control integration
    operationId: tenantCreateDocumentationArticle
    security:
      - bearerAuth: []
    x-permissions:
      - tenant.doc.create
    parameters:
      - $ref: '../../components/parameters.yaml#/TenantHeader'
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../../components/schemas.yaml#/DocumentationArticleInput'
          examples:
            technical_guide:
              summary: Technical guide article
              value:
                title: "Advanced Metal Etching Techniques for Industrial Applications"
                slug: "advanced-metal-etching-techniques-industrial"
                excerpt: "Master professional etching techniques for industrial-grade metal products"
                content: "## Introduction\n\nThis comprehensive guide covers advanced techniques for metal etching in industrial applications...\n\n### Required Materials\n\n1. High-grade stainless steel\n2. Precision etching tools\n3. Safety equipment\n\n### Process Steps\n\n#### Step 1: Preparation\n..."
                content_type: "markdown"
                status: "draft"
                visibility: "customer"
                category_id: "550e8400-e29b-41d4-a716-446655440000"
                difficulty_level: "advanced"
                meta_title: "Advanced Metal Etching Techniques | PT Custom Etching Xenial"
                meta_description: "Learn professional metal etching techniques for industrial applications with our comprehensive guide"
                meta_keywords: "metal etching, industrial etching, advanced techniques, stainless steel"
                tags: ["metal-etching", "advanced", "industrial", "techniques"]
                featured_image_url: "https://cdn.ptcex.com/docs/advanced-etching-featured.jpg"
    responses:
      '201':
        description: Tenant documentation article created successfully
        content:
          application/json:
            schema:
              $ref: '../../components/schemas.yaml#/DocumentationArticleResponse'
            examples:
              created:
                summary: Article created
                value:
                  success: true
                  data:
                    id: "550e8400-e29b-41d4-a716-446655440000"
                    title: "Advanced Metal Etching Techniques for Industrial Applications"
                    slug: "advanced-metal-etching-techniques-industrial"
                    status: "draft"
                    visibility: "customer"
                    category_id: "550e8400-e29b-41d4-a716-446655440000"
                    difficulty_level: "advanced"
                    created_at: "2025-02-15T09:00:00Z"
      '400':
        $ref: '../../components/responses.yaml#/ValidationError'
      '401':
        $ref: '../../components/responses.yaml#/Unauthorized'
      '403':
        $ref: '../../components/responses.yaml#/Forbidden'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

/tenant/documentation/articles/{articleId}:
  get:
    tags:
      - Tenant Documentation Articles
    summary: Get Documentation Article (Tenant)
    description: |
      Tenant-specific endpoint to retrieve specific documentation article.
      
      Features:
      - Article content with metadata
      - Related articles suggestions
      - View count tracking
      - Version history access
      - Category information
    operationId: tenantGetDocumentationArticle
    security:
      - bearerAuth: []
    x-permissions:
      - tenant.doc.read
    parameters:
      - $ref: '../../components/parameters.yaml#/TenantHeader'
      - name: articleId
        in: path
        required: true
        description: Documentation article UUID
        schema:
          type: string
          format: uuid
        example: "550e8400-e29b-41d4-a716-446655440000"
      - name: increment_views
        in: query
        description: Whether to increment view count
        schema:
          type: boolean
          default: true
        example: true
      - name: include_versions
        in: query
        description: Include version history
        schema:
          type: boolean
          default: false
        example: false
      - name: include_related
        in: query
        description: Include related articles
        schema:
          type: boolean
          default: true
        example: true
    responses:
      '200':
        description: Tenant documentation article retrieved successfully
        content:
          application/json:
            schema:
              $ref: '../../components/schemas.yaml#/DocumentationArticleResponse'
            examples:
              ok:
                summary: Article detail
                value:
                  success: true
                  data:
                    id: "550e8400-e29b-41d4-a716-446655440000"
                    title: "Advanced Metal Etching Techniques"
                    slug: "advanced-metal-etching-techniques"
                    status: "published"
                    category_id: "987fcdeb-51a2-43d1-9f4b-123456789abc"
                    published_at: "2025-02-10T09:30:00Z"
                    content: "## Introduction..."
                    tags: ["metal-etching", "advanced"]
      '404':
        $ref: '../../components/responses.yaml#/NotFound'
      '401':
        $ref: '../../components/responses.yaml#/Unauthorized'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

  patch:
    tags:
      - Tenant Documentation Articles
    summary: Update Documentation Article (Tenant)
    description: |
      Tenant-specific endpoint to update documentation articles with version control.
      
      Tenant Features:
      - Partial updates support
      - Automatic version creation
      - Status workflow management
      - Content approval process
      - SEO metadata updates
    operationId: tenantUpdateDocumentationArticle
    security:
      - bearerAuth: []
    x-permissions:
      - tenant.doc.update
    parameters:
      - $ref: '../../components/parameters.yaml#/TenantHeader'
      - name: articleId
        in: path
        required: true
        description: Documentation article UUID
        schema:
          type: string
          format: uuid
        example: "550e8400-e29b-41d4-a716-446655440000"
      - name: create_version
        in: query
        description: Whether to create a new version
        schema:
          type: boolean
          default: true
        example: true
      - name: version_type
        in: query
        description: Type of version change
        schema:
          type: string
          enum: [major, minor, patch, hotfix]
          default: "minor"
        example: "minor"
      - name: change_summary
        in: query
        description: Summary of changes made
        schema:
          type: string
          maxLength: 500
        example: "Updated material specifications and added safety guidelines"
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../../components/schemas.yaml#/DocumentationArticleInput'
          examples:
            update_basic:
              summary: Update title and excerpt
              value:
                title: "Advanced Metal Etching Techniques (Updated)"
                excerpt: "Updated professional etching techniques overview"
    responses:
      '200':
        description: Tenant documentation article updated successfully
        content:
          application/json:
            schema:
              $ref: '../../components/schemas.yaml#/DocumentationArticleResponse'
            examples:
              ok:
                summary: Article updated
                value:
                  success: true
                  data:
                    id: "550e8400-e29b-41d4-a716-446655440000"
                    title: "Advanced Metal Etching Techniques (Updated)"
                    status: "published"
                    updated_at: "2025-02-16T11:20:00Z"
      '400':
        $ref: '../../components/responses.yaml#/ValidationError'
      '401':
        $ref: '../../components/responses.yaml#/Unauthorized'
      '403':
        $ref: '../../components/responses.yaml#/Forbidden'
      '404':
        $ref: '../../components/responses.yaml#/NotFound'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

  delete:
    tags:
      - Tenant Documentation Articles
    summary: Delete Documentation Article (Tenant)
    description: |
      Tenant-specific endpoint to delete documentation articles (soft delete to archived status by default).
      
      Tenant Features:
      - Soft delete (archive) by default
      - Hard delete option for admins
      - Cascade handling for related content
      - Version history preservation
    operationId: tenantDeleteDocumentationArticle
    security:
      - bearerAuth: []
    x-permissions:
      - tenant.doc.delete
    parameters:
      - $ref: '../../components/parameters.yaml#/TenantHeader'
      - name: articleId
        in: path
        required: true
        description: Documentation article UUID
        schema:
          type: string
          format: uuid
        example: "550e8400-e29b-41d4-a716-446655440000"
      - name: hard_delete
        in: query
        description: Permanently delete instead of archiving
        schema:
          type: boolean
          default: false
        example: false
      - name: preserve_versions
        in: query
        description: Keep version history when hard deleting
        schema:
          type: boolean
          default: true
        example: true
    responses:
      '200':
        description: Tenant documentation article deleted successfully
        content:
          application/json:
            schema:
              allOf:
                - $ref: '../../components/schemas.yaml#/BaseResponse'
                - type: object
                  properties:
                    message:
                      type: string
                      example: "Documentation article archived successfully"
            examples:
              ok:
                summary: Deleted (archived)
                value:
                  success: true
                  message: "Documentation article archived successfully"
      '401':
        $ref: '../../components/responses.yaml#/Unauthorized'
      '403':
        $ref: '../../components/responses.yaml#/Forbidden'
      '404':
        $ref: '../../components/responses.yaml#/NotFound'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

/tenant/documentation/articles/bulk:
  post:
    tags:
      - Tenant Documentation Articles
    summary: Bulk Operations on Articles (Tenant)
    description: |
      Tenant-specific endpoint to perform bulk operations on multiple documentation articles.
      
      Tenant Operations:
      - Bulk publish/unpublish articles
      - Bulk category assignment
      - Bulk status updates
      - Bulk tag management
      - Export selected articles
    operationId: tenantBulkOperationsDocumentationArticles
    security:
      - bearerAuth: []
    x-permissions:
      - tenant.doc.update
    parameters:
      - $ref: '../../components/parameters.yaml#/TenantHeader'
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
              - action
              - article_ids
            properties:
              action:
                type: string
                enum: [publish, unpublish, archive, delete, update_category, add_tags, remove_tags, export]
                description: Bulk operation to perform
                example: "publish"
              article_ids:
                type: array
                items:
                  type: string
                  format: uuid
                description: Array of article UUIDs
                example: ["550e8400-e29b-41d4-a716-446655440000", "123e4567-e89b-12d3-a456-426614174000"]
              parameters:
                type: object
                additionalProperties: true
                description: Action-specific parameters
                example:
                  category_id: "987fcdeb-51a2-43d1-9f4b-123456789abc"
                  tags: ["updated", "reviewed"]
    responses:
      '200':
        description: Tenant bulk operation completed successfully
        content:
          application/json:
            schema:
              allOf:
                - $ref: '../../components/schemas.yaml#/BaseResponse'
                - type: object
                  properties:
                    data:
                      type: object
                      properties:
                        processed:
                          type: integer
                          example: 15
                        failed:
                          type: integer
                          example: 2
                        errors:
                          type: array
                          items:
                            type: object
                            properties:
                              article_id:
                                type: string
                                format: uuid
                              error:
                                type: string
            examples:
              ok:
                summary: Bulk result
                value:
                  success: true
                  data:
                    processed: 15
                    failed: 2
                    errors:
                      - article_id: "123e4567-e89b-12d3-a456-426614174000"
                        error: "NOT_FOUND"
                      - article_id: "987e6543-e21b-98d7-a654-426614174111"
                        error: "VALIDATION_ERROR"
      '400':
        $ref: '../../components/responses.yaml#/ValidationError'
      '401':
        $ref: '../../components/responses.yaml#/Unauthorized'
      '403':
        $ref: '../../components/responses.yaml#/Forbidden'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

# ================================================================
# TENANT DOCUMENTATION CATEGORIES ENDPOINTS
# ================================================================
/tenant/documentation/categories:
  get:
    tags:
      - Tenant Documentation Categories
    summary: List Documentation Categories (Tenant)
    description: |
      Tenant-specific endpoint to retrieve hierarchical list of documentation categories with article counts.
      
      Features:
      - Hierarchical tree structure
      - Article counts per category
      - Visibility filtering
      - Sort order support
      - Featured categories
    operationId: tenantListDocumentationCategories
    security:
      - bearerAuth: []
    x-permissions:
      - tenant.doc.category.list
    parameters:
      - $ref: '../../components/parameters.yaml#/TenantHeader'
      - name: include_hidden
        in: query
        description: Include hidden categories
        schema:
          type: boolean
          default: false
        example: false
      - name: featured_only
        in: query
        description: Return only featured categories
        schema:
          type: boolean
          default: false
        example: false
      - name: flat
        in: query
        description: Return flat list instead of hierarchy
        schema:
          type: boolean
          default: false
        example: false
      - name: include_counts
        in: query
        description: Include article counts
        schema:
          type: boolean
          default: true
        example: true
    responses:
      '200':
        description: Tenant documentation categories retrieved successfully
        content:
          application/json:
            schema:
              $ref: '../../components/schemas.yaml#/DocumentationCategoriesResponse'
            examples:
              ok:
                summary: Categories list
                value:
                  success: true
                  data:
                    items:
                      - id: "550e8400-e29b-41d4-a716-446655440000"
                        name: "Technical Guides"
                        slug: "technical-guides"
                        is_visible: true
                        is_featured: true
                        article_count: 12
                      - id: "987fcdeb-51a2-43d1-9f4b-123456789abc"
                        name: "Material Specifications"
                        slug: "material-specifications"
                        is_visible: true
                        is_featured: false
                        article_count: 7
      '401':
        $ref: '../../components/responses.yaml#/Unauthorized'
      '429':
        $ref: '../../components/responses.yaml#/RateLimitExceeded'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

  post:
    tags:
      - Tenant Documentation Categories
    summary: Create Documentation Category (Tenant)
    description: |
      Tenant-specific endpoint to create new documentation categories with hierarchical support.
      
      Tenant Features:
      - Parent-child relationships
      - Custom icons and colors
      - Sort order management
      - Visibility controls
      - Metadata storage
    operationId: tenantCreateDocumentationCategory
    security:
      - bearerAuth: []
    x-permissions:
      - tenant.doc.category.create
    parameters:
      - $ref: '../../components/parameters.yaml#/TenantHeader'
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../../components/schemas.yaml#/DocumentationCategoryInput'
          examples:
            main_category:
              summary: Main category
              value:
                name: "Technical Guides"
                slug: "technical-guides"
                description: "Comprehensive technical documentation for etching processes"
                icon: "book-open"
                color: "#3B82F6"
                sort_order: 10
                is_visible: true
                is_featured: true
            sub_category:
              summary: Sub-category
              value:
                parent_id: "550e8400-e29b-41d4-a716-446655440000"
                name: "Material Specifications"
                slug: "material-specifications"
                description: "Detailed specifications for different etching materials"
                icon: "layers"
                color: "#10B981"
                sort_order: 5
    responses:
      '201':
        description: Tenant documentation category created successfully
        content:
          application/json:
            schema:
              $ref: '../../components/schemas.yaml#/DocumentationCategoryResponse'
            examples:
              created:
                summary: Category created
                value:
                  success: true
                  data:
                    id: "550e8400-e29b-41d4-a716-446655440000"
                    name: "Technical Guides"
                    slug: "technical-guides"
                    is_visible: true
                    is_featured: true
                    sort_order: 10
      '400':
        $ref: '../../components/responses.yaml#/ValidationError'
      '401':
        $ref: '../../components/responses.yaml#/Unauthorized'
      '403':
        $ref: '../../components/responses.yaml#/Forbidden'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

/tenant/documentation/categories/{categoryId}:
  get:
    tags:
      - Tenant Documentation Categories
    summary: Get Documentation Category (Tenant)
    description: |
      Tenant-specific endpoint to retrieve specific documentation category with optional subcategories.
    operationId: tenantGetDocumentationCategory
    security:
      - bearerAuth: []
    x-permissions:
      - tenant.doc.category.read
    parameters:
      - $ref: '../../components/parameters.yaml#/TenantHeader'
      - name: categoryId
        in: path
        required: true
        description: Documentation category UUID
        schema:
          type: string
          format: uuid
        example: "550e8400-e29b-41d4-a716-446655440000"
      - name: include_children
        in: query
        description: Include subcategories
        schema:
          type: boolean
          default: false
        example: true
      - name: include_articles
        in: query
        description: Include recent articles
        schema:
          type: boolean
          default: false
        example: false
    responses:
      '200':
        description: Tenant documentation category retrieved successfully
        content:
          application/json:
            schema:
              $ref: '../../components/schemas.yaml#/DocumentationCategoryResponse'
            examples:
              ok:
                summary: Category detail
                value:
                  success: true
                  data:
                    id: "550e8400-e29b-41d4-a716-446655440000"
                    name: "Technical Guides"
                    slug: "technical-guides"
                    is_visible: true
                    is_featured: true
                    parent_id: null
      '404':
        $ref: '../../components/responses.yaml#/NotFound'
      '401':
        $ref: '../../components/responses.yaml#/Unauthorized'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

  patch:
    tags:
      - Tenant Documentation Categories
    summary: Update Documentation Category (Tenant)
    description: |
      Tenant-specific endpoint to update existing documentation categories.
    operationId: tenantUpdateDocumentationCategory
    security:
      - bearerAuth: []
    x-permissions:
      - tenant.doc.category.update
    parameters:
      - $ref: '../../components/parameters.yaml#/TenantHeader'
      - name: categoryId
        in: path
        required: true
        description: Documentation category UUID
        schema:
          type: string
          format: uuid
        example: "550e8400-e29b-41d4-a716-446655440000"
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../../components/schemas.yaml#/DocumentationCategoryInput'
          examples:
            update_name:
              summary: Update name/visibility
              value:
                name: "Technical Guides (Updated)"
                is_visible: false
    responses:
      '200':
        description: Tenant documentation category updated successfully
        content:
          application/json:
            schema:
              $ref: '../../components/schemas.yaml#/DocumentationCategoryResponse'
            examples:
              ok:
                summary: Category updated
                value:
                  success: true
                  data:
                    id: "550e8400-e29b-41d4-a716-446655440000"
                    name: "Technical Guides (Updated)"
                    slug: "technical-guides"
                    is_visible: false
                    is_featured: true
      '400':
        $ref: '../../components/responses.yaml#/ValidationError'
      '401':
        $ref: '../../components/responses.yaml#/Unauthorized'
      '403':
        $ref: '../../components/responses.yaml#/Forbidden'
      '404':
        $ref: '../../components/responses.yaml#/NotFound'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

  delete:
    tags:
      - Tenant Documentation Categories
    summary: Delete Documentation Category (Tenant)
    description: |
      Tenant-specific endpoint to delete documentation categories with cascade handling.
    operationId: tenantDeleteDocumentationCategory
    security:
      - bearerAuth: []
    x-permissions:
      - tenant.doc.category.delete
    parameters:
      - $ref: '../../components/parameters.yaml#/TenantHeader'
      - name: categoryId
        in: path
        required: true
        description: Documentation category UUID
        schema:
          type: string
          format: uuid
        example: "550e8400-e29b-41d4-a716-446655440000"
      - name: reassign_to
        in: query
        description: Reassign articles to this category UUID
        schema:
          type: string
          format: uuid
        example: "123e4567-e89b-12d3-a456-426614174000"
    responses:
      '200':
        description: Tenant documentation category deleted successfully
        content:
          application/json:
            schema:
              allOf:
                - $ref: '../../components/schemas.yaml#/BaseResponse'
                - type: object
                  properties:
                    message:
                      type: string
                      example: "Documentation category deleted successfully"
            examples:
              ok:
                summary: Deleted
                value:
                  success: true
                  message: "Documentation category deleted successfully"
      '400':
        $ref: '../../components/responses.yaml#/ValidationError'
      '401':
        $ref: '../../components/responses.yaml#/Unauthorized'
      '403':
        $ref: '../../components/responses.yaml#/Forbidden'
      '404':
        $ref: '../../components/responses.yaml#/NotFound'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

# ================================================================
# TENANT HELP TICKETS ENDPOINTS
# ================================================================
/tenant/help/tickets:
  get:
    tags:
      - Tenant Help Tickets
    summary: List Help Tickets (Tenant)
    description: |
      Tenant-specific endpoint to retrieve paginated list of help tickets with filtering and search.
      
      Support Features:
      - Filter by status, priority, assignment
      - Search in subject and description
      - Customer and staff views
      - SLA tracking and metrics
    operationId: tenantListHelpTickets
    security:
      - bearerAuth: []
    x-permissions:
      - tenant.doc.help.list
    parameters:
      - $ref: '../../components/parameters.yaml#/TenantHeader'
      - $ref: '../../components/parameters.yaml#/PageParam'
      - $ref: '../../components/parameters.yaml#/PerPageParam'
      - $ref: '../../components/parameters.yaml#/SortParam'
      - name: search
        in: query
        description: Search in subject, description, ticket number
        schema:
          type: string
          maxLength: 255
        example: "design file"
      - name: status
        in: query
        description: Filter by ticket status
        schema:
          type: string
          enum: [open, in_progress, waiting_customer, resolved, closed]
        example: "open"
      - name: priority
        in: query
        description: Filter by ticket priority
        schema:
          type: string
          enum: [low, medium, high, urgent]
        example: "high"
      - name: assigned_to
        in: query
        description: Filter by assigned staff UUID
        schema:
          type: string
          format: uuid
        example: "550e8400-e29b-41d4-a716-446655440000"
      - name: customer_id
        in: query
        description: Filter by customer UUID
        schema:
          type: string
          format: uuid
        example: "123e4567-e89b-12d3-a456-426614174000"
      - name: category
        in: query
        description: Filter by ticket category
        schema:
          type: string
        example: "Technical Support"
      - name: created_from
        in: query
        description: Filter tickets created after this date
        schema:
          type: string
          format: date
        example: "2025-01-01"
      - name: created_to
        in: query
        description: Filter tickets created before this date
        schema:
          type: string
          format: date
        example: "2025-12-31"
    responses:
      '200':
        description: Tenant help tickets retrieved successfully
        content:
          application/json:
            schema:
              $ref: '../../components/schemas.yaml#/HelpTicketsResponse'
            examples:
              ok:
                summary: Tickets list
                value:
                  success: true
                  data:
                    items:
                      - id: "550e8400-e29b-41d4-a716-446655440000"
                        subject: "Issues with metal etching design file preparation"
                        status: "open"
                        priority: "medium"
                        category: "Technical Support"
                        created_at: "2025-02-10T08:40:00Z"
                      - id: "123e4567-e89b-12d3-a456-426614174000"
                        subject: "Question about pricing for custom metal plaques"
                        status: "resolved"
                        priority: "low"
                        category: "Sales Inquiry"
                        created_at: "2025-02-11T10:00:00Z"
                    meta:
                      page: 1
                      per_page: 10
                      total: 2
      '400':
        $ref: '../../components/responses.yaml#/ValidationError'
      '401':
        $ref: '../../components/responses.yaml#/Unauthorized'
      '429':
        $ref: '../../components/responses.yaml#/RateLimitExceeded'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

  post:
    tags:
      - Tenant Help Tickets
    summary: Create Help Ticket (Tenant)
    description: |
      Tenant-specific endpoint to create new help tickets with automatic categorization and article suggestions.
      
      Customer Features:
      - Auto-generated ticket numbers
      - Smart article suggestions
      - File attachment support
      - Email notifications
      - Integration with knowledge base
    operationId: tenantCreateHelpTicket
    security:
      - bearerAuth: []
    x-permissions:
      - tenant.doc.help.create
    parameters:
      - $ref: '../../components/parameters.yaml#/TenantHeader'
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../../components/schemas.yaml#/HelpTicketInput'
          examples:
            technical_support:
              summary: Technical support ticket
              value:
                subject: "Issues with metal etching design file preparation"
                description: "I'm having trouble preparing my logo design file for metal etching. The lines appear too thin when I export from Illustrator, and I'm not sure about the correct resolution settings for optimal etching quality."
                priority: "medium"
                category: "Technical Support"
                customer_email: "customer@example.com"
                customer_name: "John Smith"
                tags: ["design", "file-preparation", "technical"]
            general_inquiry:
              summary: General inquiry ticket
              value:
                subject: "Question about pricing for custom metal plaques"
                description: "I'm interested in ordering custom metal plaques for our company awards ceremony. Can you provide information about pricing and turnaround times for different materials?"
                priority: "low"
                category: "Sales Inquiry"
                customer_email: "procurement@company.com"
                customer_name: "Sarah Johnson"
                tags: ["pricing", "inquiry", "plaques"]
    responses:
      '201':
        description: Tenant help ticket created successfully
        content:
          application/json:
            schema:
              $ref: '../../components/schemas.yaml#/HelpTicketResponse'
            examples:
              created:
                summary: Ticket created
                value:
                  success: true
                  data:
                    id: "550e8400-e29b-41d4-a716-446655440000"
                    subject: "Issues with metal etching design file preparation"
                    status: "open"
                    priority: "medium"
                    created_at: "2025-02-15T09:05:00Z"
      '400':
        $ref: '../../components/responses.yaml#/ValidationError'
      '401':
        $ref: '../../components/responses.yaml#/Unauthorized'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

/tenant/help/tickets/{ticketId}:
  get:
    tags:
      - Tenant Help Tickets
    summary: Get Help Ticket (Tenant)
    description: |
      Tenant-specific endpoint to retrieve specific help ticket with full details and suggestions.
    operationId: tenantGetHelpTicket
    security:
      - bearerAuth: []
    x-permissions:
      - tenant.doc.help.read
    parameters:
      - $ref: '../../components/parameters.yaml#/TenantHeader'
      - name: ticketId
        in: path
        required: true
        description: Help ticket UUID
        schema:
          type: string
          format: uuid
        example: "550e8400-e29b-41d4-a716-446655440000"
      - name: include_suggestions
        in: query
        description: Include suggested articles
        schema:
          type: boolean
          default: true
        example: true
    responses:
      '200':
        description: Tenant help ticket retrieved successfully
        content:
          application/json:
            schema:
              $ref: '../../components/schemas.yaml#/HelpTicketResponse'
      '404':
        $ref: '../../components/responses.yaml#/NotFound'
      '401':
        $ref: '../../components/responses.yaml#/Unauthorized'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

  patch:
    tags:
      - Tenant Help Tickets
    summary: Update Help Ticket (Tenant)
    description: |
      Tenant-specific endpoint to update help ticket status, assignment, and resolution details.
    operationId: tenantUpdateHelpTicket
    security:
      - bearerAuth: []
    x-permissions:
      - tenant.doc.help.update
    parameters:
      - $ref: '../../components/parameters.yaml#/TenantHeader'
      - name: ticketId
        in: path
        required: true
        description: Help ticket UUID
        schema:
          type: string
          format: uuid
        example: "550e8400-e29b-41d4-a716-446655440000"
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              status:
                type: string
                enum: [open, in_progress, waiting_customer, resolved, closed]
                example: "resolved"
              priority:
                type: string
                enum: [low, medium, high, urgent]
                example: "medium"
              assigned_to:
                type: string
                format: uuid
                nullable: true
                example: "123e4567-e89b-12d3-a456-426614174000"
              resolution:
                type: string
                nullable: true
                example: "Provided detailed file preparation guide."
    responses:
      '200':
        description: Tenant help ticket updated successfully
        content:
          application/json:
            schema:
              $ref: '../../components/schemas.yaml#/HelpTicketResponse'
      '400':
        $ref: '../../components/responses.yaml#/ValidationError'
      '401':
        $ref: '../../components/responses.yaml#/Unauthorized'
      '403':
        $ref: '../../components/responses.yaml#/Forbidden'
      '404':
        $ref: '../../components/responses.yaml#/NotFound'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

# ================================================================
# TENANT KNOWLEDGE BASE ENDPOINTS
# ================================================================
/tenant/knowledge-base:
  get:
    tags:
      - Tenant Knowledge Base
    summary: List Knowledge Base Entries (Tenant)
    description: |
      Tenant-specific endpoint to retrieve knowledge base entries with filtering and search capabilities.
    operationId: tenantListKnowledgeBase
    security:
      - bearerAuth: []
    x-permissions:
      - tenant.doc.kb.list
    parameters:
      - $ref: '../../components/parameters.yaml#/TenantHeader'
      - $ref: '../../components/parameters.yaml#/PageParam'
      - $ref: '../../components/parameters.yaml#/PerPageParam'
      - $ref: '../../components/parameters.yaml#/SortParam'
      - name: search
        in: query
        description: Search in title and content
        schema:
          type: string
          maxLength: 255
        example: "material properties"
      - name: kb_type
        in: query
        description: Filter by knowledge base type
        schema:
          type: string
          enum: [faq, guide, procedure, specification, troubleshooting]
        example: "specification"
      - name: category
        in: query
        description: Filter by category
        schema:
          type: string
        example: "Materials"
      - name: status
        in: query
        description: Filter by status
        schema:
          type: string
          enum: [draft, published, archived]
        example: "published"
      - name: featured_only
        in: query
        description: Return only featured entries
        schema:
          type: boolean
          default: false
        example: false
      - name: tags
        in: query
        description: Filter by comma-separated tags
        schema:
          type: string
        example: "materials,specifications"
    responses:
      '200':
        description: Tenant knowledge base entries retrieved successfully
        content:
          application/json:
            schema:
              $ref: '../../components/schemas.yaml#/KnowledgeBaseListResponse'
      '400':
        $ref: '../../components/responses.yaml#/ValidationError'
      '401':
        $ref: '../../components/responses.yaml#/Unauthorized'
      '429':
        $ref: '../../components/responses.yaml#/RateLimitExceeded'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

  post:
    tags:
      - Tenant Knowledge Base
    summary: Create Knowledge Base Entry (Tenant)
    description: |
      Tenant-specific endpoint to create new knowledge base entries with rich content and attachments.
    operationId: tenantCreateKnowledgeBase
    security:
      - bearerAuth: []
    x-permissions:
      - tenant.doc.kb.create
    parameters:
      - $ref: '../../components/parameters.yaml#/TenantHeader'
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
              - title
              - content
              - kb_type
              - status
            properties:
              title:
                type: string
                maxLength: 500
                example: "Stainless Steel Etching Specifications"
              slug:
                type: string
                maxLength: 500
                nullable: true
                example: "stainless-steel-etching-specifications"
              content:
                type: string
                example: "## Material Properties\n\n### Grade 304 Stainless Steel\n- Excellent corrosion resistance\n- Suitable for detailed etching\n- Recommended thickness: 0.5-3mm"
              kb_type:
                type: string
                enum: [faq, guide, procedure, specification, troubleshooting]
                example: "specification"
              status:
                type: string
                enum: [draft, published, archived]
                default: "draft"
                example: "published"
              is_featured:
                type: boolean
                default: false
                example: true
              category:
                type: string
                maxLength: 100
                nullable: true
                example: "Materials"
              tags:
                type: array
                items:
                  type: string
                nullable: true
                example: ["stainless-steel", "specifications", "materials"]
    responses:
      '201':
        description: Tenant knowledge base entry created successfully
        content:
          application/json:
            schema:
              $ref: '../../components/schemas.yaml#/KnowledgeBaseResponse'
      '400':
        $ref: '../../components/responses.yaml#/ValidationError'
      '401':
        $ref: '../../components/responses.yaml#/Unauthorized'
      '403':
        $ref: '../../components/responses.yaml#/Forbidden'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

# ================================================================
# TENANT USER GUIDES ENDPOINTS
# ================================================================
/tenant/user-guides:
  get:
    tags:
      - Tenant User Guides
    summary: List User Guides (Tenant)
    description: |
      Tenant-specific endpoint to retrieve interactive user guides with completion tracking.
    operationId: tenantListUserGuides
    security:
      - bearerAuth: []
    x-permissions:
      - tenant.doc.guide.list
    parameters:
      - $ref: '../../components/parameters.yaml#/TenantHeader'
      - $ref: '../../components/parameters.yaml#/PageParam'
      - $ref: '../../components/parameters.yaml#/PerPageParam'
      - $ref: '../../components/parameters.yaml#/SortParam'
      - name: guide_type
        in: query
        description: Filter by guide type
        schema:
          type: string
          enum: [tutorial, walkthrough, checklist, workflow]
        example: "tutorial"
      - name: difficulty_level
        in: query
        description: Filter by difficulty level
        schema:
          type: string
          enum: [easy, medium, hard]
        example: "easy"
      - name: target_audience
        in: query
        description: Filter by target audience
        schema:
          type: string
          enum: [all, customers, vendors, staff]
        example: "customers"
      - name: status
        in: query
        description: Filter by status
        schema:
          type: string
          enum: [draft, published, archived]
        example: "published"
      - name: category
        in: query
        description: Filter by category
        schema:
          type: string
        example: "Order Process"
      - name: interactive_only
        in: query
        description: Return only interactive guides
        schema:
          type: boolean
          default: false
        example: true
    responses:
      '200':
        description: Tenant user guides retrieved successfully
        content:
          application/json:
            schema:
              $ref: '../../components/schemas.yaml#/UserGuidesResponse'
      '400':
        $ref: '../../components/responses.yaml#/ValidationError'
      '401':
        $ref: '../../components/responses.yaml#/Unauthorized'
      '429':
        $ref: '../../components/responses.yaml#/RateLimitExceeded'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

  post:
    tags:
      - Tenant User Guides
    summary: Create User Guide (Tenant)
    description: |
      Tenant-specific endpoint to create new interactive user guides with step-by-step instructions.
    operationId: tenantCreateUserGuide
    security:
      - bearerAuth: []
    x-permissions:
      - tenant.doc.guide.create
    parameters:
      - $ref: '../../components/parameters.yaml#/TenantHeader'
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
              - title
              - guide_type
              - status
              - steps
            properties:
              title:
                type: string
                maxLength: 500
                example: "Complete Order Placement Guide"
              slug:
                type: string
                maxLength: 500
                nullable: true
                example: "complete-order-placement-guide"
              description:
                type: string
                nullable: true
                example: "Step-by-step guide for placing custom etching orders"
              guide_type:
                type: string
                enum: [tutorial, walkthrough, checklist, workflow]
                example: "tutorial"
              status:
                type: string
                enum: [draft, published, archived]
                default: "draft"
                example: "published"
              is_interactive:
                type: boolean
                default: false
                example: true
              steps:
                type: array
                items:
                  type: object
                  properties:
                    step_number:
                      type: integer
                      minimum: 1
                    title:
                      type: string
                      maxLength: 255
                    content:
                      type: string
                example:
                  - step_number: 1
                    title: "Choose Your Product"
                    content: "Select the type of etching product from our catalog"
              category:
                type: string
                maxLength: 100
                nullable: true
                example: "Order Process"
              difficulty_level:
                type: string
                enum: [easy, medium, hard]
                default: "easy"
                example: "easy"
              target_audience:
                type: string
                enum: [all, customers, vendors, staff]
                default: "all"
                example: "customers"
              tags:
                type: array
                items:
                  type: string
                nullable: true
                example: ["orders", "tutorial", "customers"]
    responses:
      '201':
        description: Tenant user guide created successfully
        content:
          application/json:
            schema:
              $ref: '../../components/schemas.yaml#/UserGuideResponse'
      '400':
        $ref: '../../components/responses.yaml#/ValidationError'
      '401':
        $ref: '../../components/responses.yaml#/Unauthorized'
      '403':
        $ref: '../../components/responses.yaml#/Forbidden'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

# ================================================================
# TENANT SEARCH & ANALYTICS ENDPOINTS
# ================================================================
/tenant/documentation/search:
  get:
    tags:
      - Tenant Documentation Search
    summary: Search Documentation Content (Tenant)
    description: |
      Tenant-specific comprehensive search across all documentation content types.
    operationId: tenantSearchDocumentation
    security:
      - bearerAuth: []
    x-permissions:
      - tenant.doc.search
    parameters:
      - $ref: '../../components/parameters.yaml#/TenantHeader'
      - name: q
        in: query
        required: true
        description: Search query
        schema:
          type: string
          maxLength: 255
        example: "metal etching design preparation"
      - name: types
        in: query
        description: Content types to search (comma-separated)
        schema:
          type: string
        example: "article,knowledge_base,user_guide"
      - name: category
        in: query
        description: Limit search to specific category
        schema:
          type: string
        example: "Technical Guides"
      - name: difficulty
        in: query
        description: Filter by difficulty level
        schema:
          type: string
          enum: [beginner, intermediate, advanced, expert]
        example: "beginner"
      - name: limit
        in: query
        description: Maximum number of results
        schema:
          type: integer
          minimum: 1
          maximum: 100
          default: 20
        example: 20
      - name: include_suggestions
        in: query
        description: Include search suggestions
        schema:
          type: boolean
          default: true
        example: true
    responses:
      '200':
        description: Tenant search completed successfully
        content:
          application/json:
            schema:
              $ref: '../../components/schemas.yaml#/DocumentationSearchResponse'
      '400':
        $ref: '../../components/responses.yaml#/ValidationError'
      '401':
        $ref: '../../components/responses.yaml#/Unauthorized'
      '429':
        $ref: '../../components/responses.yaml#/RateLimitExceeded'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

/tenant/documentation/analytics:
  get:
    tags:
      - Tenant Documentation Analytics
    summary: Get Documentation Analytics (Tenant)
    description: |
      Tenant-specific analytics for documentation system performance.
    operationId: tenantGetDocumentationAnalytics
    security:
      - bearerAuth: []
    x-permissions:
      - tenant.doc.analytics
    parameters:
      - $ref: '../../components/parameters.yaml#/TenantHeader'
      - name: period
        in: query
        description: Analytics time period
        schema:
          type: string
          enum: [7d, 30d, 90d, 1y, all]
          default: "30d"
        example: "30d"
      - name: include_detailed
        in: query
        description: Include detailed breakdowns
        schema:
          type: boolean
          default: false
        example: true
    responses:
      '200':
        description: Tenant documentation analytics retrieved successfully
        content:
          application/json:
            schema:
              $ref: '../../components/schemas.yaml#/DocumentationAnalyticsResponse'
      '401':
        $ref: '../../components/responses.yaml#/Unauthorized'
      '403':
        $ref: '../../components/responses.yaml#/Forbidden'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

# ================================================================
# PUBLIC DOCUMENTATION ENDPOINTS (Customer Access)
# ================================================================
/public/documentation/articles:
  get:
    tags:
      - Public Documentation
    summary: Public Documentation Articles
    description: |
      Public access to customer-visible documentation articles.
      
      Public Features:
      - No authentication required for public articles
      - Customer-only articles require auth
      - View tracking and analytics
      - Related content suggestions
      - Search functionality
    operationId: getPublicDocumentationArticles
    security: []
    parameters:
      - $ref: '../../components/parameters.yaml#/TenantHeader'
      - $ref: '../../components/parameters.yaml#/PageParam'
      - $ref: '../../components/parameters.yaml#/PerPageParam'
      - name: category_slug
        in: query
        description: Filter by category slug
        schema:
          type: string
        example: "technical-guides"
      - name: difficulty
        in: query
        description: Filter by difficulty level
        schema:
          type: string
          enum: [beginner, intermediate, advanced, expert]
        example: "beginner"
      - name: search
        in: query
        description: Search in titles and content
        schema:
          type: string
        example: "design preparation"
      - name: featured_only
        in: query
        description: Return only featured articles
        schema:
          type: boolean
          default: false
        example: false
    responses:
      '200':
        description: Public documentation articles retrieved successfully
        content:
          application/json:
            schema:
              $ref: '../../components/schemas.yaml#/DocumentationArticlesResponse'
            examples:
              ok:
                summary: Public articles list
                value:
                  success: true
                  data:
                    items:
                      - id: "550e8400-e29b-41d4-a716-446655440000"
                        title: "Beginner's Guide to Etching"
                        slug: "beginners-guide-etching"
                        visibility: "public"
                        published_at: "2025-02-14T12:00:00Z"
                    meta:
                      page: 1
                      per_page: 10
                      total: 1
      '400':
        $ref: '../../components/responses.yaml#/ValidationError'
      '429':
        $ref: '../../components/responses.yaml#/RateLimitExceeded'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

/public/documentation/articles/{slug}:
  get:
    tags:
      - Public Documentation
    summary: Get Public Documentation Article
    description: |
      Retrieve a specific public documentation article by slug.
    operationId: getPublicDocumentationArticle
    security: []
    parameters:
      - $ref: '../../components/parameters.yaml#/TenantHeader'
      - name: slug
        in: path
        required: true
        description: Article slug
        schema:
          type: string
        example: "how-to-design-custom-etching-files"
    responses:
      '200':
        description: Public documentation article retrieved successfully
        content:
          application/json:
            schema:
              $ref: '../../components/schemas.yaml#/DocumentationArticleResponse'
            examples:
              ok:
                summary: Public article detail
                value:
                  success: true
                  data:
                    id: "550e8400-e29b-41d4-a716-446655440000"
                    title: "How to Design Custom Etching Files"
                    slug: "how-to-design-custom-etching-files"
                    content: "## Overview ..."
                    status: "published"
                    visibility: "public"
                    published_at: "2025-02-12T08:00:00Z"
      '404':
        $ref: '../../components/responses.yaml#/NotFound'
      '429':
        $ref: '../../components/responses.yaml#/RateLimitExceeded'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

/public/help/ticket:
  post:
    tags:
      - Public Help
    summary: Submit Public Help Ticket
    description: |
      Allow public users to submit help tickets without authentication.
      
      Public Features:
      - No authentication required
      - Basic spam protection
      - Auto-categorization
      - Article suggestions
      - Email confirmation
    operationId: submitPublicHelpTicket
    security: []
    parameters:
      - $ref: '../../components/parameters.yaml#/TenantHeader'
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../../components/schemas.yaml#/HelpTicketInput'
          examples:
            public_ticket:
              summary: Public ticket
              value:
                subject: "Issue with download link"
                description: "The download link in the documentation page is not working."
                priority: "low"
                category: "General"
                customer_email: "public@example.com"
                customer_name: "Jane Doe"
    responses:
      '201':
        description: Public help ticket submitted successfully
        content:
          application/json:
            schema:
              allOf:
                - $ref: '../../components/schemas.yaml#/BaseResponse'
                - type: object
                  properties:
                    data:
                      type: object
                      properties:
                        ticket_number:
                          type: string
                          example: "PTCEX-2025-0001"
                        message:
                          type: string
                          example: "Your support ticket has been created. We will respond via email within 24 hours."
                        suggested_articles:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: string
                                format: uuid
                              title:
                                type: string
                              slug:
                                type: string
                              excerpt:
                                type: string
            examples:
              created:
                summary: Public ticket created
                value:
                  success: true
                  data:
                    ticket_number: "PTCEX-2025-0001"
                    message: "Your support ticket has been created. We will respond via email within 24 hours."
                    suggested_articles:
                      - id: "987fcdeb-51a2-43d1-9f4b-123456789abc"
                        title: "How to prepare your design files"
                        slug: "prepare-design-files"
                        excerpt: "Learn how to prepare your files for best results"
      '400':
        $ref: '../../components/responses.yaml#/ValidationError'
      '429':
        $ref: '../../components/responses.yaml#/RateLimitExceeded'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'