openapi: 3.1.0
info:
  title: Stencil CMS API - Comprehensive Multi-Tenant Platform
  version: 1.0.0
  description: |
    # Stencil CMS - Enterprise Multi-Tenant Content Management System
    
    ## Overview
    
    Complete OpenAPI 3.1+ specification for Stencil CMS covering **1,800+ fields** across **22 modules** 
    with comprehensive CRUD operations, multi-tenant architecture, and JWT authentication.
    
    ## Architecture Features
    
    - **üè¢ Multi-Tenancy**: Complete tenant isolation with `tenant_id` in all entities
    - **üîê JWT Authentication**: Bearer token authentication with role-based access control
    - **üõ°Ô∏è Security**: Comprehensive RBAC with tenant-scoped permissions
    - **üìä Performance**: Optimized queries with pagination and filtering
    - **üîç Search**: Full-text search across all content types
    - **üìà Analytics**: Built-in analytics and reporting capabilities
    
    ## Module Groups
    
    ### üé® Content Management (5 modules)
    - **‚úÖ Homepage**: Advanced page builder with 240+ fields, 23 tables **(IMPLEMENTED)**
    - **‚úÖ About Us**: Company profiles with 80+ fields, 10 tables **(IMPLEMENTED)**
    - **‚ùå Contact**: Dynamic forms with 150+ fields, 7 tables *(PENDING)*
    - **‚ùå FAQ**: Knowledge base with 150+ fields, 5 tables *(PENDING)*
    - **‚ùå SEO**: Universal SEO system with 20+ fields, 3 tables *(PENDING)*
    
    ### üõí E-Commerce (4 modules)  
    - **‚ùå Products**: Product catalog with 68+ fields, 4 tables *(PENDING)*
    - **‚ùå Reviews**: Rating system with 65+ fields, 5 tables *(PENDING)*
    - **‚úÖ Orders**: Complete workflow with 164+ fields, 7 tables **(IMPLEMENTED)**
    - **‚ùå Inventory**: Stock management with 180+ fields, 8+ tables *(PENDING)*
    
    ### üë• User Management (4 modules)
    - **Users**: RBAC system with 180+ fields, 9 tables
    - **Customers**: Customer lifecycle with 120+ fields, 6+ tables
    - **Vendors**: Vendor management with 97+ fields, 6 tables
    - **Suppliers**: Supply chain with 180+ fields, 8+ tables
    
    ### ‚öôÔ∏è System Administration (3 modules)
    - **Financial**: Revenue tracking with 120+ fields, 6+ tables
    - **Settings**: System config with 85+ fields, 5+ tables
    - **Plugins**: Extension system with variable fields
    
    ### üìÅ Assets & Localization (4 modules)
    - **Media**: File management with 80+ fields, 4+ tables
    - **Documentation**: Help center with 65+ fields, 4+ tables
    - **Theme**: Dynamic theming with 165+ fields, 7+ tables  
    - **Language**: i18n support with 45+ fields, 3+ tables
    
    ## Authentication & Security
    
    All admin endpoints require Bearer token authentication:
    ```
    Authorization: Bearer {jwt_token}
    X-Tenant-ID: {tenant_uuid}
    ```
    
    ## Response Format
    
    **Success Response:**
    ```json
    {
      "success": true,
      "data": { "...": "response data" },
      "message": "Operation completed successfully",
      "meta": {
        "timestamp": "2025-11-12T13:00:00Z",
        "tenant_id": "550e8400-e29b-41d4-a716-446655440000",
        "request_id": "req_123456789"
      }
    }
    ```
    
    **Error Response:**
    ```json
    {
      "success": false,
      "error": {
        "code": "VALIDATION_ERROR",
        "message": "Validation failed",
        "details": { "field": ["error messages"] }
      },
      "meta": {
        "timestamp": "2025-11-12T13:00:00Z",
        "tenant_id": "550e8400-e29b-41d4-a716-446655440000",
        "request_id": "req_123456789"
      }
    }
    ```
    
    ## Rate Limiting
    
    - **Public endpoints**: 60 requests per minute per IP
    - **Authenticated endpoints**: 120 requests per minute per user
    - **Admin endpoints**: 200 requests per minute per admin user
    
    ## Pagination
    
    All list endpoints support pagination:
    - `page`: Page number (default: 1)
    - `per_page`: Items per page (default: 15, max: 100)
    - `sort`: Sort field (default: created_at)  
    - `order`: Sort direction (asc/desc, default: desc)
    
    ## Search & Filtering
    
    Most endpoints support advanced filtering:
    - `search`: Full-text search query
    - `filter[field]`: Field-specific filters
    - `date_from` / `date_to`: Date range filtering
    - `status`: Status filtering where applicable
    
    ---
    
    **üö® Implementation Status:** Phase 1 - Foundation Setup Complete  
    **üìä Coverage:** 1,800+ fields converted to OpenAPI schemas  
    **üîê Security:** Multi-tenant isolation with JWT authentication  
    **üìà Business Impact:** Complete API standardization for enterprise CMS platform

  contact:
    name: CanvaStack Development Team
    url: https://canvastack.com
    email: dev@canvastack.com
  license:
    name: MIT License
    url: https://opensource.org/licenses/MIT
  termsOfService: https://canvastack.com/terms

servers:
  - url: https://api.stencil.local/v1
    description: Local development server
  - url: https://api-staging.stencil.canvastack.com/v1  
    description: Staging environment
  - url: https://api.stencil.canvastack.com/v1
    description: Production environment

# Security Schemes
security:
  - bearerAuth: []
  - tenantHeader: []

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: |
        JWT Bearer token authentication. 
        
        **Format:** `Authorization: Bearer {jwt_token}`
        
        **Token Structure:**
        ```json
        {
          "user_id": "uuid",
          "tenant_id": "uuid", 
          "roles": ["admin", "editor"],
          "permissions": ["users.create", "content.edit"],
          "exp": 1640995200
        }
        ```
    
    tenantHeader:
      type: apiKey
      in: header
      name: X-Tenant-ID
      description: |
        Tenant UUID header for multi-tenant isolation.
        
        **Format:** `X-Tenant-ID: 550e8400-e29b-41d4-a716-446655440000`
        
        **Required for all authenticated endpoints.**

  # External Component References  
  responses:
    Conflict:
      $ref: './components/responses.yaml#/Conflict'
    CreatedResponse:
      $ref: './components/responses.yaml#/CreatedResponse'
    DeletedResponse:
      $ref: './components/responses.yaml#/DeletedResponse'
    Forbidden:
      $ref: './components/responses.yaml#/Forbidden'
    NotFound:
      $ref: './components/responses.yaml#/NotFound'
    RateLimitExceeded:
      $ref: './components/responses.yaml#/RateLimitExceeded'
    ServerError:
      $ref: './components/responses.yaml#/ServerError'
    SuccessResponse:
      $ref: './components/responses.yaml#/SuccessResponse'
    Unauthorized:
      $ref: './components/responses.yaml#/Unauthorized'
    UpdatedResponse:
      $ref: './components/responses.yaml#/UpdatedResponse'
    ValidationError:
      $ref: './components/responses.yaml#/ValidationError'
  parameters:
    AcceptLanguage:
      $ref: './components/parameters.yaml#/AcceptLanguage'
    AuthorParam:
      $ref: './components/parameters.yaml#/AuthorParam'
    BulkIdsParam:
      $ref: './components/parameters.yaml#/BulkIdsParam'
    CacheControlParam:
      $ref: './components/parameters.yaml#/CacheControlParam'
    CategoryParam:
      $ref: './components/parameters.yaml#/CategoryParam'
    CompareVersionParam:
      $ref: './components/parameters.yaml#/CompareVersionParam'
    ContentTypeParam:
      $ref: './components/parameters.yaml#/ContentTypeParam'
    DateFromParam:
      $ref: './components/parameters.yaml#/DateFromParam'
    DateToParam:
      $ref: './components/parameters.yaml#/DateToParam'
    DryRunParam:
      $ref: './components/parameters.yaml#/DryRunParam'
    ETagParam:
      $ref: './components/parameters.yaml#/ETagParam'
    ExportFormatParam:
      $ref: './components/parameters.yaml#/ExportFormatParam'
    FallbackLocaleParam:
      $ref: './components/parameters.yaml#/FallbackLocaleParam'
    FeaturesParam:
      $ref: './components/parameters.yaml#/FeaturesParam'
    FieldsParam:
      $ref: './components/parameters.yaml#/FieldsParam'
    FileTypeParam:
      $ref: './components/parameters.yaml#/FileTypeParam'
    FilterParam:
      $ref: './components/parameters.yaml#/FilterParam'
    IncludeParam:
      $ref: './components/parameters.yaml#/IncludeParam'
    LocaleParam:
      $ref: './components/parameters.yaml#/LocaleParam'
    MaxFileSizeParam:
      $ref: './components/parameters.yaml#/MaxFileSizeParam'
    MetricParam:
      $ref: './components/parameters.yaml#/MetricParam'
    OrderParam:
      $ref: './components/parameters.yaml#/OrderParam'
    PageParam:
      $ref: './components/parameters.yaml#/PageParam'
    PerPageParam:
      $ref: './components/parameters.yaml#/PerPageParam'
    PeriodParam:
      $ref: './components/parameters.yaml#/PeriodParam'
    PublishStatusParam:
      $ref: './components/parameters.yaml#/PublishStatusParam'
    RateLimitParam:
      $ref: './components/parameters.yaml#/RateLimitParam'
    SearchParam:
      $ref: './components/parameters.yaml#/SearchParam'
    SortParam:
      $ref: './components/parameters.yaml#/SortParam'
    StatusParam:
      $ref: './components/parameters.yaml#/StatusParam'
    TagsParam:
      $ref: './components/parameters.yaml#/TagsParam'
    TemplateParam:
      $ref: './components/parameters.yaml#/TemplateParam'
    TenantHeader:
      $ref: './components/parameters.yaml#/TenantHeader'
    TenantParam:
      $ref: './components/parameters.yaml#/TenantParam'
    UUIDParam:
      $ref: './components/parameters.yaml#/UUIDParam'
    ValidateOnlyParam:
      $ref: './components/parameters.yaml#/ValidateOnlyParam'
    VersionParam:
      $ref: './components/parameters.yaml#/VersionParam'
    
  # Schema Definitions (mix of external and inline)
  schemas:
    # External component schemas
    AuditInfo:
      allOf:
        - $ref: './components/schemas.yaml#/AuditInfo'
    BaseResponse:
      allOf:
        - $ref: './components/schemas.yaml#/BaseResponse'
    BaseTranslation:
      allOf:
        - $ref: './components/schemas.yaml#/BaseTranslation'
    ErrorResponse:
      allOf:
        - $ref: './components/schemas.yaml#/ErrorResponse'
    PaginatedResponse:
      allOf:
        - $ref: './components/schemas.yaml#/PaginatedResponse'
    PaginationMeta:
      allOf:
        - $ref: './components/schemas.yaml#/PaginationMeta'
    SuccessResponse:
      allOf:
        - $ref: './components/schemas.yaml#/SuccessResponse'
    TenantInfo:
      allOf:
        - $ref: './components/schemas.yaml#/TenantInfo'
    TranslationStatus:
      allOf:
        - $ref: './components/schemas.yaml#/TranslationStatus'
    ValidationErrorResponse:
      allOf:
        - $ref: './components/schemas.yaml#/ValidationErrorResponse'

    # Content Management Schemas
    # About schemas will be added here
    # Contact schemas will be added here
    # Customers schemas will be added here
    # Documentation schemas will be added here
    # Faq schemas will be added here
    # Financial schemas will be added here
    # Homepage schemas will be added here
    # Inventory schemas will be added here
    # Language schemas will be added here
    # Media schemas will be added here
    # Orders schemas will be added here
    # Plugins schemas will be added here
    # Products schemas will be added here
    # Reviews schemas will be added here
    # Seo schemas will be added here
    # Settings schemas will be added here
    # Suppliers schemas will be added here
    # Theme schemas will be added here
    # Users schemas will be added here
    # Vendors schemas will be added here
    
    # Inline Schema Definitions (legacy compatibility)
    # Base Entity Schema
    BaseEntity:
      type: object
      required:
        - id
        - tenant_id
        - created_at
        - updated_at
      properties:
        id:
          type: string
          format: uuid
          description: Unique identifier (UUID v4)
          example: "550e8400-e29b-41d4-a716-446655440000"
        tenant_id:
          type: string
          format: uuid
          description: Tenant isolation identifier
          example: "6ba7b810-9dad-11d1-80b4-00c04fd430c8"
        created_at:
          type: string
          format: date-time
          description: Creation timestamp (ISO 8601)
          example: "2025-11-12T13:00:00Z"
        updated_at:
          type: string
          format: date-time  
          description: Last modification timestamp (ISO 8601)
          example: "2025-11-12T13:30:00Z"
        deleted_at:
          type: [string, "null"]
          format: date-time
          description: Soft deletion timestamp (ISO 8601)
          example: null

    # Additional inline schemas removed - using external references only

# Main API Paths (will be extended with specific modules)
paths:
  # ===== CONTENT MANAGEMENT ENDPOINTS =====
  
  # About Us Module - Complete implementation
  /api/v1/about/hero:
    $ref: './paths/content-management/about.yaml#/~1about~1hero'
  /api/v1/about/hero/{id}:
    $ref: './paths/content-management/about.yaml#/~1about~1hero~1{id}'
  /api/v1/about/company:
    $ref: './paths/content-management/about.yaml#/~1about~1company'
  /api/v1/about/company/{id}:
    $ref: './paths/content-management/about.yaml#/~1about~1company~1{id}'
  /api/v1/about/mission-vision:
    $ref: './paths/content-management/about.yaml#/~1about~1mission-vision'
  /api/v1/about/mission-vision/{id}:
    $ref: './paths/content-management/about.yaml#/~1about~1mission-vision~1{id}'
  /api/v1/about/team:
    $ref: './paths/content-management/about.yaml#/~1about~1team'
  /api/v1/about/team/{id}:
    $ref: './paths/content-management/about.yaml#/~1about~1team~1{id}'
  /api/v1/about/timeline:
    $ref: './paths/content-management/about.yaml#/~1about~1timeline'
  /api/v1/about/timeline/{id}:
    $ref: './paths/content-management/about.yaml#/~1about~1timeline~1{id}'
  /api/v1/about/certifications:
    $ref: './paths/content-management/about.yaml#/~1about~1certifications'
  /api/v1/about/certifications/{id}:
    $ref: './paths/content-management/about.yaml#/~1about~1certifications~1{id}'
  /api/v1/about/complete:
    $ref: './paths/content-management/about.yaml#/~1about~1complete'
  /api/v1/about/bulk:
    $ref: './paths/content-management/about.yaml#/~1about~1bulk'
  
  # ===== E-COMMERCE ENDPOINTS =====
  
  # Orders Module - Complete implementation
  /api/v1/orders:
    $ref: './paths/content-management/orders.yaml#/~1orders'
  /api/v1/orders/{order_code}/status:
    $ref: './paths/content-management/orders.yaml#/~1orders~1{order_code}~1status'
  /api/v1/admin/orders:
    $ref: './paths/content-management/orders.yaml#/~1admin~1orders'
  /api/v1/admin/orders/{id}:
    $ref: './paths/content-management/orders.yaml#/~1admin~1orders~1{id}'
  /api/v1/admin/orders/{id}/assign-vendor:
    $ref: './paths/content-management/orders.yaml#/~1admin~1orders~1{id}~1assign-vendor'
  /api/v1/admin/orders/{id}/status:
    $ref: './paths/content-management/orders.yaml#/~1admin~1orders~1{id}~1status'
  /api/v1/admin/orders/{id}/quotations:
    $ref: './paths/content-management/orders.yaml#/~1admin~1orders~1{id}~1quotations'
  /api/v1/admin/orders/{id}/quotations/{quotation_id}:
    $ref: './paths/content-management/orders.yaml#/~1admin~1orders~1{id}~1quotations~1{quotation_id}'
  /api/v1/admin/orders/{id}/quotations/{quotation_id}/approve:
    $ref: './paths/content-management/orders.yaml#/~1admin~1orders~1{id}~1quotations~1{quotation_id}~1approve'
  /api/v1/admin/orders/{id}/negotiations:
    $ref: './paths/content-management/orders.yaml#/~1admin~1orders~1{id}~1negotiations'
  /api/v1/admin/orders/{id}/payments:
    $ref: './paths/content-management/orders.yaml#/~1admin~1orders~1{id}~1payments'
  /api/v1/admin/orders/{id}/payments/{payment_id}/verify:
    $ref: './paths/content-management/orders.yaml#/~1admin~1orders~1{id}~1payments~1{payment_id}~1verify'
  /api/v1/admin/orders/{id}/shipments:
    $ref: './paths/content-management/orders.yaml#/~1admin~1orders~1{id}~1shipments'
  /api/v1/admin/orders/{id}/profitability:
    $ref: './paths/content-management/orders.yaml#/~1admin~1orders~1{id}~1profitability'
  /api/v1/admin/orders/analytics/dashboard:
    $ref: './paths/content-management/orders.yaml#/~1admin~1orders~1analytics~1dashboard'
  /api/v1/admin/orders/bulk/update-status:
    $ref: './paths/content-management/orders.yaml#/~1admin~1orders~1bulk~1update-status'
  /api/v1/admin/orders/export:
    $ref: './paths/content-management/orders.yaml#/~1admin~1orders~1export'
  
  # Products Module - Complete implementation
  /api/v1/products:
    $ref: './paths/content-management/products.yaml#/~1products'
  /api/v1/products/{slug}:
    $ref: './paths/content-management/products.yaml#/~1products~1{slug}'
  /api/v1/products/categories:
    $ref: './paths/content-management/products.yaml#/~1products~1categories'
  /api/v1/admin/products:
    $ref: './paths/content-management/products.yaml#/~1admin~1products'
  /api/v1/admin/products/{id}:
    $ref: './paths/content-management/products.yaml#/~1admin~1products~1{id}'
  /api/v1/admin/products/{id}/restore:
    $ref: './paths/content-management/products.yaml#/~1admin~1products~1{id}~1restore'
  /api/v1/admin/products/bulk:
    $ref: './paths/content-management/products.yaml#/~1admin~1products~1bulk'
  /api/v1/admin/products/categories:
    $ref: './paths/content-management/products.yaml#/~1admin~1products~1categories'
  /api/v1/admin/products/categories/{id}:
    $ref: './paths/content-management/products.yaml#/~1admin~1products~1categories~1{id}'
  /api/v1/admin/products/analytics/dashboard:
    $ref: './paths/content-management/products.yaml#/~1admin~1products~1analytics~1dashboard'
  /api/v1/admin/products/analytics/export:
    $ref: './paths/content-management/products.yaml#/~1admin~1products~1analytics~1export'
  /api/v1/admin/products/{id}/vendor-pricing:
    $ref: './paths/content-management/products.yaml#/~1admin~1products~1{id}~1vendor-pricing'
  /api/v1/admin/products/{id}/stock:
    $ref: './paths/content-management/products.yaml#/~1admin~1products~1{id}~1stock'
  /api/v1/admin/products/quotation-eligible:
    $ref: './paths/content-management/products.yaml#/~1admin~1products~1quotation-eligible'
  
  # Tenant Inventory Management
  /api/v1/tenant/inventory/items:
    $ref: './paths/content-management/inventory.yaml#/~1tenant~1inventory~1items'
  /api/v1/tenant/inventory/items/{item}:
    $ref: './paths/content-management/inventory.yaml#/~1tenant~1inventory~1items~1{item}'
  /api/v1/tenant/inventory/locations:
    $ref: './paths/content-management/inventory.yaml#/~1tenant~1inventory~1locations'
  /api/v1/tenant/inventory/locations/{location}:
    $ref: './paths/content-management/inventory.yaml#/~1tenant~1inventory~1locations~1{location}'
  /api/v1/tenant/inventory/items/{product}/locations/{location}/stock:
    $ref: './paths/content-management/inventory.yaml#/~1tenant~1inventory~1items~1{product}~1locations~1{location}~1stock'
  /api/v1/tenant/inventory/items/{product}/locations/{location}/adjust:
    $ref: './paths/content-management/inventory.yaml#/~1tenant~1inventory~1items~1{product}~1locations~1{location}~1adjust'
  /api/v1/tenant/inventory/items/{product}/transfer:
    $ref: './paths/content-management/inventory.yaml#/~1tenant~1inventory~1items~1{product}~1transfer'
  /api/v1/tenant/inventory/items/{product}/reserve:
    $ref: './paths/content-management/inventory.yaml#/~1tenant~1inventory~1items~1{product}~1reserve'
  /api/v1/tenant/inventory/reservations:
    $ref: './paths/content-management/inventory.yaml#/~1tenant~1inventory~1reservations'
  /api/v1/tenant/inventory/reservations/{reservation}/release:
    $ref: './paths/content-management/inventory.yaml#/~1tenant~1inventory~1reservations~1{reservation}~1release'
  /api/v1/tenant/inventory/reconciliations:
    $ref: './paths/content-management/inventory.yaml#/~1tenant~1inventory~1reconciliations'
  /api/v1/tenant/inventory/reconciliations/run:
    $ref: './paths/content-management/inventory.yaml#/~1tenant~1inventory~1reconciliations~1run'
  
  /api/v1/tenant/customers/search:
    $ref: './paths/content-management/customers.yaml#/~1tenant~1customers~1search'

  /api/v1/tenant/customers/export:
    $ref: './paths/content-management/customers.yaml#/~1tenant~1customers~1export'

  /api/v1/tenant/vendors/search:
    $ref: './paths/content-management/vendors.yaml#/~1tenant~1vendors~1search'

  /api/v1/tenant/vendors/export:
    $ref: './paths/content-management/vendors.yaml#/~1tenant~1vendors~1export'

  /api/v1/tenant/products/search:
    get:
      summary: "Search tenant products"
      tags:
        - Tenant Products
      parameters:
        - name: query
          in: query
          schema:
            type: string
        - name: category_id
          in: query
          schema:
            type: integer
        - name: status
          in: query
          schema:
            type: string
        - name: tag
          in: query
          schema:
            type: string
        - name: include_inventory
          in: query
          schema:
            type: boolean
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
      responses:
        '200':
          description: Hasil pencarian produk
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                  meta:
                    type: object
        '422':
          $ref: './components/responses.yaml#/ValidationError'
        '500':
          $ref: './components/responses.yaml#/ServerError'

  /api/v1/tenant/products/categories:
    get:
      summary: "Daftar kategori produk tenant"
      tags:
        - Tenant Products
      parameters:
        - name: active_only
          in: query
          schema:
            type: boolean
        - name: featured_only
          in: query
          schema:
            type: boolean
        - name: parent_id
          in: query
          schema:
            type: integer
        - name: include_children
          in: query
          schema:
            type: boolean
      responses:
        '200':
          description: Daftar kategori produk
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                  meta:
                    type: object
        '500':
          $ref: './components/responses.yaml#/ServerError'

  /api/v1/tenant/products/tags:
    get:
      summary: "Daftar tag produk tenant"
      tags:
        - Tenant Products
      parameters:
        - name: query
          in: query
          schema:
            type: string
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
      responses:
        '200':
          description: Daftar tag produk
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                  meta:
                    type: object
        '500':
          $ref: './components/responses.yaml#/ServerError'

  /api/v1/tenant/analytics/customers/segmentation:
    get:
      summary: "Analitik segmentasi pelanggan"
      tags:
        - Tenant Analytics
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
      responses:
        '200':
          description: Ringkasan segmentasi pelanggan
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      distribution:
                        type: object
                      topCustomers:
                        type: array
                        items:
                          type: object
                      atRiskCustomers:
                        type: array
                        items:
                          type: object
                  meta:
                    type: object
        '500':
          $ref: './components/responses.yaml#/ServerError'

  /api/v1/tenant/analytics/vendors:
    get:
      summary: "Analitik performa vendor"
      tags:
        - Tenant Analytics
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 50
        - name: underperforming_threshold
          in: query
          schema:
            type: number
            format: float
      responses:
        '200':
          description: Ringkasan performa vendor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      summary:
                        type: object
                      topPerformers:
                        type: array
                        items:
                          type: object
                      underperformingVendors:
                        type: array
                        items:
                          type: object
                      slaSnapshot:
                        type: array
                        items:
                          type: object
                  meta:
                    type: object
        '500':
          $ref: './components/responses.yaml#/ServerError'
  
  # ===== THEME MANAGEMENT ENDPOINTS =====
  
  # Theme Marketplace
  /api/v1/themes:
    $ref: './paths/content-management/theme.yaml#/~1themes'
  /api/v1/themes/{themeId}:
    $ref: './paths/content-management/theme.yaml#/~1themes~1{themeId}'
  /api/v1/themes/{themeId}/purchase:
    $ref: './paths/content-management/theme.yaml#/~1themes~1{themeId}~1purchase'
  /api/v1/themes/{themeId}/validate:
    $ref: './paths/content-management/theme.yaml#/~1themes~1{themeId}~1validate'
  /api/v1/themes/{themeId}/validation-results:
    $ref: './paths/content-management/theme.yaml#/~1themes~1{themeId}~1validation-results'
  /api/v1/themes/{themeId}/versions:
    $ref: './paths/content-management/theme.yaml#/~1themes~1{themeId}~1versions'
  
  # Theme Installation
  /api/v1/tenant/themes:
    $ref: './paths/content-management/theme.yaml#/~1tenant~1themes'
  /api/v1/tenant/themes/{installationId}:
    $ref: './paths/content-management/theme.yaml#/~1tenant~1themes~1{installationId}'
  /api/v1/tenant/themes/{installationId}/activate:
    $ref: './paths/content-management/theme.yaml#/~1tenant~1themes~1{installationId}~1activate'
  /api/v1/tenant/themes/{installationId}/deactivate:
    $ref: './paths/content-management/theme.yaml#/~1tenant~1themes~1{installationId}~1deactivate'
  /api/v1/tenant/themes/{installationId}/settings:
    $ref: './paths/content-management/theme.yaml#/~1tenant~1themes~1{installationId}~1settings'
  /api/v1/tenant/themes/{installationId}/settings/reset:
    $ref: './paths/content-management/theme.yaml#/~1tenant~1themes~1{installationId}~1settings~1reset'
  
  # Theme Purchases
  /api/v1/tenant/theme-purchases:
    $ref: './paths/content-management/theme.yaml#/~1tenant~1theme-purchases'
  
  # Theme Administration
  /api/v1/admin/themes/marketplace:
    $ref: './paths/content-management/theme.yaml#/~1admin~1themes~1marketplace'
  /api/v1/admin/themes/marketplace/{listingId}/approve:
    $ref: './paths/content-management/theme.yaml#/~1admin~1themes~1marketplace~1{listingId}~1approve'
  /api/v1/admin/themes/marketplace/{listingId}/reject:
    $ref: './paths/content-management/theme.yaml#/~1admin~1themes~1marketplace~1{listingId}~1reject'
  
  # ===== PLATFORM LICENSING ENDPOINTS =====
  
  # Platform License Management
  /api/v1/platform/licenses:
    $ref: './paths/platform/platform-licensing.yaml#/~1platform~1licenses'
  /api/v1/platform/licenses/{license_id}:
    $ref: './paths/platform/platform-licensing.yaml#/~1platform~1licenses~1{license_id}'
  /api/v1/platform/licenses/bulk:
    $ref: './paths/platform/platform-licensing.yaml#/~1platform~1licenses~1bulk'
  
  # Tenant Service Licensing
  /api/v1/platform/tenants/{tenant_id}/service-license:
    $ref: './paths/platform/platform-licensing.yaml#/~1platform~1tenants~1{tenant_id}~1service-license'
  /api/v1/platform/tenants/{tenant_id}/usage:
    $ref: './paths/platform/platform-licensing.yaml#/~1platform~1tenants~1{tenant_id}~1usage'
  /api/v1/platform/service-licenses/bulk:
    $ref: './paths/platform/platform-licensing.yaml#/~1platform~1service-licenses~1bulk'
  
  # License Validation
  /api/v1/auth/validate-platform-license:
    $ref: './paths/platform/platform-licensing.yaml#/~1auth~1validate-platform-license'
  /api/v1/platform/validation-history:
    $ref: './paths/platform/platform-licensing.yaml#/~1platform~1validation-history'
  
  # Platform Licensing Reports
  /api/v1/platform/licensing/reports/summary:
    $ref: './paths/platform/platform-licensing.yaml#/~1platform~1licensing~1reports~1summary'
  
  # Health Check Endpoint
  /health:
    get:
      tags:
        - System
      summary: API Health Check
      description: Check API server health and status
      security: []
      responses:
        '200':
          description: API is healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "ok"
                  timestamp:
                    type: string
                    format: date-time
                    example: "2025-11-12T13:00:00Z"
                  version:
                    type: string
                    example: "1.0.0"
                  database:
                    type: string
                    example: "connected"

  # Authentication Endpoints  
  /auth/login:
    post:
      tags:
        - Authentication
      summary: User Login
      description: Authenticate user and receive JWT token
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
                - tenant_id
              properties:
                email:
                  type: string
                  format: email
                  description: User email address
                  example: "admin@stencil.com"
                password:
                  type: string
                  format: password
                  description: User password
                  example: "password123"
                tenant_id:
                  type: string
                  format: uuid
                  description: Tenant UUID
                  example: "6ba7b810-9dad-11d1-80b4-00c04fd430c8"
                remember_me:
                  type: boolean
                  default: false
                  description: Extended token expiration
      responses:
        '200':
          description: Login successful
          content:
            application/json:
              schema:
                allOf:
                  - $ref: './components/schemas.yaml#/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          access_token:
                            type: string
                            description: JWT access token
                            example: "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
                          token_type:
                            type: string
                            example: "Bearer"
                          expires_in:
                            type: integer
                            description: Token expiration in seconds
                            example: 3600
                          user:
                            type: object
                            properties:
                              id:
                                type: string
                                format: uuid
                              name:
                                type: string
                              email:
                                type: string
                                format: email
                              roles:
                                type: array
                                items:
                                  type: string
        '401':
          description: Invalid credentials
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /auth/logout:
    post:
      tags:
        - Authentication  
      summary: User Logout
      description: Invalidate current JWT token
      responses:
        '200':
          description: Logout successful
          content:
            application/json:
              schema:
                $ref: './components/schemas.yaml#/SuccessResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

# Tags for API Organization
tags:
  - name: System
    description: System health and status endpoints
  - name: Authentication
    description: User authentication and session management
  - name: Content Management
    description: Homepage, About, Contact, FAQ, and SEO management
  - name: E-Commerce
    description: Products, Reviews, Orders, and Inventory management
  - name: User Management
    description: Users, Customers, Vendors, and Suppliers management
  - name: System Administration
    description: Financial, Settings, and Plugin management
  - name: Assets & Localization
    description: Media, Documentation, Theme, and Language management
  - name: Theme Marketplace
    description: Browse, search, and purchase themes from the marketplace
  - name: Theme Installation
    description: Install, activate, and manage themes for tenants
  - name: Theme Customization
    description: Customize theme settings, colors, and layouts
  - name: Theme Management
    description: Create, update, and manage theme metadata (admin)
  - name: Theme Marketplace Management
    description: Admin interface for marketplace submissions and approvals
  - name: Theme Validation
    description: Security scanning and compatibility validation
  - name: Theme Versions
    description: Version management and changelog tracking
  - name: Theme Purchases
    description: Purchase transactions and license management