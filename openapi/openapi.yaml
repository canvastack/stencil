openapi: 3.1.0
info:
  title: Stencil CMS API - Comprehensive Multi-Tenant Platform
  version: 1.0.0
  description: |
    # Stencil CMS - Enterprise Multi-Tenant Content Management System
    
    ## Overview
    
    Complete OpenAPI 3.1+ specification for Stencil CMS covering **1,800+ fields** across **22 modules** 
    with comprehensive CRUD operations, multi-tenant architecture, and JWT authentication.
    
    ## Architecture Features
    
    - **üè¢ Multi-Tenancy**: Complete tenant isolation via **schema-per-tenant** architecture (PostgreSQL)
    - **üèóÔ∏è Hexagonal Architecture**: Domain-driven design with Use Cases, Command/Query handlers, and Application Services
    - **üîê JWT Authentication**: Bearer token authentication with role-based access control  
    - **üõ°Ô∏è Security**: Comprehensive RBAC with tenant-scoped permissions and domain verification
    - **üìä Performance**: Optimized queries with pagination, caching, and CDN integration
    - **üîç Search**: Full-text search across all content types with advanced filtering
    - **üìà Analytics**: Built-in analytics and reporting capabilities with business intelligence
    - **üåê Custom Domains**: Secure domain verification, SSL automation, and CDN management
    
    ## Module Groups
    
    ### üé® Content Management (5 modules)
    - **‚úÖ Homepage**: Advanced page builder with 240+ fields, 23 tables **(IMPLEMENTED)**
    - **‚úÖ About Us**: Company profiles with 80+ fields, 10 tables **(IMPLEMENTED)**
    - **‚ùå Contact**: Dynamic forms with 150+ fields, 7 tables *(PENDING)*
    - **‚ùå FAQ**: Knowledge base with 150+ fields, 5 tables *(PENDING)*
    - **‚ùå SEO**: Universal SEO system with 20+ fields, 3 tables *(PENDING)*
    
    ### üõí E-Commerce (4 modules)  
    - **‚ùå Products**: Product catalog with 68+ fields, 4 tables *(PENDING)*
    - **‚ùå Reviews**: Rating system with 65+ fields, 5 tables *(PENDING)*
    - **‚úÖ Orders**: Complete workflow with 164+ fields, 7 tables **(IMPLEMENTED)**
    - **‚ùå Inventory**: Stock management with 180+ fields, 8+ tables *(PENDING)*
    
    ### üë• User Management (4 modules)
    - **Users**: RBAC system with 180+ fields, 9 tables
    - **Customers**: Customer lifecycle with 120+ fields, 6+ tables
    - **Vendors**: Vendor management with 97+ fields, 6 tables
    - **Suppliers**: Supply chain with 180+ fields, 8+ tables
    
    ### ‚öôÔ∏è System Administration (3 modules)
    - **Financial**: Revenue tracking with 120+ fields, 6+ tables
    - **Settings**: System config with 85+ fields, 5+ tables
    - **Plugins**: Extension system with variable fields
    
    ### üìÅ Assets & Localization (4 modules)
    - **Media**: File management with 80+ fields, 4+ tables
    - **Documentation**: Help center with 65+ fields, 4+ tables
    - **Theme**: Dynamic theming with 165+ fields, 7+ tables  
    - **Language**: i18n support with 45+ fields, 3+ tables
    
    ## Authentication & Security
    
    All admin endpoints require Bearer token authentication:
    ```
    Authorization: Bearer {jwt_token}
    X-Tenant-ID: {tenant_uuid}
    ```
    
    ## Response Format
    
    **Success Response:**
    ```json
    {
      "success": true,
      "data": { "...": "response data" },
      "message": "Operation completed successfully",
      "meta": {
        "timestamp": "2025-11-12T13:00:00Z",
        "tenant_context": "tenant_550e8400-e29b-41d4-a716-446655440000",
        "request_id": "req_123456789"
      }
    }
    ```
    
    **Error Response:**
    ```json
    {
      "success": false,
      "error": {
        "code": "VALIDATION_ERROR",
        "message": "Validation failed",
        "details": { "field": ["error messages"] }
      },
      "meta": {
        "timestamp": "2025-11-12T13:00:00Z",
        "tenant_context": "tenant_550e8400-e29b-41d4-a716-446655440000",
        "request_id": "req_123456789"
      }
    }
    ```
    
    ## Rate Limiting
    
    - **Public endpoints**: 60 requests per minute per IP
    - **Authenticated endpoints**: 120 requests per minute per user
    - **Admin endpoints**: 200 requests per minute per admin user
    
    ## Pagination
    
    All list endpoints support pagination:
    - `page`: Page number (default: 1)
    - `per_page`: Items per page (default: 15, max: 100)
    - `sort`: Sort field (default: created_at)  
    - `order`: Sort direction (asc/desc, default: desc)
    
    ## Search & Filtering
    
    Most endpoints support advanced filtering:
    - `search`: Full-text search query
    - `filter[field]`: Field-specific filters
    - `date_from` / `date_to`: Date range filtering
    - `status`: Status filtering where applicable
    
    ---
    
    **üö® Implementation Status:** Phase 1 - Foundation Setup Complete  
    **üìä Coverage:** 1,800+ fields converted to OpenAPI schemas  
    **üîê Security:** Multi-tenant isolation with JWT authentication  
    **üìà Business Impact:** Complete API standardization for enterprise CMS platform

  contact:
    name: CanvaStack Development Team
    url: https://canvastack.com
    email: dev@canvastack.com
  license:
    name: MIT License
    url: https://opensource.org/licenses/MIT
  termsOfService: https://canvastack.com/terms

servers:
  - url: https://api.stencil.local/v1
    description: Local development server
  - url: https://api-staging.stencil.canvastack.com/v1  
    description: Staging environment
  - url: https://api.stencil.canvastack.com/v1
    description: Production environment

# Security Schemes
security:
  - bearerAuth: []
  - tenantHeader: []

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: |
        JWT Bearer token authentication. 
        
        **Format:** `Authorization: Bearer {jwt_token}`
        
        **Token Structure:**
        ```json
        {
          "user_id": "uuid",
          "tenant_id": "uuid", 
          "roles": ["admin", "editor"],
          "permissions": ["users.create", "content.edit"],
          "exp": 1640995200
        }
        ```
    
    tenantHeader:
      type: apiKey
      in: header
      name: X-Tenant-ID
      description: |
        Tenant UUID header for multi-tenant isolation.
        
        **Format:** `X-Tenant-ID: 550e8400-e29b-41d4-a716-446655440000`
        
        **Required for all authenticated endpoints.**

  # External Component References  
  responses:
    Conflict:
      $ref: './components/responses.yaml#/Conflict'
    CreatedResponse:
      $ref: './components/responses.yaml#/CreatedResponse'
    DeletedResponse:
      $ref: './components/responses.yaml#/DeletedResponse'
    Forbidden:
      $ref: './components/responses.yaml#/Forbidden'
    NotFound:
      $ref: './components/responses.yaml#/NotFound'
    RateLimitExceeded:
      $ref: './components/responses.yaml#/RateLimitExceeded'
    ServerError:
      $ref: './components/responses.yaml#/ServerError'
    SuccessResponse:
      $ref: './components/responses.yaml#/SuccessResponse'
    Unauthorized:
      $ref: './components/responses.yaml#/Unauthorized'
    UpdatedResponse:
      $ref: './components/responses.yaml#/UpdatedResponse'
    ValidationError:
      $ref: './components/responses.yaml#/ValidationError'
  parameters:
    AcceptLanguage:
      $ref: './components/parameters.yaml#/AcceptLanguage'
    AuthorParam:
      $ref: './components/parameters.yaml#/AuthorParam'
    BulkIdsParam:
      $ref: './components/parameters.yaml#/BulkIdsParam'
    CacheControlParam:
      $ref: './components/parameters.yaml#/CacheControlParam'
    CategoryParam:
      $ref: './components/parameters.yaml#/CategoryParam'
    CompareVersionParam:
      $ref: './components/parameters.yaml#/CompareVersionParam'
    ContentTypeParam:
      $ref: './components/parameters.yaml#/ContentTypeParam'
    DateFromParam:
      $ref: './components/parameters.yaml#/DateFromParam'
    DateToParam:
      $ref: './components/parameters.yaml#/DateToParam'
    DryRunParam:
      $ref: './components/parameters.yaml#/DryRunParam'
    ETagParam:
      $ref: './components/parameters.yaml#/ETagParam'
    ExportFormatParam:
      $ref: './components/parameters.yaml#/ExportFormatParam'
    FallbackLocaleParam:
      $ref: './components/parameters.yaml#/FallbackLocaleParam'
    FeaturesParam:
      $ref: './components/parameters.yaml#/FeaturesParam'
    FieldsParam:
      $ref: './components/parameters.yaml#/FieldsParam'
    FileTypeParam:
      $ref: './components/parameters.yaml#/FileTypeParam'
    FilterParam:
      $ref: './components/parameters.yaml#/FilterParam'
    IncludeParam:
      $ref: './components/parameters.yaml#/IncludeParam'
    LocaleParam:
      $ref: './components/parameters.yaml#/LocaleParam'
    MaxFileSizeParam:
      $ref: './components/parameters.yaml#/MaxFileSizeParam'
    MetricParam:
      $ref: './components/parameters.yaml#/MetricParam'
    OrderParam:
      $ref: './components/parameters.yaml#/OrderParam'
    PageParam:
      $ref: './components/parameters.yaml#/PageParam'
    PerPageParam:
      $ref: './components/parameters.yaml#/PerPageParam'
    PeriodParam:
      $ref: './components/parameters.yaml#/PeriodParam'
    PublishStatusParam:
      $ref: './components/parameters.yaml#/PublishStatusParam'
    RateLimitParam:
      $ref: './components/parameters.yaml#/RateLimitParam'
    SearchParam:
      $ref: './components/parameters.yaml#/SearchParam'
    SortParam:
      $ref: './components/parameters.yaml#/SortParam'
    StatusParam:
      $ref: './components/parameters.yaml#/StatusParam'
    TagsParam:
      $ref: './components/parameters.yaml#/TagsParam'
    TemplateParam:
      $ref: './components/parameters.yaml#/TemplateParam'
    TenantHeader:
      $ref: './components/parameters.yaml#/TenantHeader'
    TenantParam:
      $ref: './components/parameters.yaml#/TenantParam'
    UUIDParam:
      $ref: './components/parameters.yaml#/UUIDParam'
    ValidateOnlyParam:
      $ref: './components/parameters.yaml#/ValidateOnlyParam'
    VersionParam:
      $ref: './components/parameters.yaml#/VersionParam'
    
  # Schema Definitions (mix of external and inline)
  schemas:
    # External component schemas
    AuditInfo:
      allOf:
        - $ref: './components/schemas.yaml#/AuditInfo'
    BaseResponse:
      allOf:
        - $ref: './components/schemas.yaml#/BaseResponse'
    BaseTranslation:
      allOf:
        - $ref: './components/schemas.yaml#/BaseTranslation'
    ErrorResponse:
      allOf:
        - $ref: './components/schemas.yaml#/ErrorResponse'
    PaginatedResponse:
      allOf:
        - $ref: './components/schemas.yaml#/PaginatedResponse'
    PaginationMeta:
      allOf:
        - $ref: './components/schemas.yaml#/PaginationMeta'
    SuccessResponse:
      allOf:
        - $ref: './components/schemas.yaml#/SuccessResponse'
    TenantInfo:
      allOf:
        - $ref: './components/schemas.yaml#/TenantInfo'
    TranslationStatus:
      allOf:
        - $ref: './components/schemas.yaml#/TranslationStatus'
    ValidationErrorResponse:
      allOf:
        - $ref: './components/schemas.yaml#/ValidationErrorResponse'

    # Content Management Schemas
    # About schemas will be added here
    # Contact schemas will be added here
    # Customers schemas will be added here
    # Documentation schemas will be added here
    # Faq schemas will be added here
    # Financial schemas will be added here
    # Homepage schemas will be added here
    # Inventory schemas will be added here
    # Language schemas will be added here
    # Media schemas will be added here
    # Orders schemas will be added here
    # Plugins schemas will be added here
    # Products schemas will be added here
    # Reviews schemas will be added here
    # Seo schemas will be added here
    # Settings schemas will be added here
    # Suppliers schemas will be added here
    # Theme schemas will be added here
    # Users schemas will be added here
    # Vendors schemas will be added here
    
    # Phase 4C: Business Workflow Schemas
    CreatePurchaseOrderCommand:
      $ref: './schemas/content-management/order-commands.yaml#/CreatePurchaseOrderCommand'
    AssignVendorCommand:
      $ref: './schemas/content-management/order-commands.yaml#/AssignVendorCommand'
    NegotiatePriceCommand:
      $ref: './schemas/content-management/order-commands.yaml#/NegotiatePriceCommand'
    ApproveQuoteCommand:
      $ref: './schemas/content-management/order-commands.yaml#/ApproveQuoteCommand'
    VerifyPaymentCommand:
      $ref: './schemas/content-management/order-commands.yaml#/VerifyPaymentCommand'
    UpdateProductionCommand:
      $ref: './schemas/content-management/order-commands.yaml#/UpdateProductionCommand'
    ShipOrderCommand:
      $ref: './schemas/content-management/order-commands.yaml#/ShipOrderCommand'
    CompleteOrderCommand:
      $ref: './schemas/content-management/order-commands.yaml#/CompleteOrderCommand'
    CancelOrderCommand:
      $ref: './schemas/content-management/order-commands.yaml#/CancelOrderCommand'
    CommandStatusResponse:
      $ref: './schemas/content-management/order-commands.yaml#/CommandStatusResponse'
    
    # Phase 4C: Query Response Schemas
    OrderDetailsView:
      $ref: './schemas/content-management/order-queries.yaml#/OrderDetailsView'
    OrderListView:
      $ref: './schemas/content-management/order-queries.yaml#/OrderListView'
    ProductionStatusView:
      $ref: './schemas/content-management/order-queries.yaml#/ProductionStatusView'
    PaymentStatusView:
      $ref: './schemas/content-management/order-queries.yaml#/PaymentStatusView'
    VendorNegotiationView:
      $ref: './schemas/content-management/order-queries.yaml#/VendorNegotiationView'
    CustomerQuoteView:
      $ref: './schemas/content-management/order-queries.yaml#/CustomerQuoteView'
    OrderAnalyticsView:
      $ref: './schemas/content-management/order-queries.yaml#/OrderAnalyticsView'
    OrderEventView:
      $ref: './schemas/content-management/order-queries.yaml#/OrderEventView'
    PaginationMeta:
      $ref: './schemas/content-management/order-queries.yaml#/PaginationMeta'
    
    # Phase 4C: Workflow Service Schemas
    InitiateOrderWorkflowRequest:
      $ref: './schemas/content-management/order-workflows.yaml#/InitiateOrderWorkflowRequest'
    OrderWorkflowStatus:
      $ref: './schemas/content-management/order-workflows.yaml#/OrderWorkflowStatus'
    WorkflowStep:
      $ref: './schemas/content-management/order-workflows.yaml#/WorkflowStep'
    WorkflowTransitionRequest:
      $ref: './schemas/content-management/order-workflows.yaml#/WorkflowTransitionRequest'
    WorkflowStepEvent:
      $ref: './schemas/content-management/order-workflows.yaml#/WorkflowStepEvent'
    AssignVendorRequest:
      $ref: './schemas/content-management/order-workflows.yaml#/AssignVendorRequest'
    NegotiateVendorRequest:
      $ref: './schemas/content-management/order-workflows.yaml#/NegotiateVendorRequest'
    CreateQuoteRequest:
      $ref: './schemas/content-management/order-workflows.yaml#/CreateQuoteRequest'
    CustomerApprovalRequest:
      $ref: './schemas/content-management/order-workflows.yaml#/CustomerApprovalRequest'
    VerifyPaymentRequest:
      $ref: './schemas/content-management/order-workflows.yaml#/VerifyPaymentRequest'
    UpdateProductionProgressRequest:
      $ref: './schemas/content-management/order-workflows.yaml#/UpdateProductionProgressRequest'
    RequestPaymentRequest:
      $ref: './schemas/content-management/order-workflows.yaml#/RequestPaymentRequest'
    ShipOrderRequest:
      $ref: './schemas/content-management/order-workflows.yaml#/ShipOrderRequest'
    CompleteOrderRequest:
      $ref: './schemas/content-management/order-workflows.yaml#/CompleteOrderRequest'
    CancelOrderRequest:
      $ref: './schemas/content-management/order-workflows.yaml#/CancelOrderRequest'
    ProcessRefundRequest:
      $ref: './schemas/content-management/order-workflows.yaml#/ProcessRefundRequest'
    VendorNegotiationResponse:
      $ref: './schemas/content-management/order-workflows.yaml#/VendorNegotiationResponse'
    CustomerQuoteResponse:
      $ref: './schemas/content-management/order-workflows.yaml#/CustomerQuoteResponse'
    WorkflowMetrics:
      $ref: './schemas/content-management/order-workflows.yaml#/WorkflowMetrics'
    
    # Inline Schema Definitions (legacy compatibility)
    # Base Entity Schema
    BaseEntity:
      type: object
      required:
        - id
        - tenant_id
        - created_at
        - updated_at
      properties:
        id:
          type: string
          format: uuid
          description: Unique identifier (UUID v4)
          example: "550e8400-e29b-41d4-a716-446655440000"
        tenant_id:
          type: string
          format: uuid
          description: Tenant isolation identifier
          example: "6ba7b810-9dad-11d1-80b4-00c04fd430c8"
        created_at:
          type: string
          format: date-time
          description: Creation timestamp (ISO 8601)
          example: "2025-11-12T13:00:00Z"
        updated_at:
          type: string
          format: date-time  
          description: Last modification timestamp (ISO 8601)
          example: "2025-11-12T13:30:00Z"
        deleted_at:
          type: [string, "null"]
          format: date-time
          description: Soft deletion timestamp (ISO 8601)
          example: null

    # Additional inline schemas removed - using external references only

# Main API Paths (will be extended with specific modules)
paths:
  # ===== PHASE 4-8 ROADMAP ENDPOINTS =====
  
  # ===== PHASE 4: CONTENT MANAGEMENT SYSTEM (CMS) =====
  # CMS Pages - Following Hexagonal Architecture with Use Cases and Query Handlers
  # $ref: './paths/content-management/cms-pages.yaml'
  # Endpoints: /tenant/cms/pages/*, /tenant/cms/content-blocks/*
  
  # ===== PHASE 5: ADVANCED FEATURES =====  
  # Theme Management - Following Hexagonal Architecture patterns
  # $ref: './paths/content-management/themes.yaml'
  # Endpoints: /tenant/themes/*, /tenant/translations/*, /tenant/analytics/*
  
  # ===== PHASE 6: PLATFORM MANAGEMENT =====
  # Platform Tenant Management - Landlord database context
  # $ref: './paths/platform/tenant-management.yaml'  
  # Endpoints: /platform/tenants/*, /platform/subscriptions/*, /platform/analytics/*
  
  # ===== PHASE 7: CUSTOM DOMAIN MANAGEMENT =====
  # Domain Management - Dual context (Landlord + Tenant)
  # $ref: './paths/content-management/domain-management.yaml'
  # Endpoints: /platform/domain-verification/*, /tenant/domains/*
  
  # ===== EXISTING CONTENT MANAGEMENT ENDPOINTS =====
  
  # About Us Module - Paths defined in about.yaml
  # Endpoints accessible at /platform/about/* and /tenant/about/*
  
  # ===== E-COMMERCE ENDPOINTS =====
  
  # Orders Module - Paths defined in orders.yaml
  # Endpoints accessible at /tenant/orders/* and /admin/orders/*
  
  # Products Module - Paths defined in products.yaml
  # Endpoints accessible at /tenant/products/* and /admin/products/*

  # Customers, Vendors modules - Paths defined in respective YAML files
  # Endpoints accessible at /tenant/customers/*, /tenant/vendors/*, /vendors/*
  
  # ===== PHASE 4C: BUSINESS WORKFLOW ENDPOINTS =====
  # Order Workflows - Paths defined in order-workflows.yaml
  # Endpoints accessible at /tenant/orders/{id}/assign-vendor, /tenant/orders/{id}/negotiate-vendor, etc.
  # Business Use Cases: CreatePurchaseOrder, AssignVendor, NegotiateWithVendor, CreateCustomerQuote, etc.
  
  # ===== PHASE 4C: COMMAND PATTERN ENDPOINTS (CQRS) =====
  # Order Commands - Paths defined in order-commands.yaml
  # Endpoints accessible at /tenant/commands/orders/* 
  # Command Pattern: Write operations with idempotency and event sourcing
  
  # ===== PHASE 4C: QUERY PATTERN ENDPOINTS (CQRS) =====
  # Order Queries - Paths defined in order-queries.yaml
  # Endpoints accessible at /tenant/queries/orders/*
  # Query Pattern: Read-optimized views with filtering and pagination
  
  # ===== PHASE 4C: APPLICATION SERVICE ENDPOINTS =====
  # Order Workflow Services - Paths defined in order-services.yaml
  # Endpoints accessible at /tenant/services/order-workflow/*
  # Application Services: Orchestration, workflow management, and step transitions

  /api/v1/tenant/products/search:
    get:
      summary: "Search tenant products"
      tags:
        - Tenant Products
      parameters:
        - name: query
          in: query
          schema:
            type: string
        - name: category_id
          in: query
          schema:
            type: integer
        - name: status
          in: query
          schema:
            type: string
        - name: tag
          in: query
          schema:
            type: string
        - name: include_inventory
          in: query
          schema:
            type: boolean
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
      responses:
        '200':
          description: Hasil pencarian produk
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                  meta:
                    type: object
        '422':
          $ref: './components/responses.yaml#/ValidationError'
        '500':
          $ref: './components/responses.yaml#/ServerError'

  /api/v1/tenant/products/categories:
    get:
      summary: "Daftar kategori produk tenant"
      tags:
        - Tenant Products
      parameters:
        - name: active_only
          in: query
          schema:
            type: boolean
        - name: featured_only
          in: query
          schema:
            type: boolean
        - name: parent_id
          in: query
          schema:
            type: integer
        - name: include_children
          in: query
          schema:
            type: boolean
      responses:
        '200':
          description: Daftar kategori produk
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                  meta:
                    type: object
        '500':
          $ref: './components/responses.yaml#/ServerError'

  /api/v1/tenant/products/tags:
    get:
      summary: "Daftar tag produk tenant"
      tags:
        - Tenant Products
      parameters:
        - name: query
          in: query
          schema:
            type: string
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
      responses:
        '200':
          description: Daftar tag produk
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                  meta:
                    type: object
        '500':
          $ref: './components/responses.yaml#/ServerError'

  /api/v1/tenant/analytics/customers/segmentation:
    get:
      summary: "Analitik segmentasi pelanggan"
      tags:
        - Tenant Analytics
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
      responses:
        '200':
          description: Ringkasan segmentasi pelanggan
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      distribution:
                        type: object
                      topCustomers:
                        type: array
                        items:
                          type: object
                      atRiskCustomers:
                        type: array
                        items:
                          type: object
                  meta:
                    type: object
        '500':
          $ref: './components/responses.yaml#/ServerError'

  /api/v1/tenant/analytics/vendors:
    get:
      summary: "Analitik performa vendor"
      tags:
        - Tenant Analytics
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 50
        - name: underperforming_threshold
          in: query
          schema:
            type: number
            format: float
      responses:
        '200':
          description: Ringkasan performa vendor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      summary:
                        type: object
                      topPerformers:
                        type: array
                        items:
                          type: object
                      underperformingVendors:
                        type: array
                        items:
                          type: object
                      slaSnapshot:
                        type: array
                        items:
                          type: object
                  meta:
                    type: object
        '500':
          $ref: './components/responses.yaml#/ServerError'
  
  # ===== THEME MANAGEMENT ENDPOINTS =====
  # Theme paths defined in theme.yaml
  # Endpoints accessible at /themes/*, /tenant/themes/*, /admin/themes/*
  
  # ===== PLATFORM VENDOR MANAGEMENT ENDPOINTS =====
  # Platform vendor paths defined in vendors.yaml
  
  # ===== PLATFORM LICENSING ENDPOINTS =====
  # Platform licensing paths defined in platform-licensing.yaml
  # Endpoints accessible at /platform/licenses/*, /platform/tenants/*, /auth/*, etc.
  
  # Health Check Endpoint
  /health:
    get:
      tags:
        - System
      summary: API Health Check
      description: Check API server health and status
      security: []
      responses:
        '200':
          description: API is healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "ok"
                  timestamp:
                    type: string
                    format: date-time
                    example: "2025-11-12T13:00:00Z"
                  version:
                    type: string
                    example: "1.0.0"
                  database:
                    type: string
                    example: "connected"

  # Authentication Endpoints  
  /platform/login:
    post:
      tags:
        - Platform Authentication
      summary: Platform Admin Login
      description: Authenticate platform administrator and receive JWT token
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                  description: Platform admin email address
                  example: "admin@canvastencil.com"
                password:
                  type: string
                  format: password
                  description: Platform admin password
                  example: "SuperAdmin2024!"
                remember_me:
                  type: boolean
                  default: false
                  description: Extended token expiration
      responses:
        '200':
          description: Platform login successful
          content:
            application/json:
              schema:
                allOf:
                  - $ref: './components/schemas.yaml#/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          access_token:
                            type: string
                            description: JWT access token
                            example: "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
                          token_type:
                            type: string
                            example: "Bearer"
                          expires_in:
                            type: integer
                            description: Token expiration in seconds
                            example: 3600
                          account:
                            type: object
                            properties:
                              id:
                                type: string
                                format: uuid
                              uuid:
                                type: string
                                format: uuid
                              name:
                                type: string
                              email:
                                type: string
                                format: email
                              account_type:
                                type: string
                                example: "platform_owner"
                              status:
                                type: string
                                example: "active"
                              permissions:
                                type: array
                                items:
                                  type: string
        '401':
          description: Invalid platform credentials
          content:
            application/json:
              schema:
                $ref: '#components/schemas/ErrorResponse'
        '422':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#components/schemas/ErrorResponse'

  /tenant/login:
    post:
      tags:
        - Tenant Authentication
      summary: Tenant User Login
      description: Authenticate tenant user and receive JWT token
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
                - tenant_slug
              properties:
                email:
                  type: string
                  format: email
                  description: Tenant user email address
                  example: "admin@demo-etching.com"
                password:
                  type: string
                  format: password
                  description: Tenant user password
                  example: "DemoAdmin2024!"
                tenant_slug:
                  type: string
                  description: Tenant identifier slug
                  example: "demo-etching"
                remember_me:
                  type: boolean
                  default: false
                  description: Extended token expiration
      responses:
        '200':
          description: Tenant login successful
          content:
            application/json:
              schema:
                allOf:
                  - $ref: './components/schemas.yaml#/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          access_token:
                            type: string
                            description: JWT access token
                            example: "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
                          token_type:
                            type: string
                            example: "Bearer"
                          expires_in:
                            type: integer
                            description: Token expiration in seconds
                            example: 3600
                          user:
                            type: object
                            properties:
                              id:
                                type: string
                                format: uuid
                              uuid:
                                type: string
                                format: uuid
                              name:
                                type: string
                              email:
                                type: string
                                format: email
                              email_verified_at:
                                type: string
                                format: date-time

                              created_at:
                                type: string
                                format: date-time
                              updated_at:
                                type: string
                                format: date-time
                              roles:
                                type: array
                                items:
                                  type: string
                              permissions:
                                type: array
                                items:
                                  type: string
                          tenant:
                            type: object
                            properties:
                              id:
                                type: string
                                format: uuid
                              uuid:
                                type: string
                                format: uuid
                              name:
                                type: string
                              slug:
                                type: string
                              domain:
                                type: string

                              status:
                                type: string
                              subscription_status:
                                type: string
        '401':
          description: Invalid tenant credentials
          content:
            application/json:
              schema:
                $ref: '#components/schemas/ErrorResponse'
        '422':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#components/schemas/ErrorResponse'

  /platform/logout:
    post:
      tags:
        - Platform Authentication  
      summary: Platform Admin Logout
      description: Invalidate current platform admin JWT token
      responses:
        '200':
          description: Platform logout successful
          content:
            application/json:
              schema:
                $ref: './components/schemas.yaml#/SuccessResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#components/schemas/ErrorResponse'

  /tenant/logout:
    post:
      tags:
        - Tenant Authentication  
      summary: Tenant User Logout
      description: Invalidate current tenant user JWT token
      responses:
        '200':
          description: Tenant logout successful
          content:
            application/json:
              schema:
                $ref: './components/schemas.yaml#/SuccessResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#components/schemas/ErrorResponse'

  /platform/register:
    post:
      tags:
        - Platform Authentication
      summary: Platform Account Registration
      description: Register new platform administrator account
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
                - email
                - password
                - password_confirmation
              properties:
                name:
                  type: string
                  description: Full name of platform administrator
                  example: "John Admin"
                email:
                  type: string
                  format: email
                  description: Email address for platform account
                  example: "admin@example.com"
                password:
                  type: string
                  format: password
                  description: Strong password for account
                  example: "SecurePassword123!"
                password_confirmation:
                  type: string
                  format: password
                  description: Password confirmation
                  example: "SecurePassword123!"
      responses:
        '201':
          description: Platform account created successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: './components/schemas.yaml#/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          message:
                            type: string
                            example: "Platform account created successfully"
                          account:
                            type: object
                            properties:
                              id:
                                type: string
                                format: uuid
                              uuid:
                                type: string
                                format: uuid
                              name:
                                type: string
                              email:
                                type: string
                                format: email
                              account_type:
                                type: string
                                example: "platform_owner"
                              status:
                                type: string
                                example: "active"
        '422':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#components/schemas/ErrorResponse'

  /tenant/{tenantId}/register:
    post:
      tags:
        - Tenant Authentication
      summary: Tenant User Registration
      description: Register new user in specific tenant
      security: []
      parameters:
        - name: tenantId
          in: path
          required: true
          description: Tenant UUID
          schema:
            type: string
            format: uuid
            example: "6ba7b810-9dad-11d1-80b4-00c04fd430c8"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
                - email
                - password
                - password_confirmation
              properties:
                name:
                  type: string
                  description: Full name of user
                  example: "Jane User"
                email:
                  type: string
                  format: email
                  description: Email address for tenant account
                  example: "user@demo-etching.com"
                password:
                  type: string
                  format: password
                  description: User password
                  example: "UserPassword123!"
                password_confirmation:
                  type: string
                  format: password
                  description: Password confirmation
                  example: "UserPassword123!"
                role:
                  type: string
                  description: User role within tenant
                  enum: ["admin", "manager", "user"]
                  default: "user"
                  example: "user"
      responses:
        '201':
          description: Tenant user created successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: './components/schemas.yaml#/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          message:
                            type: string
                            example: "User account created successfully"
                          user:
                            type: object
                            properties:
                              id:
                                type: string
                                format: uuid
                              uuid:
                                type: string
                                format: uuid
                              name:
                                type: string
                              email:
                                type: string
                                format: email
                              email_verified_at:
                                type: string
                                format: date-time

                              created_at:
                                type: string
                                format: date-time
                              updated_at:
                                type: string
                                format: date-time
                              roles:
                                type: array
                                items:
                                  type: string
                          tenant:
                            type: object
                            properties:
                              id:
                                type: string
                                format: uuid
                              uuid:
                                type: string
                                format: uuid
                              name:
                                type: string
                              slug:
                                type: string
        '422':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#components/schemas/ErrorResponse'

# Tags for API Organization
tags:
  - name: System
    description: System health and status endpoints
  - name: Platform Authentication
    description: Platform administrator authentication and session management
  - name: Tenant Authentication
    description: Tenant user authentication and session management
  - name: Content Management
    description: Homepage, About, Contact, FAQ, and SEO management
  - name: E-Commerce
    description: Products, Reviews, Orders, and Inventory management
  - name: User Management
    description: Users, Customers, Vendors, and Suppliers management
  - name: System Administration
    description: Financial, Settings, and Plugin management
  - name: Assets & Localization
    description: Media, Documentation, Theme, and Language management
  - name: Theme Marketplace
    description: Browse, search, and purchase themes from the marketplace
  - name: Theme Installation
    description: Install, activate, and manage themes for tenants
  - name: Theme Customization
    description: Customize theme settings, colors, and layouts
  - name: Theme Management
    description: Create, update, and manage theme metadata (admin)
  - name: Theme Marketplace Management
    description: Admin interface for marketplace submissions and approvals
  - name: Theme Validation
    description: Security scanning and compatibility validation
  - name: Theme Versions
    description: Version management and changelog tracking
  - name: Theme Purchases
    description: Purchase transactions and license management
