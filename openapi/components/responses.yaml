# ============================================================================
# Common Response Components for Stencil CMS OpenAPI Specification
# ============================================================================
# This file contains reusable response definitions for all API endpoints
# following the standardized error response format with success/error/meta structure

# Standard Error Responses
# ============================================================================

Unauthorized:
  description: Unauthorized - Invalid or missing authentication token
  content:
    application/json:
      schema:
        type: object
        properties:
          success:
            type: boolean
            example: false
          error:
            type: object
            properties:
              code:
                type: string
                example: "UNAUTHORIZED"
              message:
                type: string
                example: "Authentication required. Please provide a valid Bearer token."
          meta:
            type: object
            properties:
              timestamp:
                type: string
                format: date-time
                example: "2025-01-01T12:00:00Z"
      examples:
        missingToken:
          summary: Missing token
          value:
            success: false
            error:
              code: "UNAUTHORIZED"
              message: "Authentication required. Please provide a valid Bearer token."
            meta:
              timestamp: "2025-01-01T12:00:00Z"
        invalidToken:
          summary: Invalid token
          value:
            success: false
            error:
              code: "UNAUTHORIZED"
              message: "Invalid authentication token."
            meta:
              timestamp: "2025-01-01T12:00:00Z"
        expiredToken:
          summary: Expired token
          value:
            success: false
            error:
              code: "UNAUTHORIZED"
              message: "Authentication token has expired."
            meta:
              timestamp: "2025-01-01T12:00:00Z"

Forbidden:
  description: Forbidden - Insufficient permissions
  content:
    application/json:
      schema:
        type: object
        properties:
          success:
            type: boolean
            example: false
          error:
            type: object
            properties:
              code:
                type: string
                example: "FORBIDDEN"
              message:
                type: string
                example: "You do not have permission to perform this action."
          meta:
            type: object
            properties:
              timestamp:
                type: string
                format: date-time
                example: "2025-01-01T12:00:00Z"
      examples:
        insufficientPermissions:
          summary: Insufficient permissions
          value:
            success: false
            error:
              code: "FORBIDDEN"
              message: "You do not have permission to perform this action."
            meta:
              timestamp: "2025-01-01T12:00:00Z"
        tenantMismatch:
          summary: Tenant context mismatch
          value:
            success: false
            error:
              code: "FORBIDDEN"
              message: "You do not have access to this tenant's resources."
            meta:
              timestamp: "2025-01-01T12:00:00Z"

NotFound:
  description: Not Found - Resource does not exist
  content:
    application/json:
      schema:
        type: object
        properties:
          success:
            type: boolean
            example: false
          error:
            type: object
            properties:
              code:
                type: string
                example: "NOT_FOUND"
              message:
                type: string
                example: "The requested resource was not found."
          meta:
            type: object
            properties:
              timestamp:
                type: string
                format: date-time
                example: "2025-01-01T12:00:00Z"
      examples:
        resourceNotFound:
          summary: Resource not found
          value:
            success: false
            error:
              code: "NOT_FOUND"
              message: "The requested resource was not found."
            meta:
              timestamp: "2025-01-01T12:00:00Z"
        pageNotFound:
          summary: Page not found
          value:
            success: false
            error:
              code: "NOT_FOUND"
              message: "Page not found."
            meta:
              timestamp: "2025-01-01T12:00:00Z"

ValidationError:
  description: Validation Error - Request data failed validation
  content:
    application/json:
      schema:
        $ref: './schemas.yaml#/ValidationErrorResponse'
      examples:
        validationFailed:
          summary: Validation failed
          value:
            success: false
            error:
              code: "VALIDATION_ERROR"
              message: "Validation failed"
              details:
                email:
                  - "The email field is required."
                password:
                  - "The password must be at least 8 characters."
                  - "The password must contain at least one uppercase letter."
            meta:
              timestamp: "2025-01-01T12:00:00Z"

BadRequest:
  description: Bad Request - Invalid request parameters or malformed request body
  content:
    application/json:
      schema:
        type: object
        properties:
          success:
            type: boolean
            example: false
          error:
            type: object
            properties:
              code:
                type: string
                example: "BAD_REQUEST"
              message:
                type: string
                example: "Invalid request parameters or malformed request body."
              details:
                type: object
                description: Additional error details
                additionalProperties: true
          meta:
            type: object
            properties:
              timestamp:
                type: string
                format: date-time
                example: "2025-01-01T12:00:00Z"
      examples:
        invalidParameters:
          summary: Invalid request parameters
          value:
            success: false
            error:
              code: "BAD_REQUEST"
              message: "Invalid request parameters."
            meta:
              timestamp: "2025-01-01T12:00:00Z"
        malformedBody:
          summary: Malformed request body
          value:
            success: false
            error:
              code: "BAD_REQUEST"
              message: "Malformed request body. Expected valid JSON."
            meta:
              timestamp: "2025-01-01T12:00:00Z"

InternalServerError:
  description: Internal Server Error
  content:
    application/json:
      schema:
        type: object
        properties:
          success:
            type: boolean
            example: false
          error:
            type: object
            properties:
              code:
                type: string
                example: "INTERNAL_SERVER_ERROR"
              message:
                type: string
                example: "An unexpected error occurred. Please try again later."
          meta:
            type: object
            properties:
              timestamp:
                type: string
                format: date-time
                example: "2025-01-01T12:00:00Z"
      examples:
        internalError:
          summary: Internal server error
          value:
            success: false
            error:
              code: "INTERNAL_SERVER_ERROR"
              message: "An unexpected error occurred. Please try again later."
            meta:
              timestamp: "2025-01-01T12:00:00Z"

ServerError:
  description: Internal Server Error
  content:
    application/json:
      schema:
        type: object
        properties:
          success:
            type: boolean
            example: false
          error:
            type: object
            properties:
              code:
                type: string
                example: "SERVER_ERROR"
              message:
                type: string
                example: "An unexpected error occurred. Please try again later."
          meta:
            type: object
            properties:
              timestamp:
                type: string
                format: date-time
                example: "2025-01-01T12:00:00Z"
      examples:
        internalError:
          summary: Internal server error
          value:
            success: false
            error:
              code: "SERVER_ERROR"
              message: "An unexpected error occurred. Please try again later."
            meta:
              timestamp: "2025-01-01T12:00:00Z"
        databaseError:
          summary: Database connection error
          value:
            success: false
            error:
              code: "SERVER_ERROR"
              message: "Database connection failed. Please try again later."
            meta:
              timestamp: "2025-01-01T12:00:00Z"

RateLimitExceeded:
  description: Rate Limit Exceeded - Too many requests
  content:
    application/json:
      schema:
        type: object
        properties:
          success:
            type: boolean
            example: false
          error:
            type: object
            properties:
              code:
                type: string
                example: "RATE_LIMIT_EXCEEDED"
              message:
                type: string
                example: "Too many requests. Please try again later."
              details:
                type: object
                properties:
                  retryAfter:
                    type: integer
                    description: Seconds until rate limit resets
                    example: 60
          meta:
            type: object
            properties:
              timestamp:
                type: string
                format: date-time
                example: "2025-01-01T12:00:00Z"
      examples:
        rateLimitExceeded:
          summary: Rate limit exceeded
          value:
            success: false
            error:
              code: "RATE_LIMIT_EXCEEDED"
              message: "Too many requests. Please try again later."
              details:
                retryAfter: 60
            meta:
              timestamp: "2025-01-01T12:00:00Z"

Conflict:
  description: Conflict - Resource already exists or constraint violation
  content:
    application/json:
      schema:
        type: object
        properties:
          success:
            type: boolean
            example: false
          error:
            type: object
            properties:
              code:
                type: string
                example: "CONFLICT"
              message:
                type: string
                example: "Resource already exists or constraint violation."
          meta:
            type: object
            properties:
              timestamp:
                type: string
                format: date-time
                example: "2025-01-01T12:00:00Z"
      examples:
        resourceExists:
          summary: Resource already exists
          value:
            success: false
            error:
              code: "CONFLICT"
              message: "Resource already exists."
            meta:
              timestamp: "2025-01-01T12:00:00Z"
        constraintViolation:
          summary: Database constraint violation
          value:
            success: false
            error:
              code: "CONFLICT"
              message: "Database constraint violation."
            meta:
              timestamp: "2025-01-01T12:00:00Z"

# Success Response Templates
# ============================================================================

SuccessResponse:
  description: Operation completed successfully
  content:
    application/json:
      schema:
        type: object
        properties:
          success:
            type: boolean
            example: true
          message:
            type: string
            example: "Operation completed successfully"
          meta:
            type: object
            properties:
              timestamp:
                type: string
                format: date-time
                example: "2025-01-01T12:00:00Z"

CreatedResponse:
  description: Resource created successfully
  content:
    application/json:
      schema:
        type: object
        properties:
          success:
            type: boolean
            example: true
          message:
            type: string
            example: "Resource created successfully"
          data:
            type: object
            description: Created resource data
          meta:
            type: object
            properties:
              timestamp:
                type: string
                format: date-time
                example: "2025-01-01T12:00:00Z"

UpdatedResponse:
  description: Resource updated successfully
  content:
    application/json:
      schema:
        type: object
        properties:
          success:
            type: boolean
            example: true
          message:
            type: string
            example: "Resource updated successfully"
          data:
            type: object
            description: Updated resource data
          meta:
            type: object
            properties:
              timestamp:
                type: string
                format: date-time
                example: "2025-01-01T12:00:00Z"

DeletedResponse:
  description: Resource deleted successfully
  content:
    application/json:
      schema:
        type: object
        properties:
          success:
            type: boolean
            example: true
          message:
            type: string
            example: "Resource deleted successfully"
          meta:
            type: object
            properties:
              timestamp:
                type: string
                format: date-time
                example: "2025-01-01T12:00:00Z"