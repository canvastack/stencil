import{j as e}from"./ui-vendor-CJNjIdOR.js";import{r as c}from"./react-vendor-92AQlTAG.js";import{h as P,B as p,P as E,C as o,a as d,b as m,d as u,c as K,N as F,O as U,Q as R,R as q,Z as H,L as n,S,t as w,v as O,w as V,x,I as j,ac as J,T as z,U as Q,f as y,ad as Z,ae as G,j as A,ah as W,ai as X,aj as Y,D as _,k as $,m as ee,p as I,g as se}from"./index-Dj8ncPAG.js";import{T as ae,a as te,b as N,c as C}from"./tabs-BSJrF7vJ.js";import{M as le}from"./MapPicker-BvLj9vyM.js";import{DataTable as re}from"./data-table-CLwWu7jT.js";import{E as ne}from"./ellipsis-vertical-DyVpvsM3.js";import{S as ce}from"./square-pen-BE2YbwJO.js";import"./three-vendor-CVohgf7y.js";import"./table-BP_P9naC.js";import"./download-C93Gk9fO.js";import"./minimize-2-BuqSuxBK.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=P("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),oe=[{id:"1",name:"Alice Johnson",email:"alice.j@email.com",phone:"+62 821 1234 5678",customerType:"individual",status:"active",totalOrders:15,totalSpent:255e5,createdAt:"2024-01-10",lastOrderDate:"2024-11-01"},{id:"2",name:"Tech Corp Indonesia",email:"procurement@techcorp.id",phone:"+62 822 2345 6789",company:"Tech Corp Indonesia",customerType:"business",status:"active",totalOrders:42,totalSpent:125e6,createdAt:"2023-08-15",lastOrderDate:"2024-10-28",notes:"VIP customer - priority handling"},{id:"3",name:"David Lee",email:"david.lee@email.com",phone:"+62 823 3456 7890",customerType:"individual",status:"inactive",totalOrders:3,totalSpent:45e5,createdAt:"2024-06-20",lastOrderDate:"2024-07-15"}];function Ce(){const[l,g]=c.useState(oe);c.useState("");const[k,h]=c.useState(!1),[i,T]=c.useState(null),[a,r]=c.useState({name:"",email:"",phone:"",company:"",customerType:"individual",status:"active",notes:""}),[v,f]=c.useState(),D=s=>{s?(T(s),r({name:s.name,email:s.email,phone:s.phone,company:s.company||"",customerType:s.customerType,status:s.status,notes:s.notes||""}),f(s.location)):(T(null),r({name:"",email:"",phone:"",company:"",customerType:"individual",status:"active",notes:""}),f(void 0)),h(!0)},M=()=>{if(i)g(l.map(s=>s.id===i.id?{...s,...a,location:v}:s)),y.success("Customer updated successfully!");else{const s={id:Date.now().toString(),...a,location:v,totalOrders:0,totalSpent:0,createdAt:new Date().toISOString().split("T")[0]};g([...l,s]),y.success("Customer created successfully!")}h(!1)},L=s=>{g(l.filter(t=>t.id!==s)),y.success("Customer deleted successfully!")},b=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s),B=[{accessorKey:"name",header:"Customer",cell:({row:s})=>e.jsxs("div",{className:"font-medium",children:[e.jsx("div",{className:"font-semibold",children:s.getValue("name")}),s.original.company&&e.jsx("div",{className:"text-xs text-muted-foreground",children:s.original.company})]})},{accessorKey:"email",header:"Contact",cell:({row:s})=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Z,{className:"w-3 h-3 text-muted-foreground"}),s.getValue("email")]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(G,{className:"w-3 h-3 text-muted-foreground"}),s.original.phone]})]})},{accessorKey:"customerType",header:"Type",cell:({row:s})=>e.jsx(A,{variant:s.getValue("customerType")==="business"?"default":"secondary",children:s.getValue("customerType")})},{accessorKey:"totalOrders",header:"Orders",cell:({row:s})=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(W,{className:"w-4 h-4 text-muted-foreground"}),s.getValue("totalOrders")]})},{accessorKey:"totalSpent",header:"Total Spent",cell:({row:s})=>e.jsxs("div",{className:"flex items-center gap-1 font-semibold",children:[e.jsx(X,{className:"w-4 h-4 text-primary"}),b(s.getValue("totalSpent"))]})},{accessorKey:"status",header:"Status",cell:({row:s})=>e.jsx(A,{variant:s.getValue("status")==="active"?"default":s.getValue("status")==="blocked"?"destructive":"secondary",children:s.getValue("status")})},{accessorKey:"lastOrderDate",header:"Last Order",cell:({row:s})=>{const t=s.getValue("lastOrderDate");return t?e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(Y,{className:"w-3 h-3 text-muted-foreground"}),t]}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"No orders"})}},{id:"actions",header:"Actions",cell:({row:s})=>{const t=s.original;return e.jsxs(_,{children:[e.jsx($,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"icon",children:e.jsx(ne,{className:"w-4 h-4"})})}),e.jsxs(ee,{align:"end",children:[e.jsxs(I,{onClick:()=>D(t),children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsxs(I,{onClick:()=>L(t.id),className:"text-destructive",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})}}];return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(ie,{className:"w-8 h-8 text-primary"}),"Customer Management"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage customer information and order history"})]}),e.jsxs(p,{onClick:()=>D(),className:"gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),"Add Customer"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(o,{children:[e.jsx(d,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium",children:"Total Customers"})}),e.jsxs(u,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l.length}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[l.filter(s=>s.status==="active").length," active"]})]})]}),e.jsxs(o,{children:[e.jsx(d,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium",children:"Total Orders"})}),e.jsxs(u,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l.reduce((s,t)=>s+t.totalOrders,0)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"All time"})]})]}),e.jsxs(o,{children:[e.jsx(d,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium",children:"Total Revenue"})}),e.jsxs(u,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b(l.reduce((s,t)=>s+t.totalSpent,0))}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"All time"})]})]}),e.jsxs(o,{children:[e.jsx(d,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium",children:"Business Customers"})}),e.jsxs(u,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l.filter(s=>s.customerType==="business").length}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["vs ",l.filter(s=>s.customerType==="individual").length," individuals"]})]})]})]}),e.jsxs(o,{children:[e.jsxs(d,{children:[e.jsx(m,{children:"All Customers"}),e.jsx(K,{children:"A list of all customers with their order history and contact information"})]}),e.jsx(u,{children:e.jsx(re,{columns:B,data:l,searchPlaceholder:"Search customers...",searchKey:"name"})})]}),e.jsx(F,{open:k,onOpenChange:h,children:e.jsxs(U,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(R,{children:[e.jsx(q,{children:i?"Edit Customer":"Add New Customer"}),e.jsx(H,{children:i?"Update customer information and details":"Create a new customer record"})]}),e.jsxs(ae,{defaultValue:"info",className:"w-full",children:[e.jsxs(te,{className:"grid w-full grid-cols-3",children:[e.jsx(N,{value:"info",children:"Customer Info"}),e.jsx(N,{value:"location",children:"Location"}),e.jsx(N,{value:"notes",children:"Notes"})]}),e.jsxs(C,{value:"info",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Customer Type *"}),e.jsxs(S,{value:a.customerType,onValueChange:s=>r({...a,customerType:s}),children:[e.jsx(w,{children:e.jsx(O,{})}),e.jsxs(V,{children:[e.jsx(x,{value:"individual",children:"Individual"}),e.jsx(x,{value:"business",children:"Business"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Status"}),e.jsxs(S,{value:a.status,onValueChange:s=>r({...a,status:s}),children:[e.jsx(w,{children:e.jsx(O,{})}),e.jsxs(V,{children:[e.jsx(x,{value:"active",children:"Active"}),e.jsx(x,{value:"inactive",children:"Inactive"}),e.jsx(x,{value:"blocked",children:"Blocked"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Full Name / Business Name *"}),e.jsx(j,{value:a.name,onChange:s=>r({...a,name:s.target.value}),placeholder:"John Doe / ABC Company"})]}),a.customerType==="business"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Company Name"}),e.jsx(j,{value:a.company,onChange:s=>r({...a,company:s.target.value}),placeholder:"Company legal name"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Email *"}),e.jsx(j,{type:"email",value:a.email,onChange:s=>r({...a,email:s.target.value}),placeholder:"customer@email.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Phone Number *"}),e.jsx(j,{value:a.phone,onChange:s=>r({...a,phone:s.target.value}),placeholder:"+62 812 3456 7890"})]})]})]}),e.jsxs(C,{value:"location",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"}),"Customer Address Location"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click on the map to select the customer's shipping or billing address"})]}),e.jsx(le,{onLocationSelect:f,value:v})]}),e.jsx(C,{value:"notes",className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Customer Notes"}),e.jsx(z,{value:a.notes,onChange:s=>r({...a,notes:s.target.value}),placeholder:"Add any important notes about this customer (preferences, special requirements, etc.)",rows:6})]})})]}),e.jsxs(Q,{children:[e.jsx(p,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),e.jsx(p,{onClick:M,disabled:!a.name||!a.email||!a.phone,children:i?"Update Customer":"Create Customer"})]})]})})]})}export{Ce as default};
