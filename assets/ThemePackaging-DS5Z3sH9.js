import{j as e}from"./ui-vendor-CJNjIdOR.js";import{r as h}from"./react-vendor-92AQlTAG.js";import{as as V,C as r,a as n,b as d,c as g,aa as C,d as o,L as m,j as E,ag as p,V as i,ap as T,aM as F,B as L}from"./index-Dj8ncPAG.js";import{A as u,a as N}from"./alert-DrVHkPlt.js";import{T as A,t as P}from"./ThemePackageManager-CFeF7rYd.js";import{F as D}from"./file-archive-_D-v21gB.js";import{I as f}from"./info-DMpDVy7a.js";import{D as O}from"./download-C93Gk9fO.js";import"./three-vendor-CVohgf7y.js";import"./jszip.min-VaQned3v.js";function J(){const{currentTheme:a}=V(),[v,w]=h.useState(!1),[t,R]=h.useState({includeReadme:!0,includeChangelog:!0,includeLicense:!0,includeScreenshots:!0}),[l,S]=h.useState(null),[y,b]=h.useState(!1);h.useEffect(()=>{a&&k()},[a]);const k=async()=>{if(a){b(!0);try{const c=await new A().validateTheme(a);S(c)}catch(s){console.error("Validation error:",s)}finally{b(!1)}}},I=async()=>{if(!a){alert("No theme selected");return}w(!0);try{const s=await P.exportThemeAsZip(a,t),c=URL.createObjectURL(s),x=document.createElement("a");x.href=c,x.download=`${a.metadata.name}-v${a.metadata.version}.zip`,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(c),alert("Theme exported successfully!")}catch(s){alert(`Export failed: ${s instanceof Error?s.message:"Unknown error"}`)}finally{w(!1)}},j=s=>{R(c=>({...c,[s]:!c[s]}))};return a?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"Theme Packaging"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Export your theme as a distributable ZIP package"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(r,{children:[e.jsx(n,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5"}),"Theme Information"]})}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{className:"text-sm text-gray-500",children:"Theme Name"}),e.jsx("p",{className:"font-medium",children:a.metadata.name})]}),e.jsxs("div",{children:[e.jsx(m,{className:"text-sm text-gray-500",children:"Version"}),e.jsxs("p",{className:"font-medium",children:["v",a.metadata.version]})]}),e.jsxs("div",{children:[e.jsx(m,{className:"text-sm text-gray-500",children:"Author"}),e.jsx("p",{className:"font-medium",children:a.metadata.author})]}),e.jsxs("div",{children:[e.jsx(m,{className:"text-sm text-gray-500",children:"License"}),e.jsx("p",{className:"font-medium",children:a.metadata.license||"Not specified"})]})]}),e.jsxs("div",{children:[e.jsx(m,{className:"text-sm text-gray-500",children:"Description"}),e.jsx("p",{className:"text-sm",children:a.metadata.description})]}),a.metadata.supports&&e.jsxs("div",{children:[e.jsx(m,{className:"text-sm text-gray-500 mb-2 block",children:"Features"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.metadata.supports.map(s=>e.jsx(E,{variant:"secondary",children:s},s))})]})]})]}),e.jsxs(r,{children:[e.jsxs(n,{children:[e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5"}),"Export Options"]}),e.jsx(g,{children:"Select which files to include in the package"})]}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{id:"readme",checked:t.includeReadme,onCheckedChange:()=>j("includeReadme")}),e.jsx("label",{htmlFor:"readme",className:"text-sm font-medium cursor-pointer",children:"Include README.md"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{id:"changelog",checked:t.includeChangelog,onCheckedChange:()=>j("includeChangelog")}),e.jsx("label",{htmlFor:"changelog",className:"text-sm font-medium cursor-pointer",children:"Include CHANGELOG.md"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{id:"license",checked:t.includeLicense,onCheckedChange:()=>j("includeLicense")}),e.jsx("label",{htmlFor:"license",className:"text-sm font-medium cursor-pointer",children:"Include LICENSE file"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{id:"screenshots",checked:t.includeScreenshots,onCheckedChange:()=>j("includeScreenshots")}),e.jsx("label",{htmlFor:"screenshots",className:"text-sm font-medium cursor-pointer",children:"Include screenshots"})]})]})]}),l&&e.jsxs(r,{children:[e.jsx(n,{children:e.jsxs(d,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[l.isValid?e.jsx(i,{className:"h-5 w-5 text-green-500"}):e.jsx(T,{className:"h-5 w-5 text-red-500"}),"Validation Results"]}),e.jsxs(E,{variant:l.isValid?"default":"destructive",children:["Score: ",l.score,"/100"]})]})}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs(u,{children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx(N,{children:l.summary})]}),l.errors.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-red-600 mb-2",children:["Errors (",l.errors.length,")"]}),e.jsx("div",{className:"space-y-2",children:l.errors.slice(0,5).map((s,c)=>e.jsxs(u,{variant:"destructive",children:[e.jsx(T,{className:"h-4 w-4"}),e.jsxs(N,{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:s.message}),s.suggestion&&e.jsxs("div",{className:"text-xs mt-1 opacity-80",children:["Suggestion: ",s.suggestion]})]})]},c))})]}),l.warnings.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-yellow-600 mb-2",children:["Warnings (",l.warnings.length,")"]}),e.jsx("div",{className:"space-y-2",children:l.warnings.slice(0,3).map((s,c)=>e.jsxs(u,{children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx(N,{className:"text-sm",children:s.message})]},c))})]})]}),e.jsx(F,{children:e.jsx(L,{variant:"outline",onClick:k,disabled:y,children:y?"Validating...":"Re-validate"})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(r,{children:[e.jsxs(n,{children:[e.jsx(d,{children:"Package Preview"}),e.jsx(g,{children:"Files that will be included"})]}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(i,{className:"h-4 w-4"}),e.jsx("span",{children:"theme.json"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(i,{className:"h-4 w-4"}),e.jsx("span",{children:"components/"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(i,{className:"h-4 w-4"}),e.jsx("span",{children:"styles/"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(i,{className:"h-4 w-4"}),e.jsx("span",{children:"assets/"})]}),t.includeReadme&&e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(i,{className:"h-4 w-4"}),e.jsx("span",{children:"README.md"})]}),t.includeChangelog&&e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(i,{className:"h-4 w-4"}),e.jsx("span",{children:"CHANGELOG.md"})]}),t.includeLicense&&e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(i,{className:"h-4 w-4"}),e.jsx("span",{children:"LICENSE"})]})]})})]}),e.jsxs(r,{children:[e.jsxs(n,{children:[e.jsx(d,{children:"Export Package"}),e.jsx(g,{children:"Download theme as ZIP file"})]}),e.jsxs(o,{children:[e.jsx(L,{onClick:I,disabled:v||l&&!l.isValid,className:"w-full",size:"lg",children:v?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"h-5 w-5 mr-2 animate-pulse"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"h-5 w-5 mr-2"}),"Export Theme"]})}),l&&!l.isValid&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:"Fix validation errors before exporting"})]})]}),e.jsxs(u,{children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx(N,{className:"text-xs",children:"The exported package will be compatible with the Stencil Theme Engine and can be shared or uploaded to the marketplace."})]})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsx(r,{className:"max-w-md",children:e.jsxs(n,{children:[e.jsx(d,{children:"No Theme Selected"}),e.jsx(g,{children:"Please select a theme to package and export"})]})})})}export{J as default};
