import{j as e}from"./ui-vendor-CJNjIdOR.js";import{r as t}from"./react-vendor-92AQlTAG.js";import{h as M,C as P,a as V,b as D,E as H,c as _,B as i,a0 as A,aF as K,d as W,j as y}from"./index-Dj8ncPAG.js";import{T as q,a as G,b as w}from"./tabs-BSJrF7vJ.js";import{R as J}from"./rotate-ccw-D4D4Ldvd.js";import{R as k}from"./refresh-cw-Bt5ud7Vo.js";import{E as Q}from"./external-link-BXUxkYiG.js";import{M as X,a as Y}from"./minimize-2-BuqSuxBK.js";import{M as U,T as ee,S as se}from"./tablet-DoZ_bbKv.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=M("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),ae={desktop:{width:"100%",height:"100%",label:"Desktop"},tablet:{width:"768px",height:"1024px",label:"Tablet"},mobile:{width:"375px",height:"667px",label:"Mobile"}};function ue({previewUrl:r="/",theme:d,onDeviceChange:m,initialDevice:C="desktop",compactMode:x=!1}){const[a,j]=t.useState(C),[l,z]=t.useState(!1),[b,o]=t.useState(!0),[h,T]=t.useState(!1),[E,g]=t.useState(0),[v,u]=t.useState(100),p=t.useRef(null);t.useEffect(()=>{m==null||m(a)},[a,m]);const S=s=>{j(s),o(!0),setTimeout(()=>{o(!1)},300)},$=()=>{g(s=>s+1),o(!0)},I=()=>{z(!l)},L=()=>{u(s=>Math.min(s+10,200))},R=()=>{u(s=>Math.max(s-10,50))},Z=()=>{u(100),j("desktop"),g(s=>s+1),o(!0)},O=()=>{var s;if(o(!1),p.current&&d)try{const c=p.current.contentDocument;if(c){const f=c.createElement("div");f.style.cssText=`
            position: fixed;
            bottom: 10px;
            right: 10px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 12px;
            z-index: 9999;
          `,f.textContent=`Theme: ${d}`,(s=c.body)==null||s.appendChild(f)}}catch(c){console.warn("Cannot access iframe content:",c)}},B=()=>{try{window.open(N,"_blank")}catch{window.open(r,"_blank")}},n=ae[a],F="/stencil/",N=r.startsWith("http")?r:`${window.location.origin}${F.replace(/\/+$/,"")}/${r.replace(/^\//,"")}`;return e.jsx("div",{className:`${l?"fixed inset-0 z-50 bg-white":""}`,children:e.jsxs(P,{className:`${l?"h-full rounded-none border-0":"h-full"}`,children:[e.jsx(V,{children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsxs("div",{children:[e.jsxs(D,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5"}),"Live Preview"]}),e.jsx(_,{children:"Real-time preview of your theme across different devices"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[!x&&e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>T(!h),children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),h?"Hide":"Show"," Code"]}),e.jsx(i,{variant:"outline",size:"sm",onClick:R,title:"Zoom Out",children:e.jsx(te,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-xs text-muted-foreground min-w-[3rem] text-center",children:[v,"%"]}),e.jsx(i,{variant:"outline",size:"sm",onClick:L,title:"Zoom In",children:e.jsx(K,{className:"h-4 w-4"})}),e.jsx(i,{variant:"outline",size:"sm",onClick:Z,title:"Reset View",children:e.jsx(J,{className:"h-4 w-4"})}),e.jsx(i,{variant:"outline",size:"sm",onClick:$,title:"Refresh",children:e.jsx(k,{className:`h-4 w-4 ${b?"animate-spin":""}`})}),e.jsx(i,{variant:"outline",size:"sm",onClick:B,title:"Open in New Tab",children:e.jsx(Q,{className:"h-4 w-4"})}),e.jsx(i,{variant:"outline",size:"sm",onClick:I,title:l?"Exit Fullscreen":"Enter Fullscreen",children:l?e.jsx(X,{className:"h-4 w-4"}):e.jsx(Y,{className:"h-4 w-4"})})]})]})}),e.jsxs(W,{children:[h&&!x&&e.jsxs("div",{className:"mb-4 p-4 border rounded-md bg-gray-50",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Iframe Source:"}),e.jsx("code",{className:"text-xs bg-white p-2 rounded block overflow-x-auto",children:`<iframe src="${r}" width="${n.width}" height="${n.height}" />`})]}),e.jsxs("div",{className:"mb-4 flex items-center gap-2 flex-wrap",children:[e.jsx(q,{value:a,onValueChange:s=>S(s),children:e.jsxs(G,{children:[e.jsxs(w,{value:"desktop",className:"gap-2",children:[e.jsx(U,{className:"h-4 w-4"}),"Desktop"]}),e.jsxs(w,{value:"tablet",className:"gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),"Tablet"]}),e.jsxs(w,{value:"mobile",className:"gap-2",children:[e.jsx(se,{className:"h-4 w-4"}),"Mobile"]})]})}),e.jsxs(y,{variant:"outline",children:[n.width," Ã— ",n.height]}),d&&e.jsxs(y,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:["Theme: ",d]})]}),e.jsxs("div",{className:"relative bg-gray-100 rounded-lg p-4 flex items-center justify-center overflow-auto",style:{minHeight:x?"400px":"600px",height:l?"calc(100vh - 300px)":x?"500px":"700px"},children:[b&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/80 z-10 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx(k,{className:"h-8 w-8 animate-spin mx-auto mb-2 text-blue-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Loading preview..."})]})}),e.jsx("div",{className:`bg-white shadow-2xl rounded-lg overflow-hidden transition-all duration-300 ${a==="desktop"?"w-full h-full":""}`,style:{width:a!=="desktop"?n.width:"100%",height:a!=="desktop"?n.height:"100%",maxWidth:"100%",transform:`scale(${v/100})`,transformOrigin:"center"},children:e.jsx("iframe",{ref:p,src:N,className:"w-full h-full border-0",title:"Live Preview",sandbox:"allow-same-origin allow-scripts allow-forms allow-popups",onLoad:O},E)})]}),e.jsx("div",{className:"mt-4 text-sm text-gray-500 text-center",children:e.jsx("p",{children:"Preview is sandboxed and isolated from the main application"})})]})]})})}export{ue as L,te as Z};
