import{j as e}from"./ui-vendor-CzLWDOsI.js";import{r as o}from"./react-vendor-92AQlTAG.js";import{$ as w,B as l,P as _,C as R,a as b,b as S,c as M,d as V,z as A,F as P,G as k,H as E,N as T,L as p,I as U,T as K,a9 as O,K as F,X as B,i as h,J as H,f as m,D as I,j as z,l as L,o as C,g as $}from"./index-CA1Fui7q.js";import{DataTable as q}from"./data-table-CYZ4C62p.js";import{E as G}from"./ellipsis-vertical-B-7i3PLI.js";import{S as J}from"./square-pen-DcGP5dFd.js";import"./three-vendor-CaHj5NkI.js";import"./table-D_ER-OKI.js";import"./download-DrC4LZTf.js";import"./minimize-2-ntLFqfDl.js";import"./info-D97ENJ6t.js";import"./triangle-alert-Dz_K3Ww6.js";const x=[{id:"users_view",name:"View Users",description:"View user list and details"},{id:"users_create",name:"Create Users",description:"Add new users"},{id:"users_edit",name:"Edit Users",description:"Modify user information"},{id:"users_delete",name:"Delete Users",description:"Remove users"},{id:"products_view",name:"View Products",description:"View product catalog"},{id:"products_create",name:"Create Products",description:"Add new products"},{id:"products_edit",name:"Edit Products",description:"Modify product information"},{id:"products_delete",name:"Delete Products",description:"Remove products"},{id:"orders_view",name:"View Orders",description:"View order list and details"},{id:"orders_manage",name:"Manage Orders",description:"Update order status"},{id:"content_edit",name:"Edit Content",description:"Modify website content"},{id:"theme_manage",name:"Manage Themes",description:"Change website themes"},{id:"settings_view",name:"View Settings",description:"View system settings"},{id:"settings_edit",name:"Edit Settings",description:"Modify system settings"}],X=[{id:"1",name:"Admin",description:"Full system access with all permissions",permissions:x.map(t=>t.id),userCount:2,createdAt:"2024-01-01"},{id:"2",name:"Manager",description:"Manage products, orders, and view reports",permissions:["products_view","products_create","products_edit","orders_view","orders_manage","content_edit"],userCount:5,createdAt:"2024-01-15"},{id:"3",name:"Staff",description:"Basic access to view and process orders",permissions:["products_view","orders_view","orders_manage"],userCount:12,createdAt:"2024-02-01"},{id:"4",name:"Viewer",description:"Read-only access to system data",permissions:["products_view","orders_view","settings_view"],userCount:3,createdAt:"2024-02-15"}];function oe(){const[t,u]=o.useState(X);o.useState("");const[v,c]=o.useState(!1),[r,g]=o.useState(null),[a,n]=o.useState({name:"",description:"",permissions:[]}),j=s=>{s?(g(s),n({name:s.name,description:s.description,permissions:s.permissions})):(g(null),n({name:"",description:"",permissions:[]})),c(!0)},N=()=>{if(r)u(t.map(s=>s.id===r.id?{...s,...a}:s)),m.success("Role updated successfully!");else{const s={id:Date.now().toString(),...a,userCount:0,createdAt:new Date().toISOString().split("T")[0]};u([...t,s]),m.success("Role created successfully!")}c(!1)},y=s=>{const i=t.find(d=>d.id===s);if(i&&i.userCount>0){m.error(`Cannot delete role with ${i.userCount} assigned users`);return}u(t.filter(d=>d.id!==s)),m.success("Role deleted successfully!")},f=s=>{n(i=>({...i,permissions:i.permissions.includes(s)?i.permissions.filter(d=>d!==s):[...i.permissions,s]}))},D=[{accessorKey:"name",header:"Role Name",cell:({row:s})=>e.jsxs("div",{className:"font-medium flex items-center gap-2",children:[e.jsx(w,{className:"w-4 h-4 text-primary"}),s.getValue("name")]})},{accessorKey:"description",header:"Description",cell:({row:s})=>e.jsx("div",{className:"max-w-md",children:s.getValue("description")})},{accessorKey:"permissions",header:"Permissions",cell:({row:s})=>e.jsxs(h,{variant:"secondary",children:[s.getValue("permissions").length," permissions"]})},{accessorKey:"userCount",header:"Users",cell:({row:s})=>e.jsxs(h,{variant:"outline",children:[s.getValue("userCount")," users"]})},{accessorKey:"createdAt",header:"Created"},{id:"actions",header:"Actions",cell:({row:s})=>{const i=s.original;return e.jsxs(I,{children:[e.jsx(z,{asChild:!0,children:e.jsx(l,{variant:"ghost",size:"icon",children:e.jsx(G,{className:"w-4 h-4"})})}),e.jsxs(L,{align:"end",children:[e.jsxs(C,{onClick:()=>j(i),children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsxs(C,{onClick:()=>y(i.id),className:"text-destructive",disabled:i.userCount>0,children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})}}];return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(w,{className:"w-8 h-8 text-primary"}),"Role Management"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage user roles and permissions"})]}),e.jsxs(l,{onClick:()=>j(),className:"gap-2",children:[e.jsx(_,{className:"w-4 h-4"}),"Add Role"]})]}),e.jsxs(R,{children:[e.jsxs(b,{children:[e.jsx(S,{children:"All Roles"}),e.jsx(M,{children:"A list of all user roles with their permissions and assigned users"})]}),e.jsx(V,{children:e.jsx(q,{columns:D,data:t,searchPlaceholder:"Search roles...",searchKey:"name"})})]}),e.jsx(A,{open:v,onOpenChange:c,children:e.jsxs(P,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(k,{children:[e.jsx(E,{children:r?"Edit Role":"Create New Role"}),e.jsx(T,{children:r?"Update role information and permissions":"Create a new role with specific permissions"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Role Name *"}),e.jsx(U,{value:a.name,onChange:s=>n({...a,name:s.target.value}),placeholder:"e.g., Manager, Staff, Viewer"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Description"}),e.jsx(K,{value:a.description,onChange:s=>n({...a,description:s.target.value}),placeholder:"Describe the role and its purpose...",rows:3})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(p,{className:"text-base font-semibold",children:"Permissions"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(s=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors cursor-pointer",onClick:()=>f(s.id),children:[e.jsx(O,{id:s.id,checked:a.permissions.includes(s.id),onCheckedChange:()=>f(s.id),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{htmlFor:s.id,className:"text-sm font-medium leading-none cursor-pointer flex items-center gap-2",children:[s.name,a.permissions.includes(s.id)?e.jsx(F,{className:"w-4 h-4 text-primary"}):e.jsx(B,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s.description})]})]},s.id))}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Selected Permissions:"}),e.jsxs(h,{variant:"default",children:[a.permissions.length," / ",x.length]})]})]})]}),e.jsxs(H,{children:[e.jsx(l,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(l,{onClick:N,disabled:!a.name,children:r?"Update Role":"Create Role"})]})]})})]})}export{oe as default};
