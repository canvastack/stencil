var gr=Object.defineProperty;var xr=(e,r,n)=>r in e?gr(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n;var gt=(e,r,n)=>xr(e,typeof r!="symbol"?r+"":r,n);import{j as t,a as vr,u as be,Z as br,P as Pe,d as _e,f as ce,e as le,h as yr,a8 as wr}from"./ui-vendor-CzLWDOsI.js";import{r as i,R as de,c as jr}from"./react-vendor-92AQlTAG.js";import{h as pe,ax as K,aj as Ae,ay as Rt,az as Sr,am as Be,C as ue,a as he,b as me,O as Le,I as ze,B as D,P as Cr,d as fe,a0 as xt,R as Ie,i as te,aq as Ft,ai as rt,aA as Ot,aB as Nr,aC as kr,aD as Pr,E as nt,c as Ne,as as Ve,ac as Mr,ag as At,X as Er,L as ee,a9 as Te,aE as Tr,a3 as Lt,ap as Dr,au as Rr,ao as Fr,p as Or,aF as vt}from"./index-CA1Fui7q.js";import{T as st,a as at,b as Z,c as ae}from"./tabs-CEpnL4G3.js";import{F as zt}from"./folder-D5YcqpnH.js";import{F as Ar}from"./file-Bbbn6BNp.js";import{R as Ke}from"./refresh-cw-DtjR2wtF.js";import{G as Lr}from"./grip-vertical-HzV_5Bxa.js";import{S as et}from"./save-CMcfDeBZ.js";import{M as It,a as Wt}from"./minimize-2-ntLFqfDl.js";import{D as Ht}from"./download-DrC4LZTf.js";import{R as ot}from"./rotate-ccw-BBdwJDoS.js";import{E as zr}from"./external-link-BPwYn2lI.js";import{M as tt,T as $t,S as _t,P as Ir,a as bt}from"./slider-DDbSNS1j.js";import{A as Wr,a as Hr}from"./alert-ByRl8DZI.js";import{U as $r}from"./upload-DcuZlmhL.js";import{U as _r}from"./user-DNBgdb1i.js";import{S as qe}from"./switch-bV4XvQVr.js";import"./three-vendor-CaHj5NkI.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=pe("ChevronsDownUp",[["path",{d:"m7 20 5-5 5 5",key:"13a0gw"}],["path",{d:"m7 4 5 5 5-5",key:"1kwcof"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=pe("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=pe("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=pe("GitCommitHorizontal",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=pe("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=pe("Replace",[["path",{d:"M14 4a2 2 0 0 1 2-2",key:"1w2hp7"}],["path",{d:"M16 10a2 2 0 0 1-2-2",key:"shjach"}],["path",{d:"M20 2a2 2 0 0 1 2 2",key:"188mtx"}],["path",{d:"M22 8a2 2 0 0 1-2 2",key:"ddf4tu"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5a3 3 0 0 1 3-3h1",key:"3y3t5z"}],["rect",{x:"2",y:"14",width:"8",height:"8",rx:"2",key:"4rksxw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=pe("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function Yr(){const e=i.useRef([]),r=i.useCallback((o,d,h=10)=>{const u=K.addAction(o,d,h);return e.current.push(u),u},[]),n=i.useCallback((o,d,h=10)=>{const u=K.addFilter(o,d,h);return e.current.push(u),u},[]),s=i.useCallback((o,d)=>K.removeAction(o,d),[]),a=i.useCallback((o,d)=>K.removeFilter(o,d),[]),l=i.useCallback((o,...d)=>{K.doAction(o,...d)},[]),c=i.useCallback((o,d,...h)=>K.applyFilters(o,d,...h),[]);return i.useEffect(()=>()=>{e.current.forEach(o=>{K.getRegisteredActions().forEach(d=>{K.removeAction(d,o)}),K.getRegisteredFilters().forEach(d=>{K.removeFilter(d,o)})}),e.current=[]},[]),{addAction:r,addFilter:n,removeAction:s,removeFilter:a,doAction:l,applyFilters:c}}function yt(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,s=Array(r);n<r;n++)s[n]=e[n];return s}function qr(e){if(Array.isArray(e))return e}function Jr(e,r,n){return(r=rn(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function Qr(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,l,c,o=[],d=!0,h=!1;try{if(l=(n=n.call(e)).next,r!==0)for(;!(d=(s=l.call(n)).done)&&(o.push(s.value),o.length!==r);d=!0);}catch(u){h=!0,a=u}finally{try{if(!d&&n.return!=null&&(c=n.return(),Object(c)!==c))return}finally{if(h)throw a}}return o}}function Zr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wt(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function jt(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?wt(Object(n),!0).forEach(function(s){Jr(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Gr(e,r){if(e==null)return{};var n,s,a=Kr(e,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(s=0;s<l.length;s++)n=l[s],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Kr(e,r){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(r.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function en(e,r){return qr(e)||Qr(e,r)||nn(e,r)||Zr()}function tn(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function rn(e){var r=tn(e,"string");return typeof r=="symbol"?r:r+""}function nn(e,r){if(e){if(typeof e=="string")return yt(e,r);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yt(e,r):void 0}}function sn(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function St(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Ct(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?St(Object(n),!0).forEach(function(s){sn(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function an(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return function(s){return r.reduceRight(function(a,l){return l(a)},s)}}function Se(e){return function r(){for(var n=this,s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return a.length>=e.length?e.apply(this,a):function(){for(var c=arguments.length,o=new Array(c),d=0;d<c;d++)o[d]=arguments[d];return r.apply(n,[].concat(a,o))}}}function We(e){return{}.toString.call(e).includes("Object")}function on(e){return!Object.keys(e).length}function ke(e){return typeof e=="function"}function ln(e,r){return Object.prototype.hasOwnProperty.call(e,r)}function cn(e,r){return We(r)||oe("changeType"),Object.keys(r).some(function(n){return!ln(e,n)})&&oe("changeField"),r}function dn(e){ke(e)||oe("selectorType")}function un(e){ke(e)||We(e)||oe("handlerType"),We(e)&&Object.values(e).some(function(r){return!ke(r)})&&oe("handlersType")}function hn(e){e||oe("initialIsRequired"),We(e)||oe("initialType"),on(e)&&oe("initialContent")}function mn(e,r){throw new Error(e[r]||e.default)}var fn={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},oe=Se(mn)(fn),De={changes:cn,selector:dn,handler:un,initial:hn};function pn(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};De.initial(e),De.handler(r);var n={current:e},s=Se(vn)(n,r),a=Se(xn)(n),l=Se(De.changes)(e),c=Se(gn)(n);function o(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(u){return u};return De.selector(h),h(n.current)}function d(h){an(s,a,l,c)(h)}return[o,d]}function gn(e,r){return ke(r)?r(e.current):r}function xn(e,r){return e.current=Ct(Ct({},e.current),r),r}function vn(e,r,n){return ke(r)?r(e.current):Object.keys(n).forEach(function(s){var a;return(a=r[s])===null||a===void 0?void 0:a.call(r,e.current[s])}),n}var bn={create:pn},yn={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.54.0/min/vs"}};function wn(e){return function r(){for(var n=this,s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return a.length>=e.length?e.apply(this,a):function(){for(var c=arguments.length,o=new Array(c),d=0;d<c;d++)o[d]=arguments[d];return r.apply(n,[].concat(a,o))}}}function jn(e){return{}.toString.call(e).includes("Object")}function Sn(e){return e||Nt("configIsRequired"),jn(e)||Nt("configType"),e.urls?(Cn(),{paths:{vs:e.urls.monacoBase}}):e}function Cn(){console.warn(Xt.deprecation)}function Nn(e,r){throw new Error(e[r]||e.default)}var Xt={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Nt=wn(Nn)(Xt),kn={config:Sn},Pn=function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return function(a){return n.reduceRight(function(l,c){return c(l)},a)}};function Yt(e,r){return Object.keys(r).forEach(function(n){r[n]instanceof Object&&e[n]&&Object.assign(r[n],Yt(e[n],r[n]))}),jt(jt({},e),r)}var Mn={type:"cancelation",msg:"operation is manually canceled"};function Je(e){var r=!1,n=new Promise(function(s,a){e.then(function(l){return r?a(Mn):s(l)}),e.catch(a)});return n.cancel=function(){return r=!0},n}var En=["monaco"],Tn=bn.create({config:yn,isInitialized:!1,resolve:null,reject:null,monaco:null}),qt=en(Tn,2),Me=qt[0],Ue=qt[1];function Dn(e){var r=kn.config(e),n=r.monaco,s=Gr(r,En);Ue(function(a){return{config:Yt(a.config,s),monaco:n}})}function Rn(){var e=Me(function(r){var n=r.monaco,s=r.isInitialized,a=r.resolve;return{monaco:n,isInitialized:s,resolve:a}});if(!e.isInitialized){if(Ue({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),Je(Qe);if(window.monaco&&window.monaco.editor)return Jt(window.monaco),e.resolve(window.monaco),Je(Qe);Pn(Fn,An)(Ln)}return Je(Qe)}function Fn(e){return document.body.appendChild(e)}function On(e){var r=document.createElement("script");return e&&(r.src=e),r}function An(e){var r=Me(function(s){var a=s.config,l=s.reject;return{config:a,reject:l}}),n=On("".concat(r.config.paths.vs,"/loader.js"));return n.onload=function(){return e()},n.onerror=r.reject,n}function Ln(){var e=Me(function(n){var s=n.config,a=n.resolve,l=n.reject;return{config:s,resolve:a,reject:l}}),r=window.require;r.config(e.config),r(["vs/editor/editor.main"],function(n){var s=n.m;Jt(s),e.resolve(s)},function(n){e.reject(n)})}function Jt(e){Me().monaco||Ue({monaco:e})}function zn(){return Me(function(e){var r=e.monaco;return r})}var Qe=new Promise(function(e,r){return Ue({resolve:e,reject:r})}),Qt={config:Dn,init:Rn,__getMonacoInstance:zn},In={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Ze=In,Wn={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Hn=Wn;function $n({children:e}){return de.createElement("div",{style:Hn.container},e)}var _n=$n,Bn=_n;function Vn({width:e,height:r,isEditorReady:n,loading:s,_ref:a,className:l,wrapperProps:c}){return de.createElement("section",{style:{...Ze.wrapper,width:e,height:r},...c},!n&&de.createElement(Bn,null,s),de.createElement("div",{ref:a,style:{...Ze.fullWidth,...!n&&Ze.hide},className:l}))}var Un=Vn,Zt=i.memo(Un);function Xn(e){i.useEffect(e,[])}var Gt=Xn;function Yn(e,r,n=!0){let s=i.useRef(!0);i.useEffect(s.current||!n?()=>{s.current=!1}:e,r)}var J=Yn;function Ce(){}function xe(e,r,n,s){return qn(e,s)||Jn(e,r,n,s)}function qn(e,r){return e.editor.getModel(Kt(e,r))}function Jn(e,r,n,s){return e.editor.createModel(r,n,s?Kt(e,s):void 0)}function Kt(e,r){return e.Uri.parse(r)}function Qn({original:e,modified:r,language:n,originalLanguage:s,modifiedLanguage:a,originalModelPath:l,modifiedModelPath:c,keepCurrentOriginalModel:o=!1,keepCurrentModifiedModel:d=!1,theme:h="light",loading:u="Loading...",options:f={},height:m="100%",width:v="100%",className:y,wrapperProps:P={},beforeMount:H=Ce,onMount:I=Ce}){let[E,M]=i.useState(!1),[S,k]=i.useState(!0),g=i.useRef(null),j=i.useRef(null),z=i.useRef(null),N=i.useRef(I),w=i.useRef(H),T=i.useRef(!1);Gt(()=>{let b=Qt.init();return b.then(L=>(j.current=L)&&k(!1)).catch(L=>(L==null?void 0:L.type)!=="cancelation"&&console.error("Monaco initialization: error:",L)),()=>g.current?A():b.cancel()}),J(()=>{if(g.current&&j.current){let b=g.current.getOriginalEditor(),L=xe(j.current,e||"",s||n||"text",l||"");L!==b.getModel()&&b.setModel(L)}},[l],E),J(()=>{if(g.current&&j.current){let b=g.current.getModifiedEditor(),L=xe(j.current,r||"",a||n||"text",c||"");L!==b.getModel()&&b.setModel(L)}},[c],E),J(()=>{let b=g.current.getModifiedEditor();b.getOption(j.current.editor.EditorOption.readOnly)?b.setValue(r||""):r!==b.getValue()&&(b.executeEdits("",[{range:b.getModel().getFullModelRange(),text:r||"",forceMoveMarkers:!0}]),b.pushUndoStop())},[r],E),J(()=>{var b,L;(L=(b=g.current)==null?void 0:b.getModel())==null||L.original.setValue(e||"")},[e],E),J(()=>{let{original:b,modified:L}=g.current.getModel();j.current.editor.setModelLanguage(b,s||n||"text"),j.current.editor.setModelLanguage(L,a||n||"text")},[n,s,a],E),J(()=>{var b;(b=j.current)==null||b.editor.setTheme(h)},[h],E),J(()=>{var b;(b=g.current)==null||b.updateOptions(f)},[f],E);let $=i.useCallback(()=>{var _;if(!j.current)return;w.current(j.current);let b=xe(j.current,e||"",s||n||"text",l||""),L=xe(j.current,r||"",a||n||"text",c||"");(_=g.current)==null||_.setModel({original:b,modified:L})},[n,r,a,e,s,l,c]),p=i.useCallback(()=>{var b;!T.current&&z.current&&(g.current=j.current.editor.createDiffEditor(z.current,{automaticLayout:!0,...f}),$(),(b=j.current)==null||b.editor.setTheme(h),M(!0),T.current=!0)},[f,h,$]);i.useEffect(()=>{E&&N.current(g.current,j.current)},[E]),i.useEffect(()=>{!S&&!E&&p()},[S,E,p]);function A(){var L,_,X,B;let b=(L=g.current)==null?void 0:L.getModel();o||((_=b==null?void 0:b.original)==null||_.dispose()),d||((X=b==null?void 0:b.modified)==null||X.dispose()),(B=g.current)==null||B.dispose()}return de.createElement(Zt,{width:v,height:m,isEditorReady:E,loading:u,_ref:z,className:y,wrapperProps:P})}var Zn=Qn;i.memo(Zn);function Gn(e){let r=i.useRef();return i.useEffect(()=>{r.current=e},[e]),r.current}var Kn=Gn,Re=new Map;function es({defaultValue:e,defaultLanguage:r,defaultPath:n,value:s,language:a,path:l,theme:c="light",line:o,loading:d="Loading...",options:h={},overrideServices:u={},saveViewState:f=!0,keepCurrentModel:m=!1,width:v="100%",height:y="100%",className:P,wrapperProps:H={},beforeMount:I=Ce,onMount:E=Ce,onChange:M,onValidate:S=Ce}){let[k,g]=i.useState(!1),[j,z]=i.useState(!0),N=i.useRef(null),w=i.useRef(null),T=i.useRef(null),$=i.useRef(E),p=i.useRef(I),A=i.useRef(),b=i.useRef(s),L=Kn(l),_=i.useRef(!1),X=i.useRef(!1);Gt(()=>{let O=Qt.init();return O.then(W=>(N.current=W)&&z(!1)).catch(W=>(W==null?void 0:W.type)!=="cancelation"&&console.error("Monaco initialization: error:",W)),()=>w.current?ge():O.cancel()}),J(()=>{var W,V,x,C;let O=xe(N.current,e||s||"",r||a||"",l||n||"");O!==((W=w.current)==null?void 0:W.getModel())&&(f&&Re.set(L,(V=w.current)==null?void 0:V.saveViewState()),(x=w.current)==null||x.setModel(O),f&&((C=w.current)==null||C.restoreViewState(Re.get(l))))},[l],k),J(()=>{var O;(O=w.current)==null||O.updateOptions(h)},[h],k),J(()=>{!w.current||s===void 0||(w.current.getOption(N.current.editor.EditorOption.readOnly)?w.current.setValue(s):s!==w.current.getValue()&&(X.current=!0,w.current.executeEdits("",[{range:w.current.getModel().getFullModelRange(),text:s,forceMoveMarkers:!0}]),w.current.pushUndoStop(),X.current=!1))},[s],k),J(()=>{var W,V;let O=(W=w.current)==null?void 0:W.getModel();O&&a&&((V=N.current)==null||V.editor.setModelLanguage(O,a))},[a],k),J(()=>{var O;o!==void 0&&((O=w.current)==null||O.revealLine(o))},[o],k),J(()=>{var O;(O=N.current)==null||O.editor.setTheme(c)},[c],k);let B=i.useCallback(()=>{var O;if(!(!T.current||!N.current)&&!_.current){p.current(N.current);let W=l||n,V=xe(N.current,s||e||"",r||a||"",W||"");w.current=(O=N.current)==null?void 0:O.editor.create(T.current,{model:V,automaticLayout:!0,...h},u),f&&w.current.restoreViewState(Re.get(W)),N.current.editor.setTheme(c),o!==void 0&&w.current.revealLine(o),g(!0),_.current=!0}},[e,r,n,s,a,l,h,u,f,c,o]);i.useEffect(()=>{k&&$.current(w.current,N.current)},[k]),i.useEffect(()=>{!j&&!k&&B()},[j,k,B]),b.current=s,i.useEffect(()=>{var O,W;k&&M&&((O=A.current)==null||O.dispose(),A.current=(W=w.current)==null?void 0:W.onDidChangeModelContent(V=>{X.current||M(w.current.getValue(),V)}))},[k,M]),i.useEffect(()=>{if(k){let O=N.current.editor.onDidChangeMarkers(W=>{var x;let V=(x=w.current.getModel())==null?void 0:x.uri;if(V&&W.find(C=>C.path===V.path)){let C=N.current.editor.getModelMarkers({resource:V});S==null||S(C)}});return()=>{O==null||O.dispose()}}return()=>{}},[k,S]);function ge(){var O,W;(O=A.current)==null||O.dispose(),m?f&&Re.set(l,w.current.saveViewState()):(W=w.current.getModel())==null||W.dispose(),w.current.dispose()}return de.createElement(Zt,{width:v,height:y,isEditorReady:k,loading:d,_ref:T,className:P,wrapperProps:H})}var ts=es,rs=i.memo(ts),ns=rs;const er=i.forwardRef(({files:e,selectedFile:r,onFileSelect:n,onFileUpload:s,onFileMove:a,className:l},c)=>{const[o,d]=i.useState(new Set(e.filter(p=>p.type==="folder"&&p.isOpen).map(p=>p.path))),[h,u]=i.useState(null),[f,m]=i.useState(null),[v,y]=i.useState(!1),P=i.useCallback(p=>{const A=[],b=L=>{L.forEach(_=>{_.type==="folder"&&(A.push(_.path),_.children&&b(_.children))})};return b(p),A},[]),H=i.useCallback(()=>{const p=P(e);d(new Set(p))},[e,P]),I=i.useCallback(()=>{d(new Set)},[]),E=i.useCallback(()=>{const p=P(e).filter(A=>o.has(A));d(new Set(p))},[e,o,P]);i.useImperativeHandle(c,()=>({expandAll:H,collapseAll:I,refresh:E}),[H,I,E]);const M=p=>{d(A=>{const b=new Set(A);return b.has(p)?b.delete(p):b.add(p),b})},S=p=>{p.type==="folder"?M(p.path):n&&n(p)},k=(p,A)=>{u(A),p.dataTransfer.effectAllowed="move",p.dataTransfer.setData("text/plain",A.path)},g=(p,A)=>{p.preventDefault(),p.stopPropagation(),A.type==="folder"&&(h==null?void 0:h.path)!==A.path&&m(A.path)},j=p=>{p.preventDefault(),m(null)},z=(p,A)=>{if(p.preventDefault(),p.stopPropagation(),m(null),p.dataTransfer.files.length>0){if(s){const b=A.type==="folder"?A.path:void 0;s(p.dataTransfer.files,b)}}else h&&a&&A.type==="folder"&&h.path!==A.path&&a(h.path,A.path);u(null)},N=p=>{p.preventDefault(),y(!0)},w=p=>{p.currentTarget===p.target&&y(!1)},T=p=>{p.preventDefault(),y(!1),p.dataTransfer.files.length>0&&s&&s(p.dataTransfer.files)},$=(p,A=0)=>{const b=o.has(p.path),L=r===p.path,_=f===p.path,X=A*16+8;return t.jsxs("div",{children:[t.jsxs("div",{className:Ae("flex items-center gap-2 py-1.5 px-2 cursor-pointer rounded-sm hover:bg-accent/50 transition-colors",L&&"bg-accent text-accent-foreground font-medium",_&&"bg-blue-100 border-2 border-blue-500","text-sm"),style:{paddingLeft:`${X}px`},onClick:()=>S(p),draggable:!0,onDragStart:B=>k(B,p),onDragOver:B=>g(B,p),onDragLeave:j,onDrop:B=>z(B,p),children:[p.type==="folder"?t.jsxs(t.Fragment,{children:[b?t.jsx(Rt,{className:"h-4 w-4 flex-shrink-0"}):t.jsx(Sr,{className:"h-4 w-4 flex-shrink-0"}),b?t.jsx(Ur,{className:"h-4 w-4 flex-shrink-0 text-blue-500"}):t.jsx(zt,{className:"h-4 w-4 flex-shrink-0 text-blue-500"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4"}),t.jsx(Ar,{className:"h-4 w-4 flex-shrink-0 text-gray-500"})]}),t.jsx("span",{className:"truncate",children:p.name}),p.type==="file"&&p.language&&t.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:ss(p.language)})]}),p.type==="folder"&&b&&p.children&&t.jsx("div",{children:p.children.map(B=>$(B,A+1))})]},p.path)};return t.jsxs("div",{className:Ae("min-h-[200px] overflow-auto relative",v&&"border-2 border-dashed border-blue-500 bg-blue-50",l),onDragOver:N,onDragLeave:w,onDrop:T,children:[v&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-blue-50/90 z-10 pointer-events-none",children:t.jsx("div",{className:"text-center",children:t.jsx("p",{className:"text-lg font-semibold text-blue-700",children:"Drop files here to upload"})})}),t.jsx("div",{className:"space-y-0.5",children:e.map(p=>$(p))})]})});er.displayName="FileTreeExplorer";function ss(e){return{typescript:"TS",javascript:"JS",css:"CSS",json:"JSON",markdown:"MD",html:"HTML"}[e]||e.toUpperCase()}const as={default:[{name:"components",type:"folder",path:"components",isOpen:!0,children:[{name:"CTASection.tsx",type:"file",path:"components/CTASection.tsx",language:"typescript"},{name:"Footer.tsx",type:"file",path:"components/Footer.tsx",language:"typescript"},{name:"Header.tsx",type:"file",path:"components/Header.tsx",language:"typescript"},{name:"HeroCarousel.tsx",type:"file",path:"components/HeroCarousel.tsx",language:"typescript"},{name:"Product3DViewer.tsx",type:"file",path:"components/Product3DViewer.tsx",language:"typescript"},{name:"ScrollToTop.tsx",type:"file",path:"components/ScrollToTop.tsx",language:"typescript"},{name:"TypingEffect.tsx",type:"file",path:"components/TypingEffect.tsx",language:"typescript"}]},{name:"pages",type:"folder",path:"pages",isOpen:!0,children:[{name:"About.tsx",type:"file",path:"pages/About.tsx",language:"typescript"},{name:"Cart.tsx",type:"file",path:"pages/Cart.tsx",language:"typescript"},{name:"Contact.tsx",type:"file",path:"pages/Contact.tsx",language:"typescript"},{name:"FAQ.tsx",type:"file",path:"pages/FAQ.tsx",language:"typescript"},{name:"Home.tsx",type:"file",path:"pages/Home.tsx",language:"typescript"},{name:"Index.tsx",type:"file",path:"pages/Index.tsx",language:"typescript"},{name:"NotFound.tsx",type:"file",path:"pages/NotFound.tsx",language:"typescript"},{name:"ProductDetail.tsx",type:"file",path:"pages/ProductDetail.tsx",language:"typescript"},{name:"Products.tsx",type:"file",path:"pages/Products.tsx",language:"typescript"}]},{name:"styles",type:"folder",path:"styles",isOpen:!0,children:[{name:"base.css",type:"file",path:"styles/base.css",language:"css"},{name:"theme.css",type:"file",path:"styles/theme.css",language:"css"}]},{name:"index.ts",type:"file",path:"index.ts",language:"typescript"},{name:"theme.json",type:"file",path:"theme.json",language:"json"}]};function os(e){return as[e]||[]}async function kt(e,r){try{const n=await fetch(`/src/themes/${e}/${r}`);if(!n.ok)throw new Error(`Failed to load file: ${r}`);return await n.text()}catch(n){return console.error(`Error loading file ${r}:`,n),is(r)}}function is(e){return e.endsWith(".tsx")?`import React from 'react';

// TODO: Implement ${e}

export default function Component() {
  return (
    <div>
      <h1>${e}</h1>
      <p>This component is not yet implemented.</p>
    </div>
  );
}
`:e.endsWith(".css")?`/* Styles for ${e} */

:root {
  /* Add your theme variables here */
}

/* Add your styles here */
`:e.endsWith(".json")?`{
  "name": "theme-file",
  "path": "${e}"
}
`:`// ${e}

// File content goes here
`}function ls({themeName:e}){const{currentTheme:r,currentThemeName:n}=Be(),s=i.useRef(null),a=i.useRef(null),l=i.useRef(null),[c,o]=i.useState({activeFile:null,files:{},unsavedChanges:new Set,isFullscreen:!1}),[d,h]=i.useState([]),[u,f]=i.useState(""),[m,v]=i.useState(!1),[y,P]=i.useState("idle"),[H,I]=i.useState("vs-dark"),[E,M]=i.useState(14),[S,k]=i.useState(320),[g,j]=i.useState(!1),z=e||n;i.useEffect(()=>{N()},[z]),i.useEffect(()=>{const x=R=>{if(!g)return;const Q=R.clientX;Q>200&&Q<600&&k(Q)},C=()=>{j(!1)};return g&&(document.addEventListener("mousemove",x),document.addEventListener("mouseup",C)),()=>{document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",C)}},[g]);const N=async()=>{v(!0);try{const x=os(z);h(x);const C={},R=w(x);if(R){const Q=await kt(z,R.path);C[R.path]=Q,o(Ee=>({...Ee,files:C,activeFile:R.path}))}}catch(x){console.error("Failed to load file tree:",x)}finally{v(!1)}},w=x=>{for(const C of x){if(C.type==="file")return C;if(C.children){const R=w(C.children);if(R)return R}}return null},T=async x=>{if(x.type!=="file")return;const C=x.path;if(c.files[C])o(R=>({...R,activeFile:C}));else{v(!0);try{const R=await kt(z,C);o(Q=>({...Q,files:{...Q.files,[C]:R},activeFile:C}))}catch(R){console.error("Failed to load file:",R)}finally{v(!1)}}},$=(x,C)=>{x!==void 0&&o(R=>({...R,files:{...R.files,[C]:x},unsavedChanges:new Set([...R.unsavedChanges,C])}))},p=async x=>{P("saving");try{await new Promise(C=>setTimeout(C,1e3)),o(C=>{const R=new Set(C.unsavedChanges);return R.delete(x),{...C,unsavedChanges:R}}),P("saved"),setTimeout(()=>P("idle"),2e3)}catch{P("error"),setTimeout(()=>P("idle"),3e3)}},A=async()=>{for(const x of c.unsavedChanges)await p(x)},b=async(x,C)=>{console.log("Files uploaded:",x,"to:",C)},L=async(x,C)=>{console.log("Move file from:",x,"to:",C)},_=x=>{var R;switch((R=x.split(".").pop())==null?void 0:R.toLowerCase()){case"tsx":case"ts":return"typescript";case"jsx":case"js":return"javascript";case"css":return"css";case"scss":return"scss";case"json":return"json";case"html":return"html";case"md":return"markdown";default:return"plaintext"}},X=(x,C)=>C?x.filter(R=>!!(R.name.toLowerCase().includes(C.toLowerCase())||R.children&&X(R.children,C).length>0)).map(R=>({...R,children:R.children?X(R.children,C):void 0})):x,B=()=>{M(x=>Math.min(x+2,32))},ge=()=>{M(x=>Math.max(x-2,10))},O=()=>{s.current&&s.current.getAction("editor.action.gotoLine").run()},W=()=>{s.current&&s.current.getAction("editor.action.commentLine").run()},V=X(d,u);return t.jsxs("div",{className:`flex gap-4 ${c.isFullscreen?"fixed inset-0 z-50 bg-background p-4":""}`,children:[t.jsx("div",{className:"flex-shrink-0 space-y-4 w-full lg:w-80",style:{width:c.isFullscreen?`${S}px`:void 0},children:t.jsxs(ue,{className:"h-full flex flex-col",children:[t.jsxs(he,{className:"pb-3 flex-shrink-0",children:[t.jsxs(me,{className:"text-lg flex items-center gap-2",children:[t.jsx(zt,{className:"h-5 w-5"}),"File Explorer"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(Le,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),t.jsx(ze,{placeholder:"Search files...",value:u,onChange:x=>f(x.target.value),className:"pl-8"})]}),t.jsx(D,{size:"sm",variant:"outline",onClick:()=>{var x;return(x=a.current)==null?void 0:x.refresh()},title:"Refresh",children:t.jsx(Ke,{className:"h-4 w-4"})}),t.jsx(D,{size:"sm",variant:"outline",title:"Add File",children:t.jsx(Cr,{className:"h-4 w-4"})})]}),t.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[t.jsxs(D,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>{var x;return(x=a.current)==null?void 0:x.expandAll()},children:[t.jsx(Br,{className:"h-3 w-3 mr-1"}),"Expand All"]}),t.jsxs(D,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>{var x;return(x=a.current)==null?void 0:x.collapseAll()},children:[t.jsx(Vr,{className:"h-3 w-3 mr-1"}),"Collapse"]})]})]}),t.jsx(fe,{className:"pt-0 flex-1 overflow-hidden",children:m?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsx(xt,{className:"h-6 w-6 animate-spin"})}):t.jsx("div",{className:"h-full overflow-y-auto overflow-x-auto",children:t.jsx(er,{ref:a,files:V,selectedFile:c.activeFile,onFileSelect:T,onFileUpload:b,onFileMove:L,className:"min-h-[400px]"})})})]})}),c.isFullscreen&&t.jsx("div",{ref:l,className:"w-1 cursor-col-resize hover:bg-blue-500 bg-border transition-colors flex-shrink-0",onMouseDown:()=>j(!0),children:t.jsx("div",{className:"h-full flex items-center justify-center",children:t.jsx(Lr,{className:"h-4 w-4 text-muted-foreground"})})}),t.jsxs("div",{className:"flex-1 space-y-4 min-w-0",children:[t.jsxs(ue,{className:"h-full",children:[t.jsxs(he,{className:"pb-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[t.jsx(Ie,{className:"h-5 w-5 flex-shrink-0"}),t.jsx(me,{className:"text-lg",children:"Code Editor"}),c.activeFile&&t.jsx(te,{variant:"secondary",className:"text-xs truncate max-w-xs",children:c.activeFile})]}),t.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[y==="saving"&&t.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[t.jsx(xt,{className:"h-3 w-3 animate-spin"}),"Saving..."]}),y==="saved"&&t.jsxs("div",{className:"flex items-center gap-1 text-sm text-green-600",children:[t.jsx(Ft,{className:"h-3 w-3"}),"Saved"]}),y==="error"&&t.jsxs("div",{className:"flex items-center gap-1 text-sm text-red-600",children:[t.jsx(rt,{className:"h-3 w-3"}),"Error"]}),c.unsavedChanges.size>0&&t.jsxs(te,{variant:"outline",className:"text-xs",children:[c.unsavedChanges.size," unsaved"]}),t.jsx(D,{size:"sm",variant:"outline",onClick:ge,title:"Zoom Out",children:t.jsx(Ut,{className:"h-4 w-4"})}),t.jsxs("span",{className:"text-xs text-muted-foreground",children:[E,"px"]}),t.jsx(D,{size:"sm",variant:"outline",onClick:B,title:"Zoom In",children:t.jsx(Ot,{className:"h-4 w-4"})}),t.jsx(D,{size:"sm",variant:"outline",onClick:()=>I(x=>x==="vs-dark"?"vs-light":"vs-dark"),title:"Toggle Theme",children:H==="vs-dark"?t.jsx(Nr,{className:"h-4 w-4"}):t.jsx(kr,{className:"h-4 w-4"})}),t.jsx(D,{size:"sm",variant:"outline",onClick:()=>c.activeFile&&p(c.activeFile),disabled:!c.activeFile||!c.unsavedChanges.has(c.activeFile),children:t.jsx(et,{className:"h-4 w-4"})}),t.jsx(D,{size:"sm",variant:"outline",onClick:()=>o(x=>({...x,isFullscreen:!x.isFullscreen})),children:c.isFullscreen?t.jsx(It,{className:"h-4 w-4"}):t.jsx(Wt,{className:"h-4 w-4"})})]})]}),t.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[t.jsx(D,{size:"sm",variant:"outline",onClick:O,title:"Go to Line (Ctrl+G)",children:"Go to Line"}),t.jsx(D,{size:"sm",variant:"outline",onClick:W,title:"Toggle Comment (Ctrl+/)",children:"Toggle Comment"})]})]}),t.jsx(fe,{className:"pt-0",children:c.activeFile?t.jsx("div",{className:`border rounded-md overflow-hidden ${c.isFullscreen?"h-[calc(100vh-220px)]":"h-96"}`,children:t.jsx(ns,{height:"100%",language:_(c.activeFile),value:c.files[c.activeFile]||"",onChange:x=>$(x,c.activeFile),onMount:x=>{s.current=x},theme:H,options:{minimap:{enabled:!0},fontSize:E,lineNumbers:"on",roundedSelection:!0,scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,insertSpaces:!0,wordWrap:"on",folding:!0,foldingStrategy:"auto",showFoldingControls:"always",multiCursorModifier:"ctrlCmd",selectionClipboard:!1,bracketPairColorization:{enabled:!0},guides:{bracketPairs:!0,indentation:!0},quickSuggestions:{other:!0,comments:!0,strings:!0},suggestOnTriggerCharacters:!0,acceptSuggestionOnEnter:"on",tabCompletion:"on",wordBasedSuggestions:!0,parameterHints:{enabled:!0},autoClosingBrackets:"always",autoClosingQuotes:"always",autoClosingOvertype:"always",formatOnPaste:!0,formatOnType:!0,renderWhitespace:"selection",renderControlCharacters:!0,smoothScrolling:!0,cursorBlinking:"smooth",cursorSmoothCaretAnimation:!0}})}):t.jsx("div",{className:"flex items-center justify-center h-96 text-muted-foreground",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Ie,{className:"h-12 w-12 mx-auto mb-4"}),t.jsx("p",{children:"Select a file to start editing"})]})})})]}),!c.isFullscreen&&t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(D,{onClick:A,disabled:c.unsavedChanges.size===0,className:"flex-1",children:[t.jsx(et,{className:"h-4 w-4 mr-2"}),"Save All (",c.unsavedChanges.size,")"]}),t.jsxs(D,{variant:"outline",children:[t.jsx(Pr,{className:"h-4 w-4 mr-2"}),"Preview"]}),t.jsxs(D,{variant:"outline",children:[t.jsx(Ht,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})]})}const cs={desktop:{width:"100%",height:"100%",label:"Desktop"},tablet:{width:"768px",height:"1024px",label:"Tablet"},mobile:{width:"375px",height:"667px",label:"Mobile"}};function Pt({previewUrl:e="/",theme:r,onDeviceChange:n,initialDevice:s="desktop",compactMode:a=!1}){const[l,c]=i.useState(s),[o,d]=i.useState(!1),[h,u]=i.useState(!0),[f,m]=i.useState(!1),[v,y]=i.useState(0),[P,H]=i.useState(100),I=i.useRef(null);i.useEffect(()=>{n==null||n(l)},[l,n]);const E=T=>{c(T),u(!0),setTimeout(()=>{u(!1)},300)},M=()=>{y(T=>T+1),u(!0)},S=()=>{d(!o)},k=()=>{H(T=>Math.min(T+10,200))},g=()=>{H(T=>Math.max(T-10,50))},j=()=>{H(100),c("desktop"),y(T=>T+1),u(!0)},z=()=>{var T;if(u(!1),I.current&&r)try{const $=I.current.contentDocument;if($){const p=$.createElement("div");p.style.cssText=`
            position: fixed;
            bottom: 10px;
            right: 10px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 12px;
            z-index: 9999;
          `,p.textContent=`Theme: ${r}`,(T=$.body)==null||T.appendChild(p)}}catch($){console.warn("Cannot access iframe content:",$)}},N=()=>{window.open(e,"_blank")},w=cs[l];return t.jsx("div",{className:`${o?"fixed inset-0 z-50 bg-white":""}`,children:t.jsxs(ue,{className:`${o?"h-full rounded-none border-0":"h-full"}`,children:[t.jsx(he,{children:t.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[t.jsxs("div",{children:[t.jsxs(me,{className:"flex items-center gap-2",children:[t.jsx(nt,{className:"h-5 w-5"}),"Live Preview"]}),t.jsx(Ne,{children:"Real-time preview of your theme across different devices"})]}),t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[!a&&t.jsxs(D,{variant:"outline",size:"sm",onClick:()=>m(!f),children:[t.jsx(Ie,{className:"h-4 w-4 mr-2"}),f?"Hide":"Show"," Code"]}),t.jsx(D,{variant:"outline",size:"sm",onClick:g,title:"Zoom Out",children:t.jsx(Ut,{className:"h-4 w-4"})}),t.jsxs("span",{className:"text-xs text-muted-foreground min-w-[3rem] text-center",children:[P,"%"]}),t.jsx(D,{variant:"outline",size:"sm",onClick:k,title:"Zoom In",children:t.jsx(Ot,{className:"h-4 w-4"})}),t.jsx(D,{variant:"outline",size:"sm",onClick:j,title:"Reset View",children:t.jsx(ot,{className:"h-4 w-4"})}),t.jsx(D,{variant:"outline",size:"sm",onClick:M,title:"Refresh",children:t.jsx(Ke,{className:`h-4 w-4 ${h?"animate-spin":""}`})}),t.jsx(D,{variant:"outline",size:"sm",onClick:N,title:"Open in New Tab",children:t.jsx(zr,{className:"h-4 w-4"})}),t.jsx(D,{variant:"outline",size:"sm",onClick:S,title:o?"Exit Fullscreen":"Enter Fullscreen",children:o?t.jsx(It,{className:"h-4 w-4"}):t.jsx(Wt,{className:"h-4 w-4"})})]})]})}),t.jsxs(fe,{children:[f&&!a&&t.jsxs("div",{className:"mb-4 p-4 border rounded-md bg-gray-50",children:[t.jsx("p",{className:"text-sm font-medium mb-2",children:"Iframe Source:"}),t.jsx("code",{className:"text-xs bg-white p-2 rounded block overflow-x-auto",children:`<iframe src="${e}" width="${w.width}" height="${w.height}" />`})]}),t.jsxs("div",{className:"mb-4 flex items-center gap-2 flex-wrap",children:[t.jsx(st,{value:l,onValueChange:T=>E(T),children:t.jsxs(at,{children:[t.jsxs(Z,{value:"desktop",className:"gap-2",children:[t.jsx(tt,{className:"h-4 w-4"}),"Desktop"]}),t.jsxs(Z,{value:"tablet",className:"gap-2",children:[t.jsx($t,{className:"h-4 w-4"}),"Tablet"]}),t.jsxs(Z,{value:"mobile",className:"gap-2",children:[t.jsx(_t,{className:"h-4 w-4"}),"Mobile"]})]})}),t.jsxs(te,{variant:"outline",children:[w.width," Ã— ",w.height]}),r&&t.jsxs(te,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:["Theme: ",r]})]}),t.jsxs("div",{className:"relative bg-gray-100 rounded-lg p-4 flex items-center justify-center overflow-auto",style:{minHeight:a?"400px":"600px",height:o?"calc(100vh - 300px)":a?"500px":"700px"},children:[h&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/80 z-10 rounded-lg",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Ke,{className:"h-8 w-8 animate-spin mx-auto mb-2 text-blue-600"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Loading preview..."})]})}),t.jsx("div",{className:`bg-white shadow-2xl rounded-lg overflow-hidden transition-all duration-300 ${l==="desktop"?"w-full h-full":""}`,style:{width:l!=="desktop"?w.width:"100%",height:l!=="desktop"?w.height:"100%",maxWidth:"100%",transform:`scale(${P/100})`,transformOrigin:"center"},children:t.jsx("iframe",{ref:I,src:e,className:"w-full h-full border-0",title:"Live Preview",sandbox:"allow-same-origin allow-scripts allow-forms allow-popups",onLoad:z},v)})]}),t.jsx("div",{className:"mt-4 text-sm text-gray-500 text-center",children:t.jsx("p",{children:"Preview is sandboxed and isolated from the main application"})})]})]})})}function ds(e,r){return i.useReducer((n,s)=>r[n][s]??n,e)}var it="ScrollArea",[tr,Ua]=vr(it),[us,G]=tr(it),rr=i.forwardRef((e,r)=>{const{__scopeScrollArea:n,type:s="hover",dir:a,scrollHideDelay:l=600,...c}=e,[o,d]=i.useState(null),[h,u]=i.useState(null),[f,m]=i.useState(null),[v,y]=i.useState(null),[P,H]=i.useState(null),[I,E]=i.useState(0),[M,S]=i.useState(0),[k,g]=i.useState(!1),[j,z]=i.useState(!1),N=be(r,T=>d(T)),w=br(a);return t.jsx(us,{scope:n,type:s,dir:w,scrollHideDelay:l,scrollArea:o,viewport:h,onViewportChange:u,content:f,onContentChange:m,scrollbarX:v,onScrollbarXChange:y,scrollbarXEnabled:k,onScrollbarXEnabledChange:g,scrollbarY:P,onScrollbarYChange:H,scrollbarYEnabled:j,onScrollbarYEnabledChange:z,onCornerWidthChange:E,onCornerHeightChange:S,children:t.jsx(Pe.div,{dir:w,...c,ref:N,style:{position:"relative","--radix-scroll-area-corner-width":I+"px","--radix-scroll-area-corner-height":M+"px",...e.style}})})});rr.displayName=it;var nr="ScrollAreaViewport",sr=i.forwardRef((e,r)=>{const{__scopeScrollArea:n,children:s,nonce:a,...l}=e,c=G(nr,n),o=i.useRef(null),d=be(r,o,c.onViewportChange);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),t.jsx(Pe.div,{"data-radix-scroll-area-viewport":"",...l,ref:d,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...e.style},children:t.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});sr.displayName=nr;var re="ScrollAreaScrollbar",lt=i.forwardRef((e,r)=>{const{forceMount:n,...s}=e,a=G(re,e.__scopeScrollArea),{onScrollbarXEnabledChange:l,onScrollbarYEnabledChange:c}=a,o=e.orientation==="horizontal";return i.useEffect(()=>(o?l(!0):c(!0),()=>{o?l(!1):c(!1)}),[o,l,c]),a.type==="hover"?t.jsx(hs,{...s,ref:r,forceMount:n}):a.type==="scroll"?t.jsx(ms,{...s,ref:r,forceMount:n}):a.type==="auto"?t.jsx(ar,{...s,ref:r,forceMount:n}):a.type==="always"?t.jsx(ct,{...s,ref:r}):null});lt.displayName=re;var hs=i.forwardRef((e,r)=>{const{forceMount:n,...s}=e,a=G(re,e.__scopeScrollArea),[l,c]=i.useState(!1);return i.useEffect(()=>{const o=a.scrollArea;let d=0;if(o){const h=()=>{window.clearTimeout(d),c(!0)},u=()=>{d=window.setTimeout(()=>c(!1),a.scrollHideDelay)};return o.addEventListener("pointerenter",h),o.addEventListener("pointerleave",u),()=>{window.clearTimeout(d),o.removeEventListener("pointerenter",h),o.removeEventListener("pointerleave",u)}}},[a.scrollArea,a.scrollHideDelay]),t.jsx(_e,{present:n||l,children:t.jsx(ar,{"data-state":l?"visible":"hidden",...s,ref:r})})}),ms=i.forwardRef((e,r)=>{const{forceMount:n,...s}=e,a=G(re,e.__scopeScrollArea),l=e.orientation==="horizontal",c=Ye(()=>d("SCROLL_END"),100),[o,d]=ds("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return i.useEffect(()=>{if(o==="idle"){const h=window.setTimeout(()=>d("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(h)}},[o,a.scrollHideDelay,d]),i.useEffect(()=>{const h=a.viewport,u=l?"scrollLeft":"scrollTop";if(h){let f=h[u];const m=()=>{const v=h[u];f!==v&&(d("SCROLL"),c()),f=v};return h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[a.viewport,l,d,c]),t.jsx(_e,{present:n||o!=="hidden",children:t.jsx(ct,{"data-state":o==="hidden"?"hidden":"visible",...s,ref:r,onPointerEnter:ce(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:ce(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),ar=i.forwardRef((e,r)=>{const n=G(re,e.__scopeScrollArea),{forceMount:s,...a}=e,[l,c]=i.useState(!1),o=e.orientation==="horizontal",d=Ye(()=>{if(n.viewport){const h=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;c(o?h:u)}},10);return ve(n.viewport,d),ve(n.content,d),t.jsx(_e,{present:s||l,children:t.jsx(ct,{"data-state":l?"visible":"hidden",...a,ref:r})})}),ct=i.forwardRef((e,r)=>{const{orientation:n="vertical",...s}=e,a=G(re,e.__scopeScrollArea),l=i.useRef(null),c=i.useRef(0),[o,d]=i.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=dr(o.viewport,o.content),u={...s,sizes:o,onSizesChange:d,hasThumb:h>0&&h<1,onThumbChange:m=>l.current=m,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:m=>c.current=m};function f(m,v){return bs(m,c.current,o,v)}return n==="horizontal"?t.jsx(fs,{...u,ref:r,onThumbPositionChange:()=>{if(a.viewport&&l.current){const m=a.viewport.scrollLeft,v=Mt(m,o,a.dir);l.current.style.transform=`translate3d(${v}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=f(m,a.dir))}}):n==="vertical"?t.jsx(ps,{...u,ref:r,onThumbPositionChange:()=>{if(a.viewport&&l.current){const m=a.viewport.scrollTop,v=Mt(m,o);l.current.style.transform=`translate3d(0, ${v}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=f(m))}}):null}),fs=i.forwardRef((e,r)=>{const{sizes:n,onSizesChange:s,...a}=e,l=G(re,e.__scopeScrollArea),[c,o]=i.useState(),d=i.useRef(null),h=be(r,d,l.onScrollbarXChange);return i.useEffect(()=>{d.current&&o(getComputedStyle(d.current))},[d]),t.jsx(ir,{"data-orientation":"horizontal",...a,ref:h,sizes:n,style:{bottom:0,left:l.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:l.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Xe(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,f)=>{if(l.viewport){const m=l.viewport.scrollLeft+u.deltaX;e.onWheelScroll(m),hr(m,f)&&u.preventDefault()}},onResize:()=>{d.current&&l.viewport&&c&&s({content:l.viewport.scrollWidth,viewport:l.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:$e(c.paddingLeft),paddingEnd:$e(c.paddingRight)}})}})}),ps=i.forwardRef((e,r)=>{const{sizes:n,onSizesChange:s,...a}=e,l=G(re,e.__scopeScrollArea),[c,o]=i.useState(),d=i.useRef(null),h=be(r,d,l.onScrollbarYChange);return i.useEffect(()=>{d.current&&o(getComputedStyle(d.current))},[d]),t.jsx(ir,{"data-orientation":"vertical",...a,ref:h,sizes:n,style:{top:0,right:l.dir==="ltr"?0:void 0,left:l.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Xe(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,f)=>{if(l.viewport){const m=l.viewport.scrollTop+u.deltaY;e.onWheelScroll(m),hr(m,f)&&u.preventDefault()}},onResize:()=>{d.current&&l.viewport&&c&&s({content:l.viewport.scrollHeight,viewport:l.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:$e(c.paddingTop),paddingEnd:$e(c.paddingBottom)}})}})}),[gs,or]=tr(re),ir=i.forwardRef((e,r)=>{const{__scopeScrollArea:n,sizes:s,hasThumb:a,onThumbChange:l,onThumbPointerUp:c,onThumbPointerDown:o,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:u,onResize:f,...m}=e,v=G(re,n),[y,P]=i.useState(null),H=be(r,N=>P(N)),I=i.useRef(null),E=i.useRef(""),M=v.viewport,S=s.content-s.viewport,k=le(u),g=le(d),j=Ye(f,10);function z(N){if(I.current){const w=N.clientX-I.current.left,T=N.clientY-I.current.top;h({x:w,y:T})}}return i.useEffect(()=>{const N=w=>{const T=w.target;(y==null?void 0:y.contains(T))&&k(w,S)};return document.addEventListener("wheel",N,{passive:!1}),()=>document.removeEventListener("wheel",N,{passive:!1})},[M,y,S,k]),i.useEffect(g,[s,g]),ve(y,j),ve(v.content,j),t.jsx(gs,{scope:n,scrollbar:y,hasThumb:a,onThumbChange:le(l),onThumbPointerUp:le(c),onThumbPositionChange:g,onThumbPointerDown:le(o),children:t.jsx(Pe.div,{...m,ref:H,style:{position:"absolute",...m.style},onPointerDown:ce(e.onPointerDown,N=>{N.button===0&&(N.target.setPointerCapture(N.pointerId),I.current=y.getBoundingClientRect(),E.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",v.viewport&&(v.viewport.style.scrollBehavior="auto"),z(N))}),onPointerMove:ce(e.onPointerMove,z),onPointerUp:ce(e.onPointerUp,N=>{const w=N.target;w.hasPointerCapture(N.pointerId)&&w.releasePointerCapture(N.pointerId),document.body.style.webkitUserSelect=E.current,v.viewport&&(v.viewport.style.scrollBehavior=""),I.current=null})})})}),He="ScrollAreaThumb",lr=i.forwardRef((e,r)=>{const{forceMount:n,...s}=e,a=or(He,e.__scopeScrollArea);return t.jsx(_e,{present:n||a.hasThumb,children:t.jsx(xs,{ref:r,...s})})}),xs=i.forwardRef((e,r)=>{const{__scopeScrollArea:n,style:s,...a}=e,l=G(He,n),c=or(He,n),{onThumbPositionChange:o}=c,d=be(r,f=>c.onThumbChange(f)),h=i.useRef(void 0),u=Ye(()=>{h.current&&(h.current(),h.current=void 0)},100);return i.useEffect(()=>{const f=l.viewport;if(f){const m=()=>{if(u(),!h.current){const v=ys(f,o);h.current=v,o()}};return o(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[l.viewport,u,o]),t.jsx(Pe.div,{"data-state":c.hasThumb?"visible":"hidden",...a,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:ce(e.onPointerDownCapture,f=>{const v=f.target.getBoundingClientRect(),y=f.clientX-v.left,P=f.clientY-v.top;c.onThumbPointerDown({x:y,y:P})}),onPointerUp:ce(e.onPointerUp,c.onThumbPointerUp)})});lr.displayName=He;var dt="ScrollAreaCorner",cr=i.forwardRef((e,r)=>{const n=G(dt,e.__scopeScrollArea),s=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&s?t.jsx(vs,{...e,ref:r}):null});cr.displayName=dt;var vs=i.forwardRef((e,r)=>{const{__scopeScrollArea:n,...s}=e,a=G(dt,n),[l,c]=i.useState(0),[o,d]=i.useState(0),h=!!(l&&o);return ve(a.scrollbarX,()=>{var f;const u=((f=a.scrollbarX)==null?void 0:f.offsetHeight)||0;a.onCornerHeightChange(u),d(u)}),ve(a.scrollbarY,()=>{var f;const u=((f=a.scrollbarY)==null?void 0:f.offsetWidth)||0;a.onCornerWidthChange(u),c(u)}),h?t.jsx(Pe.div,{...s,ref:r,style:{width:l,height:o,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function $e(e){return e?parseInt(e,10):0}function dr(e,r){const n=e/r;return isNaN(n)?0:n}function Xe(e){const r=dr(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-n)*r;return Math.max(s,18)}function bs(e,r,n,s="ltr"){const a=Xe(n),l=a/2,c=r||l,o=a-c,d=n.scrollbar.paddingStart+c,h=n.scrollbar.size-n.scrollbar.paddingEnd-o,u=n.content-n.viewport,f=s==="ltr"?[0,u]:[u*-1,0];return ur([d,h],f)(e)}function Mt(e,r,n="ltr"){const s=Xe(r),a=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,l=r.scrollbar.size-a,c=r.content-r.viewport,o=l-s,d=n==="ltr"?[0,c]:[c*-1,0],h=wr(e,d);return ur([0,c],[0,o])(h)}function ur(e,r){return n=>{if(e[0]===e[1]||r[0]===r[1])return r[0];const s=(r[1]-r[0])/(e[1]-e[0]);return r[0]+s*(n-e[0])}}function hr(e,r){return e>0&&e<r}var ys=(e,r=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},s=0;return function a(){const l={left:e.scrollLeft,top:e.scrollTop},c=n.left!==l.left,o=n.top!==l.top;(c||o)&&r(),n=l,s=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(s)};function Ye(e,r){const n=le(e),s=i.useRef(0);return i.useEffect(()=>()=>window.clearTimeout(s.current),[]),i.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(n,r)},[n,r])}function ve(e,r){const n=le(r);yr(()=>{let s=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(s),a.unobserve(e)}}},[e,n])}var mr=rr,ws=sr,js=cr;const ut=i.forwardRef(({className:e,children:r,...n},s)=>t.jsxs(mr,{ref:s,className:Ae("relative overflow-hidden",e),...n,children:[t.jsx(ws,{className:"h-full w-full rounded-[inherit]",children:r}),t.jsx(fr,{}),t.jsx(js,{})]}));ut.displayName=mr.displayName;const fr=i.forwardRef(({className:e,orientation:r="vertical",...n},s)=>t.jsx(lt,{ref:s,orientation:r,className:Ae("flex touch-none select-none transition-colors",r==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",r==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:t.jsx(lr,{className:"relative flex-1 rounded-full bg-border"})}));fr.displayName=lt.displayName;class Ss{constructor(){gt(this,"states",new Map)}generateCommitId(){return`commit_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}getState(r){return this.states.has(r)||this.states.set(r,{currentCommitId:null,commits:new Map,branches:new Map([["main",null]]),currentBranch:"main",stagedChanges:[]}),this.states.get(r)}stageChange(r,n){const s=this.getState(r),a=s.stagedChanges.findIndex(l=>l.path===n.path);a>=0?s.stagedChanges[a]=n:s.stagedChanges.push(n)}unstageChange(r,n){const s=this.getState(r);s.stagedChanges=s.stagedChanges.filter(a=>a.path!==n)}getStagedChanges(r){return this.getState(r).stagedChanges}commit(r,n,s="System"){const a=this.getState(r);if(a.stagedChanges.length===0)throw new Error("No changes to commit");const l=this.generateCommitId(),c={id:l,message:n,author:s,timestamp:Date.now(),changes:[...a.stagedChanges],parentId:a.currentCommitId,themeName:r};return a.commits.set(l,c),a.currentCommitId=l,a.branches.set(a.currentBranch,l),a.stagedChanges=[],c}getCommit(r,n){return this.getState(r).commits.get(n)}getCommitHistory(r,n=50){const s=this.getState(r),a=[];let l=s.currentCommitId,c=0;for(;l&&c<n;){const o=s.commits.get(l);if(!o)break;a.push(o),l=o.parentId,c++}return a}rollback(r,n){const s=this.getState(r),a=s.commits.get(n);if(!a)throw new Error(`Commit ${n} not found`);return s.currentCommitId=n,s.branches.set(s.currentBranch,n),a}createBranch(r,n){const s=this.getState(r);if(s.branches.has(n))throw new Error(`Branch ${n} already exists`);s.branches.set(n,s.currentCommitId)}switchBranch(r,n){const s=this.getState(r);if(!s.branches.has(n))throw new Error(`Branch ${n} not found`);s.currentBranch=n,s.currentCommitId=s.branches.get(n)||null}getBranches(r){return Array.from(this.getState(r).branches.keys())}getCurrentBranch(r){return this.getState(r).currentBranch}getDiff(r,n,s){const a=this.getState(r),l=a.commits.get(n),c=a.commits.get(s);if(!l||!c)throw new Error("One or both commits not found");const o=new Set([...l.changes.map(h=>h.path),...c.changes.map(h=>h.path)]),d=[];return o.forEach(h=>{const u=l.changes.find(m=>m.path===h),f=c.changes.find(m=>m.path===h);!u&&f?d.push(f):u&&!f?d.push({path:h,oldContent:u.newContent,newContent:null,status:"deleted"}):u&&f&&u.newContent!==f.newContent&&d.push({path:h,oldContent:u.newContent,newContent:f.newContent,status:"modified"})}),d}exportHistory(r){const n=this.getState(r),s={currentCommitId:n.currentCommitId,commits:Array.from(n.commits.entries()),branches:Array.from(n.branches.entries()),currentBranch:n.currentBranch,exportedAt:new Date().toISOString()};return JSON.stringify(s,null,2)}importHistory(r,n){try{const s=JSON.parse(n),a=this.getState(r);a.currentCommitId=s.currentCommitId,a.commits=new Map(s.commits),a.branches=new Map(s.branches),a.currentBranch=s.currentBranch}catch(s){throw new Error("Failed to import version history: "+s.message)}}reset(r){this.states.delete(r)}getStats(r){const n=this.getState(r);return{totalCommits:n.commits.size,totalBranches:n.branches.size,currentCommit:n.currentCommitId,stagedChanges:n.stagedChanges.length}}}const Y=new Ss;function Cs(){const{currentThemeName:e}=Be(),[r,n]=i.useState([]),[s,a]=i.useState([]),[l,c]=i.useState(null),o=i.useCallback(()=>{if(!e)return;n(Y.getStagedChanges(e)),a(Y.getCommitHistory(e));const S=Y.getStats(e);c(S.currentCommit)},[e]);i.useEffect(()=>{o()},[o]);const d=i.useCallback(S=>{e&&(Y.stageChange(e,S),o())},[e,o]),h=i.useCallback(S=>{e&&(Y.unstageChange(e,S),o())},[e,o]),u=i.useCallback((S,k="User")=>{if(!e)throw new Error("No theme selected");const g=Y.commit(e,S,k);return o(),g},[e,o]),f=i.useCallback(S=>{if(!e)throw new Error("No theme selected");const k=Y.rollback(e,S);return o(),k},[e,o]),m=i.useCallback((S,k)=>{if(!e)throw new Error("No theme selected");return Y.getDiff(e,S,k)},[e]),v=i.useCallback(S=>{if(!e)throw new Error("No theme selected");Y.createBranch(e,S),o()},[e,o]),y=i.useCallback(S=>{if(!e)throw new Error("No theme selected");Y.switchBranch(e,S),o()},[e,o]),P=i.useCallback(()=>e?Y.getBranches(e):[],[e]),H=i.useCallback(()=>e?Y.getCurrentBranch(e):"main",[e]),I=i.useCallback(()=>{if(!e)throw new Error("No theme selected");return Y.exportHistory(e)},[e]),E=i.useCallback(S=>{if(!e)throw new Error("No theme selected");Y.importHistory(e,S),o()},[e,o]),M=i.useCallback(()=>e?Y.getStats(e):{totalCommits:0,totalBranches:0,currentCommit:null,stagedChanges:0},[e]);return{stagedChanges:r,history:s,currentCommit:l,stageChange:d,unstageChange:h,commit:u,rollback:f,getDiff:m,createBranch:v,switchBranch:y,getBranches:P,getCurrentBranch:H,exportHistory:I,importHistory:E,getStats:M,refreshState:o}}function U(e){const r=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&r==="[object Date]"?new e.constructor(+e):typeof e=="number"||r==="[object Number]"||typeof e=="string"||r==="[object String]"?new Date(e):new Date(NaN)}function Ns(e,r){return e instanceof Date?new e.constructor(r):new Date(r)}const Fe=43200,Et=1440;let ks={};function Ps(){return ks}function Tt(e){const r=U(e),n=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return n.setUTCFullYear(r.getFullYear()),+e-+n}function Oe(e,r){const n=U(e),s=U(r),a=n.getTime()-s.getTime();return a<0?-1:a>0?1:a}function Ms(e){return Ns(e,Date.now())}function Es(e,r){const n=U(e),s=U(r),a=n.getFullYear()-s.getFullYear(),l=n.getMonth()-s.getMonth();return a*12+l}function Ts(e){return r=>{const s=(e?Math[e]:Math.trunc)(r);return s===0?0:s}}function Ds(e,r){return+U(e)-+U(r)}function Rs(e){const r=U(e);return r.setHours(23,59,59,999),r}function Fs(e){const r=U(e),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function Os(e){const r=U(e);return+Rs(r)==+Fs(r)}function As(e,r){const n=U(e),s=U(r),a=Oe(n,s),l=Math.abs(Es(n,s));let c;if(l<1)c=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-a*l);let o=Oe(n,s)===-a;Os(U(e))&&l===1&&Oe(e,s)===1&&(o=!1),c=a*(l-Number(o))}return c===0?0:c}function Ls(e,r,n){const s=Ds(e,r)/1e3;return Ts(n==null?void 0:n.roundingMethod)(s)}const zs={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Is=(e,r,n)=>{let s;const a=zs[e];return typeof a=="string"?s=a:r===1?s=a.one:s=a.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function Ge(e){return(r={})=>{const n=r.width?String(r.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Ws={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Hs={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},$s={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},_s={date:Ge({formats:Ws,defaultWidth:"full"}),time:Ge({formats:Hs,defaultWidth:"full"}),dateTime:Ge({formats:$s,defaultWidth:"full"})},Bs={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Vs=(e,r,n,s)=>Bs[e];function we(e){return(r,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let a;if(s==="formatting"&&e.formattingValues){const c=e.defaultFormattingWidth||e.defaultWidth,o=n!=null&&n.width?String(n.width):c;a=e.formattingValues[o]||e.formattingValues[c]}else{const c=e.defaultWidth,o=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[o]||e.values[c]}const l=e.argumentCallback?e.argumentCallback(r):r;return a[l]}}const Us={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Xs={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ys={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},qs={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Js={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Qs={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Zs=(e,r)=>{const n=Number(e),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Gs={ordinalNumber:Zs,era:we({values:Us,defaultWidth:"wide"}),quarter:we({values:Xs,defaultWidth:"wide",argumentCallback:e=>e-1}),month:we({values:Ys,defaultWidth:"wide"}),day:we({values:qs,defaultWidth:"wide"}),dayPeriod:we({values:Js,defaultWidth:"wide",formattingValues:Qs,defaultFormattingWidth:"wide"})};function je(e){return(r,n={})=>{const s=n.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],l=r.match(a);if(!l)return null;const c=l[0],o=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(o)?ea(o,f=>f.test(c)):Ks(o,f=>f.test(c));let h;h=e.valueCallback?e.valueCallback(d):d,h=n.valueCallback?n.valueCallback(h):h;const u=r.slice(c.length);return{value:h,rest:u}}}function Ks(e,r){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&r(e[n]))return n}function ea(e,r){for(let n=0;n<e.length;n++)if(r(e[n]))return n}function ta(e){return(r,n={})=>{const s=r.match(e.matchPattern);if(!s)return null;const a=s[0],l=r.match(e.parsePattern);if(!l)return null;let c=e.valueCallback?e.valueCallback(l[0]):l[0];c=n.valueCallback?n.valueCallback(c):c;const o=r.slice(a.length);return{value:c,rest:o}}}const ra=/^(\d+)(th|st|nd|rd)?/i,na=/\d+/i,sa={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},aa={any:[/^b/i,/^(a|c)/i]},oa={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ia={any:[/1/i,/2/i,/3/i,/4/i]},la={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ca={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},da={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ua={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ha={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ma={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},fa={ordinalNumber:ta({matchPattern:ra,parsePattern:na,valueCallback:e=>parseInt(e,10)}),era:je({matchPatterns:sa,defaultMatchWidth:"wide",parsePatterns:aa,defaultParseWidth:"any"}),quarter:je({matchPatterns:oa,defaultMatchWidth:"wide",parsePatterns:ia,defaultParseWidth:"any",valueCallback:e=>e+1}),month:je({matchPatterns:la,defaultMatchWidth:"wide",parsePatterns:ca,defaultParseWidth:"any"}),day:je({matchPatterns:da,defaultMatchWidth:"wide",parsePatterns:ua,defaultParseWidth:"any"}),dayPeriod:je({matchPatterns:ha,defaultMatchWidth:"any",parsePatterns:ma,defaultParseWidth:"any"})},pa={code:"en-US",formatDistance:Is,formatLong:_s,formatRelative:Vs,localize:Gs,match:fa,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ga(e,r,n){const s=Ps(),a=(n==null?void 0:n.locale)??s.locale??pa,l=2520,c=Oe(e,r);if(isNaN(c))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:c});let d,h;c>0?(d=U(r),h=U(e)):(d=U(e),h=U(r));const u=Ls(h,d),f=(Tt(h)-Tt(d))/1e3,m=Math.round((u-f)/60);let v;if(m<2)return n!=null&&n.includeSeconds?u<5?a.formatDistance("lessThanXSeconds",5,o):u<10?a.formatDistance("lessThanXSeconds",10,o):u<20?a.formatDistance("lessThanXSeconds",20,o):u<40?a.formatDistance("halfAMinute",0,o):u<60?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",1,o):m===0?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",m,o);if(m<45)return a.formatDistance("xMinutes",m,o);if(m<90)return a.formatDistance("aboutXHours",1,o);if(m<Et){const y=Math.round(m/60);return a.formatDistance("aboutXHours",y,o)}else{if(m<l)return a.formatDistance("xDays",1,o);if(m<Fe){const y=Math.round(m/Et);return a.formatDistance("xDays",y,o)}else if(m<Fe*2)return v=Math.round(m/Fe),a.formatDistance("aboutXMonths",v,o)}if(v=As(h,d),v<12){const y=Math.round(m/Fe);return a.formatDistance("xMonths",y,o)}else{const y=v%12,P=Math.trunc(v/12);return y<3?a.formatDistance("aboutXYears",P,o):y<9?a.formatDistance("overXYears",P,o):a.formatDistance("almostXYears",P+1,o)}}function xa(e,r){return ga(e,Ms(e),r)}function va(){const{history:e,currentCommit:r,stagedChanges:n,rollback:s,exportHistory:a,importHistory:l,getStats:c}=Cs(),[o,d]=i.useState(null),[h,u]=i.useState(!1),[f,m]=i.useState(""),[v,y]=i.useState({type:null,message:""}),P=c(),H=async M=>{try{await s(M),y({type:"success",message:`Successfully rolled back to commit ${M.slice(0,8)}`}),setTimeout(()=>y({type:null,message:""}),3e3)}catch(S){y({type:"error",message:`Failed to rollback: ${S.message}`})}},I=()=>{const M=a(),S=new Blob([M],{type:"application/json"}),k=URL.createObjectURL(S),g=document.createElement("a");g.href=k,g.download=`theme-history-${Date.now()}.json`,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(k)},E=()=>{try{l(f),u(!1),m(""),y({type:"success",message:"Version history imported successfully"})}catch(M){y({type:"error",message:`Failed to import: ${M.message}`})}};return t.jsx("div",{className:"space-y-6",children:t.jsxs(ue,{children:[t.jsx(he,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs(me,{className:"flex items-center gap-2",children:[t.jsx(Vt,{className:"h-5 w-5"}),"Version History"]}),t.jsx(Ne,{children:"Track and manage theme changes with git-like version control"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(D,{variant:"outline",size:"sm",onClick:I,children:[t.jsx(Ht,{className:"h-4 w-4 mr-2"}),"Export"]}),t.jsxs(D,{variant:"outline",size:"sm",onClick:()=>u(!h),children:[t.jsx($r,{className:"h-4 w-4 mr-2"}),"Import"]})]})]})}),t.jsxs(fe,{children:[h&&t.jsxs("div",{className:"mb-4 p-4 border rounded-md bg-gray-50",children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Import History JSON"}),t.jsx("textarea",{className:"w-full h-32 p-2 border rounded font-mono text-sm",value:f,onChange:M=>m(M.target.value),placeholder:"Paste exported history JSON here..."}),t.jsxs("div",{className:"flex gap-2 mt-2",children:[t.jsx(D,{size:"sm",onClick:E,children:"Import"}),t.jsx(D,{size:"sm",variant:"outline",onClick:()=>u(!1),children:"Cancel"})]})]}),v.type&&t.jsxs(Wr,{variant:v.type==="error"?"destructive":"default",className:"mb-4",children:[v.type==="success"?t.jsx(Ft,{className:"h-4 w-4"}):t.jsx(rt,{className:"h-4 w-4"}),t.jsx(Hr,{children:v.message})]}),t.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[t.jsxs("div",{className:"p-4 border rounded-md bg-blue-50",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:P.totalCommits}),t.jsx("div",{className:"text-sm text-blue-700",children:"Total Commits"})]}),t.jsxs("div",{className:"p-4 border rounded-md bg-purple-50",children:[t.jsx("div",{className:"text-2xl font-bold text-purple-600",children:P.totalBranches}),t.jsx("div",{className:"text-sm text-purple-700",children:"Branches"})]}),t.jsxs("div",{className:"p-4 border rounded-md bg-orange-50",children:[t.jsx("div",{className:"text-2xl font-bold text-orange-600",children:P.stagedChanges}),t.jsx("div",{className:"text-sm text-orange-700",children:"Staged Changes"})]}),t.jsxs("div",{className:"p-4 border rounded-md bg-green-50",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:r?r.slice(0,8):"None"}),t.jsx("div",{className:"text-sm text-green-700",children:"Current Commit"})]})]}),t.jsx(Ve,{className:"my-4"}),t.jsx(ut,{className:"h-[500px]",children:t.jsx("div",{className:"space-y-3",children:e.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(Bt,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),t.jsx("p",{children:"No commits yet"}),t.jsx("p",{className:"text-sm",children:"Make changes and commit to start tracking history"})]}):e.map(M=>t.jsx(ba,{commit:M,isActive:M.id===r,isSelected:M.id===o,onSelect:()=>d(M.id),onRollback:()=>H(M.id)},M.id))})})]})]})})}function ba({commit:e,isActive:r,isSelected:n,onSelect:s,onRollback:a}){const l=xa(new Date(e.timestamp),{addSuffix:!0});return t.jsxs("div",{className:`p-4 border rounded-md cursor-pointer transition-colors ${n?"border-blue-500 bg-blue-50":r?"border-green-500 bg-green-50":"hover:bg-gray-50"}`,onClick:s,children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(Bt,{className:"h-4 w-4 text-gray-500"}),t.jsx("code",{className:"text-sm font-mono bg-gray-100 px-2 py-1 rounded",children:e.id.slice(0,8)}),r&&t.jsx(te,{variant:"outline",className:"bg-green-100 text-green-700 border-green-300",children:"Current"})]}),t.jsx("p",{className:"font-medium mb-2",children:e.message}),t.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(_r,{className:"h-3 w-3"}),e.author]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Mr,{className:"h-3 w-3"}),l]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(At,{className:"h-3 w-3"}),e.changes.length," file",e.changes.length!==1?"s":""]})]})]}),!r&&t.jsxs(D,{size:"sm",variant:"outline",onClick:c=>{c.stopPropagation(),a()},children:[t.jsx(ot,{className:"h-4 w-4 mr-1"}),"Rollback"]})]}),n&&t.jsxs("div",{className:"mt-3 pt-3 border-t",children:[t.jsx("p",{className:"text-sm font-medium mb-2",children:"Changes:"}),t.jsx("div",{className:"space-y-1",children:e.changes.map((c,o)=>t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx(te,{variant:"outline",className:`
                    ${c.status==="added"?"bg-green-50 text-green-700 border-green-200":""}
                    ${c.status==="modified"?"bg-blue-50 text-blue-700 border-blue-200":""}
                    ${c.status==="deleted"?"bg-red-50 text-red-700 border-red-200":""}
                  `,children:c.status}),t.jsx("code",{className:"text-xs",children:c.path})]},o))})]})]})}function ya({files:e=[],onSearch:r,onReplace:n,onClose:s}){const[a,l]=i.useState(""),[c,o]=i.useState(""),[d,h]=i.useState([]),[u,f]=i.useState(new Set),[m,v]=i.useState(-1),[y,P]=i.useState({caseSensitive:!1,wholeWord:!1,regex:!1,includeFiles:"*",excludeFiles:""}),H=i.useCallback(()=>{if(!a){h([]);return}if(r){const z=r(a,y);h(z),v(z.length>0?0:-1);return}const g=[],j=wa(a,y);e.forEach(z=>{if(!ja(z.path,y))return;z.content.split(`
`).forEach((w,T)=>{let $;const p=new RegExp(j,y.caseSensitive?"g":"gi");for(;($=p.exec(w))!==null;)g.push({file:z.path,line:T+1,column:$.index+1,match:$[0],context:w})})}),h(g),v(g.length>0?0:-1),f(new Set)},[a,y,e,r]),I=i.useCallback(()=>{if(n){const g=Array.from(u).map(j=>d[j]);n(g,c),h([]),f(new Set),l(""),o("")}},[d,u,c,n]),E=g=>{if(d.length===0)return;let j=m;g==="next"?j=(m+1)%d.length:j=m===0?d.length-1:m-1,v(j)},M=g=>{const j=new Set(u);j.has(g)?j.delete(g):j.add(g),f(j)},S=()=>{f(new Set(d.map((g,j)=>j)))},k=()=>{f(new Set)};return t.jsxs(ue,{children:[t.jsx(he,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs(me,{className:"flex items-center gap-2",children:[t.jsx(Le,{className:"h-5 w-5"}),"Search & Replace"]}),t.jsx(Ne,{children:"Find and replace text across your theme files"})]}),s&&t.jsx(D,{variant:"ghost",size:"sm",onClick:s,children:t.jsx(Er,{className:"h-4 w-4"})})]})}),t.jsxs(fe,{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(ee,{children:"Search For"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(ze,{value:a,onChange:g=>l(g.target.value),onKeyDown:g=>g.key==="Enter"&&H(),placeholder:"Enter search query...",className:"flex-1"}),t.jsxs(D,{onClick:H,children:[t.jsx(Le,{className:"h-4 w-4 mr-2"}),"Find"]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ee,{children:"Replace With"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(ze,{value:c,onChange:g=>o(g.target.value),placeholder:"Enter replacement...",className:"flex-1"}),t.jsxs(D,{onClick:I,disabled:u.size===0,children:[t.jsx(Xr,{className:"h-4 w-4 mr-2"}),"Replace (",u.size,")"]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Te,{id:"caseSensitive",checked:y.caseSensitive,onCheckedChange:g=>P({...y,caseSensitive:g})}),t.jsx("label",{htmlFor:"caseSensitive",className:"text-sm cursor-pointer",children:"Case sensitive"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Te,{id:"wholeWord",checked:y.wholeWord,onCheckedChange:g=>P({...y,wholeWord:g})}),t.jsx("label",{htmlFor:"wholeWord",className:"text-sm cursor-pointer",children:"Whole word"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Te,{id:"regex",checked:y.regex,onCheckedChange:g=>P({...y,regex:g})}),t.jsx("label",{htmlFor:"regex",className:"text-sm cursor-pointer",children:"Use regex"})]})]}),t.jsx(Ve,{}),d.length>0&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(te,{variant:"outline",children:[d.length," match",d.length!==1?"es":""]}),m>=0&&t.jsxs("span",{className:"text-sm text-muted-foreground",children:[m+1," of ",d.length]})]}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx(D,{variant:"outline",size:"sm",onClick:S,children:"Select All"}),t.jsx(D,{variant:"outline",size:"sm",onClick:k,children:"Deselect All"}),t.jsx(D,{variant:"outline",size:"icon",onClick:()=>E("prev"),children:t.jsx(Tr,{className:"h-4 w-4"})}),t.jsx(D,{variant:"outline",size:"icon",onClick:()=>E("next"),children:t.jsx(Rt,{className:"h-4 w-4"})})]})]}),t.jsx(ut,{className:"h-[400px] border rounded-md",children:t.jsx("div",{className:"p-2 space-y-2",children:d.map((g,j)=>t.jsx("div",{className:`p-3 rounded-md border cursor-pointer transition-colors ${j===m?"bg-blue-50 border-blue-300":u.has(j)?"bg-green-50 border-green-300":"hover:bg-gray-50"}`,onClick:()=>M(j),children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"flex-shrink-0 mt-1",children:t.jsx(Te,{checked:u.has(j),onCheckedChange:()=>M(j),onClick:z=>z.stopPropagation()})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(At,{className:"h-4 w-4 flex-shrink-0"}),t.jsx("span",{className:"text-sm font-medium truncate",children:g.file}),t.jsxs(te,{variant:"outline",className:"ml-auto flex-shrink-0",children:["Line ",g.line,":",g.column]})]}),t.jsx("code",{className:"block text-xs bg-white p-2 rounded border overflow-x-auto",children:Sa(g.context,g.match,a)})]})]})},j))})})]}),a&&d.length===0&&t.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[t.jsx(rt,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),t.jsxs("p",{children:['No matches found for "',a,'"']})]})]})]})}function wa(e,r){let n=e;return r.regex||(n=pr(e)),r.wholeWord&&(n=`\\b${n}\\b`),n}function pr(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ja(e,r){if(r.excludeFiles){const n=r.excludeFiles.split(",").map(s=>s.trim());for(const s of n)if(Dt(e,s))return!1}return r.includeFiles&&r.includeFiles!=="*"?r.includeFiles.split(",").map(s=>s.trim()).some(s=>Dt(e,s)):!0}function Dt(e,r){const n=r.replace(/\./g,"\\.").replace(/\*/g,".*").replace(/\?/g,".");return new RegExp(`^${n}$`).test(e)}function Sa(e,r,n){if(!n)return e;const s=e.split(new RegExp(`(${pr(r)})`,"gi"));return t.jsx(t.Fragment,{children:s.map((a,l)=>a.toLowerCase()===r.toLowerCase()?t.jsx("span",{className:"bg-yellow-200 font-semibold",children:a},l):t.jsx("span",{children:a},l))})}function Ca({onConfigChange:e,showPreview:r=!0}){var P,H,I,E,M,S,k,g,j,z,N,w,T,$,p,A,b,L,_,X,B,ge,O,W,V,x,C,R,Q,Ee,ht,mt,ft,pt;const{currentTheme:n,currentThemeName:s}=Be(),[a,l]=i.useState({colors:{primary:"#3b82f6",secondary:"#64748b",accent:"#f59e0b",background:"#ffffff",foreground:"#1f2937"},typography:{fontFamily:"Inter, system-ui, sans-serif",fontSize:{base:"16px",sm:"14px",lg:"18px",xl:"20px"}},layout:{maxWidth:"1200px",spacing:{xs:"0.5rem",sm:"1rem",md:"1.5rem",lg:"2rem",xl:"3rem"}},features:{darkMode:!0,animations:!0,lazyLoading:!0}}),[c,o]=i.useState("desktop");i.useState(!1);const[d,h]=i.useState(!1);i.useEffect(()=>{n!=null&&n.config&&l({...a,...n.config})},[n]);const u=(F,ne)=>{const se={...a},q=F.split(".");let ie=se;for(let ye=0;ye<q.length-1;ye++)ie[q[ye]]||(ie[q[ye]]={}),ie=ie[q[ye]];ie[q[q.length-1]]=ne,l(se),h(!0),e==null||e(se)},f=()=>{n!=null&&n.config&&(l({...n.config}),h(!1))},m=async()=>{console.log("Saving theme config:",a),h(!1);const F=document.documentElement;a.colors&&Object.entries(a.colors).forEach(([ne,se])=>{se&&F.style.setProperty(`--theme-${ne}`,se)})},v=({label:F,value:ne,onChange:se})=>t.jsxs("div",{className:"space-y-2",children:[t.jsx(ee,{className:"text-sm font-medium",children:F}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-8 h-8 rounded border border-border cursor-pointer",style:{backgroundColor:ne},onClick:()=>{const q=document.createElement("input");q.type="color",q.value=ne,q.onchange=ie=>se(ie.target.value),q.click()}}),t.jsx(ze,{value:ne,onChange:q=>se(q.target.value),className:"flex-1 font-mono text-sm",placeholder:"#000000"})]})]}),y=F=>{switch(F){case"desktop":return tt;case"tablet":return $t;case"mobile":return _t;default:return tt}};return t.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[t.jsx("div",{className:"lg:col-span-1 space-y-6",children:t.jsxs(ue,{children:[t.jsxs(he,{children:[t.jsxs(me,{className:"flex items-center gap-2",children:[t.jsx(Lt,{className:"h-5 w-5"}),"Theme Customizer"]}),t.jsxs(Ne,{children:["Customize the appearance of ",s]})]}),t.jsxs(fe,{children:[t.jsxs(st,{defaultValue:"colors",className:"space-y-4",children:[t.jsxs(at,{className:"grid w-full grid-cols-4",children:[t.jsx(Z,{value:"colors",children:t.jsx(Dr,{className:"h-4 w-4"})}),t.jsx(Z,{value:"typography",children:t.jsx(Rr,{className:"h-4 w-4"})}),t.jsx(Z,{value:"layout",children:t.jsx(Ir,{className:"h-4 w-4"})}),t.jsx(Z,{value:"features",children:t.jsx(Fr,{className:"h-4 w-4"})})]}),t.jsx(ae,{value:"colors",className:"space-y-4",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"font-medium",children:"Color Scheme"}),t.jsx(v,{label:"Primary Color",value:((P=a.colors)==null?void 0:P.primary)||"#3b82f6",onChange:F=>u("colors.primary",F)}),t.jsx(v,{label:"Secondary Color",value:((H=a.colors)==null?void 0:H.secondary)||"#64748b",onChange:F=>u("colors.secondary",F)}),t.jsx(v,{label:"Accent Color",value:((I=a.colors)==null?void 0:I.accent)||"#f59e0b",onChange:F=>u("colors.accent",F)}),t.jsx(v,{label:"Background",value:((E=a.colors)==null?void 0:E.background)||"#ffffff",onChange:F=>u("colors.background",F)}),t.jsx(v,{label:"Text Color",value:((M=a.colors)==null?void 0:M.foreground)||"#1f2937",onChange:F=>u("colors.foreground",F)})]})}),t.jsx(ae,{value:"typography",className:"space-y-4",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"font-medium",children:"Typography"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ee,{children:"Font Family"}),t.jsxs("select",{className:"w-full p-2 border rounded-md",value:((S=a.typography)==null?void 0:S.fontFamily)||"Inter, system-ui, sans-serif",onChange:F=>u("typography.fontFamily",F.target.value),children:[t.jsx("option",{value:"Inter, system-ui, sans-serif",children:"Inter"}),t.jsx("option",{value:"Roboto, sans-serif",children:"Roboto"}),t.jsx("option",{value:"Open Sans, sans-serif",children:"Open Sans"}),t.jsx("option",{value:"Lato, sans-serif",children:"Lato"}),t.jsx("option",{value:"Montserrat, sans-serif",children:"Montserrat"}),t.jsx("option",{value:"Poppins, sans-serif",children:"Poppins"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ee,{children:"Base Font Size"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(bt,{value:[parseInt(((j=(g=(k=a.typography)==null?void 0:k.fontSize)==null?void 0:g.base)==null?void 0:j.replace("px",""))||"16")],onValueChange:([F])=>u("typography.fontSize.base",`${F}px`),min:12,max:24,step:1,className:"flex-1"}),t.jsx("span",{className:"text-sm w-12",children:((N=(z=a.typography)==null?void 0:z.fontSize)==null?void 0:N.base)||"16px"})]})]})]})}),t.jsx(ae,{value:"layout",className:"space-y-4",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"font-medium",children:"Layout Settings"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ee,{children:"Max Width"}),t.jsxs("select",{className:"w-full p-2 border rounded-md",value:((w=a.layout)==null?void 0:w.maxWidth)||"1200px",onChange:F=>u("layout.maxWidth",F.target.value),children:[t.jsx("option",{value:"1024px",children:"1024px"}),t.jsx("option",{value:"1200px",children:"1200px"}),t.jsx("option",{value:"1400px",children:"1400px"}),t.jsx("option",{value:"100%",children:"Full Width"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ee,{children:"Base Spacing"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(bt,{value:[parseFloat(((p=($=(T=a.layout)==null?void 0:T.spacing)==null?void 0:$.sm)==null?void 0:p.replace("rem",""))||"1")],onValueChange:([F])=>u("layout.spacing.sm",`${F}rem`),min:.5,max:3,step:.25,className:"flex-1"}),t.jsx("span",{className:"text-sm w-16",children:((b=(A=a.layout)==null?void 0:A.spacing)==null?void 0:b.sm)||"1rem"})]})]})]})}),t.jsx(ae,{value:"features",className:"space-y-4",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"font-medium",children:"Features"}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"space-y-0.5",children:[t.jsx(ee,{children:"Dark Mode Support"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable dark mode toggle"})]}),t.jsx(qe,{checked:((L=a.features)==null?void 0:L.darkMode)||!1,onCheckedChange:F=>u("features.darkMode",F)})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"space-y-0.5",children:[t.jsx(ee,{children:"Animations"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable smooth animations"})]}),t.jsx(qe,{checked:((_=a.features)==null?void 0:_.animations)||!1,onCheckedChange:F=>u("features.animations",F)})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"space-y-0.5",children:[t.jsx(ee,{children:"Lazy Loading"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Optimize image loading"})]}),t.jsx(qe,{checked:((X=a.features)==null?void 0:X.lazyLoading)||!1,onCheckedChange:F=>u("features.lazyLoading",F)})]})]})})]}),t.jsx(Ve,{className:"my-6"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(D,{onClick:m,disabled:!d,className:"flex-1",children:[t.jsx(et,{className:"h-4 w-4 mr-2"}),"Save Changes"]}),t.jsxs(D,{variant:"outline",onClick:f,children:[t.jsx(ot,{className:"h-4 w-4 mr-2"}),"Reset"]})]}),d&&t.jsx("div",{className:"mt-2",children:t.jsx(te,{variant:"secondary",className:"text-xs",children:"Unsaved changes"})})]})]})}),r&&t.jsx("div",{className:"lg:col-span-2 space-y-4",children:t.jsxs(ue,{children:[t.jsx(he,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs(me,{className:"flex items-center gap-2",children:[t.jsx(nt,{className:"h-5 w-5"}),"Live Preview"]}),t.jsx(Ne,{children:"See your changes in real-time"})]}),t.jsx("div",{className:"flex items-center gap-1 p-1 bg-muted rounded-md",children:["desktop","tablet","mobile"].map(F=>{const ne=y(F);return t.jsx(D,{variant:c===F?"default":"ghost",size:"sm",onClick:()=>o(F),children:t.jsx(ne,{className:"h-4 w-4"})},F)})})]})}),t.jsx(fe,{children:t.jsx("div",{className:"border rounded-lg overflow-hidden bg-background",children:t.jsx("div",{className:`mx-auto transition-all duration-300 ${c==="desktop"?"w-full":c==="tablet"?"w-[768px]":"w-[375px]"}`,style:{"--theme-primary":(B=a.colors)==null?void 0:B.primary,"--theme-secondary":(ge=a.colors)==null?void 0:ge.secondary,"--theme-accent":(O=a.colors)==null?void 0:O.accent,"--theme-background":(W=a.colors)==null?void 0:W.background,"--theme-foreground":(V=a.colors)==null?void 0:V.foreground,fontFamily:(x=a.typography)==null?void 0:x.fontFamily,fontSize:(R=(C=a.typography)==null?void 0:C.fontSize)==null?void 0:R.base},children:t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsx("div",{className:"h-12 rounded-md flex items-center px-4",style:{backgroundColor:(Q=a.colors)==null?void 0:Q.primary,color:"white"},children:t.jsx("h1",{className:"text-lg font-semibold",children:"Header Preview"})}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("h2",{className:"text-xl font-bold",style:{color:(Ee=a.colors)==null?void 0:Ee.foreground},children:"Sample Content"}),t.jsx("p",{className:"text-sm",style:{color:(ht=a.colors)==null?void 0:ht.secondary},children:"This is how your theme will look with the current settings."}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{className:"px-4 py-2 rounded-md text-white text-sm",style:{backgroundColor:(mt=a.colors)==null?void 0:mt.primary},children:"Primary Button"}),t.jsx("button",{className:"px-4 py-2 rounded-md text-sm border",style:{borderColor:(ft=a.colors)==null?void 0:ft.secondary,color:(pt=a.colors)==null?void 0:pt.secondary},children:"Secondary Button"})]})]})]})})})})]})})]})}function Xa(){const e=jr(),{currentThemeName:r}=Be(),[n,s]=i.useState("editor"),{doAction:a}=Yr(),l=()=>{e("/admin/themes")};return de.useEffect(()=>{a("admin.page.render","theme-advanced-editor")},[]),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs(D,{variant:"outline",size:"sm",onClick:l,children:[t.jsx(Or,{className:"h-4 w-4 mr-2"}),"Back to Themes"]}),t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[t.jsx(vt,{className:"h-6 w-6"}),"Advanced Theme Editor"]}),t.jsx("p",{className:"text-muted-foreground",children:"Full-featured theme development environment with live preview, version control, and search"})]})]}),t.jsx(te,{variant:"outline",className:"text-lg px-4 py-2",children:r})]}),t.jsx(Ve,{}),t.jsxs(st,{value:n,onValueChange:s,className:"space-y-6",children:[t.jsxs(at,{className:"grid w-full grid-cols-5",children:[t.jsxs(Z,{value:"editor",className:"gap-2",children:[t.jsx(Ie,{className:"h-4 w-4"}),"Code Editor"]}),t.jsxs(Z,{value:"preview",className:"gap-2",children:[t.jsx(nt,{className:"h-4 w-4"}),"Live Preview"]}),t.jsxs(Z,{value:"version",className:"gap-2",children:[t.jsx(Vt,{className:"h-4 w-4"}),"Version Control"]}),t.jsxs(Z,{value:"search",className:"gap-2",children:[t.jsx(Le,{className:"h-4 w-4"}),"Search & Replace"]}),t.jsxs(Z,{value:"customizer",className:"gap-2",children:[t.jsx(Lt,{className:"h-4 w-4"}),"Customizer"]})]}),t.jsx(ae,{value:"editor",className:"space-y-4",children:t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsx("div",{children:t.jsx(ls,{themeName:r})}),t.jsx("div",{className:"border-t pt-4",children:t.jsx(Pt,{previewUrl:"/",theme:r,initialDevice:"desktop",compactMode:!0})})]})}),t.jsx(ae,{value:"preview",className:"space-y-4",children:t.jsx(Pt,{previewUrl:"/",theme:r})}),t.jsx(ae,{value:"version",className:"space-y-4",children:t.jsx(va,{})}),t.jsx(ae,{value:"search",className:"space-y-4",children:t.jsx(ya,{})}),t.jsx(ae,{value:"customizer",className:"space-y-4",children:t.jsx(Ca,{showPreview:!0})})]}),t.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-md",children:[t.jsxs("h3",{className:"font-semibold text-blue-900 mb-2 flex items-center gap-2",children:[t.jsx(vt,{className:"h-4 w-4"}),"Phase 3 Features"]}),t.jsxs("ul",{className:"space-y-1 text-sm text-blue-800",children:[t.jsx("li",{children:"âœ… WordPress-like hooks system for extensibility"}),t.jsx("li",{children:"âœ… Git-like version control with commit history and rollback"}),t.jsx("li",{children:"âœ… Live preview with device selector and iframe sandbox"}),t.jsx("li",{children:"âœ… Real-time theme customizer with instant updates"}),t.jsx("li",{children:"âœ… Advanced search & replace across all theme files"})]})]})]})}export{Xa as default};
