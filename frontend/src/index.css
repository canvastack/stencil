@tailwind base;
@tailwind components;
@tailwind utilities;

/* Import order workflow interaction styles */
@import './styles/order-workflow-interactions.css';

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here.
All colors MUST be HSL.
*/

@layer base {
  :root {
    --background: 36 100% 97%;
    --foreground: 210 24% 16%;

    --card: 0 0% 100%;
    --card-foreground: 210 24% 16%;

    --popover: 0 0% 100%;
    --popover-foreground: 210 24% 16%;

    --primary: 30 100% 50%;
    --primary-foreground: 0 0% 100%;

    --secondary: 210 17% 82%;
    --secondary-foreground: 210 24% 16%;

    --muted: 210 17% 95%;
    --muted-foreground: 215 16% 47%;

    --accent: 30 100% 50%;
    --accent-foreground: 0 0% 100%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    --border: 214 32% 91%;
    --input: 214 32% 91%;
    --ring: 30 100% 50%;

    --radius: 0.75rem;

    /* Custom tokens for etching business */
    --navy: 213 29% 14%;
    --navy-dark: 213 45% 8%;
    --navy-light: 213 24% 24%;

    --orange: 30 100% 50%;
    --orange-light: 36 100% 60%;

    --lavender: 225 15% 70%;
    --lavender-light: 225 20% 85%;

    --glass-bg: 213 29% 14% / 0.8;
    --glass-border: 0 0% 100% / 0.1;

    --gradient-hero: linear-gradient(135deg, hsl(213 45% 8%) 0%, hsl(213 29% 14%) 100%);
    --gradient-orange: linear-gradient(135deg, hsl(30 100% 50%) 0%, hsl(36 100% 60%) 100%);
    --gradient-accent: linear-gradient(135deg, hsl(225 60% 60%) 0%, hsl(270 60% 60%) 100%);

    --shadow-glow: 0 0 40px hsl(30 100% 50% / 0.3);
    --shadow-card: 0 10px 30px -10px hsl(213 45% 8% / 0.3);

    /* Animations */
    --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
  
    /* Custom scrollbar styling */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
  
    ::-webkit-scrollbar-track {
      background: hsl(var(--muted));
      border-radius: 4px;
    }
  
    ::-webkit-scrollbar-thumb {
      background: #ff8000;
      border-radius: 4px;
      transition: background 0.2s ease;
    }
  
    ::-webkit-scrollbar-thumb:hover {
      background: #ff9933;
    }
  
    /* Firefox scrollbar */
    * {
      scrollbar-width: thin;
      scrollbar-color: #ff8000 hsl(var(--muted));
    }

  @keyframes gradient-shift {
    0%, 100% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
  }

  @keyframes typing-fade {
    0%, 100% {
      opacity: 0;
      transform: translateY(10px);
    }
    10%, 90% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-gradient {
    background-size: 200% 200%;
    animation: gradient-shift 8s ease infinite;
  }

  .animate-typing {
    animation: typing-fade 4s ease-in-out infinite;
  }

  .dark {
    --background: 213 29% 14%;
    --foreground: 210 40% 98%;

    --card: 213 24% 18%;
    --card-foreground: 210 40% 98%;

    --popover: 213 24% 18%;
    --popover-foreground: 210 40% 98%;

    --primary: 30 100% 50%;
    --primary-foreground: 0 0% 100%;

    --secondary: 213 24% 24%;
    --secondary-foreground: 210 40% 98%;

    --muted: 213 24% 24%;
    --muted-foreground: 215 20% 65%;

    --accent: 30 100% 50%;
    --accent-foreground: 0 0% 100%;

    --destructive: 0 63% 31%;
    --destructive-foreground: 210 40% 98%;

    --border: 213 24% 24%;
    --input: 213 24% 20%;
    --ring: 30 100% 50%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
  }

  /* =====================================
     WCAG 2.1 AA Compliance
     Focus Indicators & Accessibility
  ===================================== */
  
  /* Enhanced focus indicators for keyboard navigation */
  *:focus-visible {
    outline: 2px solid hsl(var(--primary));
    outline-offset: 2px;
    border-radius: 2px;
  }

  /* Button focus styles */
  button:focus-visible,
  [role="button"]:focus-visible {
    outline: 2px solid hsl(var(--primary));
    outline-offset: 2px;
    box-shadow: 0 0 0 4px hsl(var(--primary) / 0.1);
  }

  /* Input focus styles */
  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible {
    outline: 2px solid hsl(var(--primary));
    outline-offset: 0;
    border-color: hsl(var(--primary));
  }

  /* Link focus styles */
  a:focus-visible {
    outline: 2px solid hsl(var(--primary));
    outline-offset: 2px;
    text-decoration: underline;
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    *:focus-visible {
      outline-width: 3px;
      outline-offset: 3px;
    }

    /* Enhanced contrast for status elements */
    [role="status"],
    .status-badge,
    .stage-indicator {
      border: 2px solid currentColor !important;
      font-weight: 600 !important;
    }

    /* High contrast backgrounds */
    .bg-gray-50 { background-color: #f9fafb !important; }
    .bg-blue-50 { background-color: #eff6ff !important; }
    .bg-green-50 { background-color: #f0fdf4 !important; }
    .bg-yellow-50 { background-color: #fefce8 !important; }
    .bg-red-50 { background-color: #fef2f2 !important; }
    .bg-orange-50 { background-color: #fff7ed !important; }
    .bg-purple-50 { background-color: #f5f3ff !important; }
    .bg-pink-50 { background-color: #fdf2f8 !important; }
    .bg-indigo-50 { background-color: #eef2ff !important; }
    .bg-teal-50 { background-color: #f0fdfa !important; }
    .bg-cyan-50 { background-color: #ecfeff !important; }
    .bg-emerald-50 { background-color: #ecfdf5 !important; }
    .bg-amber-50 { background-color: #fffbeb !important; }
    .bg-lime-50 { background-color: #f7fee7 !important; }

    /* High contrast text */
    .text-gray-700 { color: #000000 !important; }
    .text-blue-700 { color: #1d4ed8 !important; }
    .text-green-700 { color: #15803d !important; }
    .text-yellow-700 { color: #a16207 !important; }
    .text-red-700 { color: #b91c1c !important; }
    .text-orange-700 { color: #c2410c !important; }
    .text-purple-700 { color: #7c3aed !important; }
    .text-pink-700 { color: #be185d !important; }
    .text-indigo-700 { color: #4338ca !important; }
    .text-teal-700 { color: #0f766e !important; }
    .text-cyan-700 { color: #0891b2 !important; }
    .text-emerald-700 { color: #047857 !important; }
    .text-amber-700 { color: #92400e !important; }
    .text-lime-700 { color: #4d7c0f !important; }
  }

  /* =====================================
     Color-Blind Friendly Patterns
     Visual patterns for non-color identification
  ===================================== */

  /* Base pattern styles */
  .pattern-diagonal-lines {
    background-image: repeating-linear-gradient(
      45deg,
      transparent,
      transparent 2px,
      currentColor 2px,
      currentColor 4px
    );
    background-size: 8px 8px;
  }

  .pattern-horizontal-lines {
    background-image: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      currentColor 2px,
      currentColor 4px
    );
    background-size: 8px 8px;
  }

  .pattern-vertical-lines {
    background-image: repeating-linear-gradient(
      90deg,
      transparent,
      transparent 2px,
      currentColor 2px,
      currentColor 4px
    );
    background-size: 8px 8px;
  }

  .pattern-dots {
    background-image: radial-gradient(
      circle at 2px 2px,
      currentColor 1px,
      transparent 1px
    );
    background-size: 8px 8px;
  }

  .pattern-cross-hatch {
    background-image: 
      repeating-linear-gradient(45deg, transparent, transparent 2px, currentColor 2px, currentColor 4px),
      repeating-linear-gradient(-45deg, transparent, transparent 2px, currentColor 2px, currentColor 4px);
    background-size: 8px 8px;
  }

  .pattern-solid-thick-border {
    border: 3px solid currentColor !important;
    background-color: transparent !important;
  }

  .pattern-diagonal-right {
    background-image: repeating-linear-gradient(
      45deg,
      transparent,
      transparent 3px,
      currentColor 3px,
      currentColor 6px
    );
    background-size: 12px 12px;
  }

  .pattern-diagonal-left {
    background-image: repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 3px,
      currentColor 3px,
      currentColor 6px
    );
    background-size: 12px 12px;
  }

  .pattern-zigzag {
    background-image: linear-gradient(
      135deg,
      currentColor 25%,
      transparent 25%,
      transparent 50%,
      currentColor 50%,
      currentColor 75%,
      transparent 75%
    );
    background-size: 8px 8px;
  }

  .pattern-waves {
    background-image: radial-gradient(
      ellipse at center,
      transparent 20%,
      currentColor 21%,
      currentColor 25%,
      transparent 26%
    );
    background-size: 12px 6px;
  }

  .pattern-checkered {
    background-image: 
      linear-gradient(45deg, currentColor 25%, transparent 25%),
      linear-gradient(-45deg, currentColor 25%, transparent 25%),
      linear-gradient(45deg, transparent 75%, currentColor 75%),
      linear-gradient(-45deg, transparent 75%, currentColor 75%);
    background-size: 8px 8px;
    background-position: 0 0, 0 4px, 4px -4px, -4px 0px;
  }

  .pattern-solid-double-border {
    border: 2px double currentColor !important;
    background-color: transparent !important;
  }

  .pattern-grid {
    background-image: 
      linear-gradient(currentColor 1px, transparent 1px),
      linear-gradient(90deg, currentColor 1px, transparent 1px);
    background-size: 8px 8px;
  }

  .pattern-bubbles {
    background-image: 
      radial-gradient(circle at 25% 25%, currentColor 2px, transparent 2px),
      radial-gradient(circle at 75% 75%, currentColor 2px, transparent 2px);
    background-size: 12px 12px;
  }

  /* Pattern overlay for status badges */
  .status-badge-with-pattern {
    position: relative;
    overflow: hidden;
  }

  .status-badge-with-pattern::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    opacity: 0.3;
    pointer-events: none;
  }

  /* Apply patterns to specific pattern classes */
  .status-badge-with-pattern.pattern-diagonal-lines::before {
    background-image: repeating-linear-gradient(
      45deg,
      transparent,
      transparent 2px,
      currentColor 2px,
      currentColor 4px
    );
    background-size: 8px 8px;
  }

  .status-badge-with-pattern.pattern-horizontal-lines::before {
    background-image: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      currentColor 2px,
      currentColor 4px
    );
    background-size: 8px 8px;
  }

  .status-badge-with-pattern.pattern-dots::before {
    background-image: radial-gradient(
      circle at 2px 2px,
      currentColor 1px,
      transparent 1px
    );
    background-size: 6px 6px;
  }

  /* Status symbol indicators for color-blind users */
  .status-symbol {
    display: inline-block;
    margin-right: 0.25rem;
    font-weight: bold;
    font-size: 0.875em;
  }

  .status-symbol::before {
    content: attr(data-symbol);
  }

  /* Reduced motion support for accessibility */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }

    /* Remove pattern animations */
    .pattern-diagonal-lines,
    .pattern-horizontal-lines,
    .pattern-vertical-lines,
    .pattern-dots,
    .pattern-cross-hatch,
    .pattern-zigzag,
    .pattern-waves,
    .pattern-checkered,
    .pattern-grid,
    .pattern-bubbles {
      animation: none !important;
    }
  }

  /* Reduced motion support for accessibility */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* Screen reader only content */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  /* Skip to main content link for accessibility */
  .skip-to-main,
  .skip-to-content {
    position: absolute;
    top: -100px;
    left: 0;
    background: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
    padding: 12px 24px;
    text-decoration: none;
    font-weight: 600;
    border-radius: 0 0 4px 0;
    z-index: 9999;
    transition: top 0.2s ease-in-out;
  }

  .skip-to-main:focus,
  .skip-to-content:focus {
    top: 0;
    outline: 3px solid hsl(var(--primary));
    outline-offset: 2px;
  }

  /* =====================================
     Smooth Theme Transitions
  ===================================== */
  
  .theme-transitioning,
  .theme-transitioning *,
  .theme-transitioning *::before,
  .theme-transitioning *::after {
    transition: background-color 0.3s ease,
                border-color 0.3s ease,
                color 0.3s ease,
                fill 0.3s ease,
                stroke 0.3s ease !important;
    transition-delay: 0s !important;
  }

  /* Prevent FOUC on theme switch */
  html {
    color-scheme: light dark;
  }

  html.dark {
    color-scheme: dark;
  }

  /* Dark mode image optimization */
  .dark img:not([data-no-dark-filter]) {
    filter: brightness(0.95) contrast(0.95);
    transition: filter 0.3s ease;
  }

  .dark img[data-no-dark-filter] {
    filter: none;
  }

  /* =====================================
     Enhanced Dark Mode Support
  ===================================== */
  
  /* Dark mode scrollbar */
  .dark ::-webkit-scrollbar-track {
    background: hsl(213 24% 18%);
  }

  .dark ::-webkit-scrollbar-thumb {
    background: hsl(30 100% 50%);
  }

  .dark ::-webkit-scrollbar-thumb:hover {
    background: hsl(30 100% 60%);
  }

  /* Dark mode selection */
  .dark ::selection {
    background: hsl(30 100% 50% / 0.3);
    color: hsl(210 40% 98%);
  }

  /* =====================================
     Touch Target Optimization (Mobile)
  ===================================== */
  
  @media (max-width: 768px) {
    /* Ensure minimum touch target size on mobile */
    button,
    [role="button"],
    a,
    input[type="checkbox"],
    input[type="radio"] {
      min-width: 44px;
      min-height: 44px;
      padding: 8px;
    }

    /* Larger tap targets for interactive elements */
    .touch-target {
      min-width: 48px;
      min-height: 48px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
  }

  /* =====================================
     Loading States & Skeletons
  ===================================== */
  
  .loading-skeleton {
    background: linear-gradient(
      90deg,
      hsl(var(--muted)) 0%,
      hsl(var(--muted) / 0.6) 50%,
      hsl(var(--muted)) 100%
    );
    background-size: 200% 100%;
    animation: loading-shimmer 1.5s ease-in-out infinite;
    border-radius: 4px;
  }

  @keyframes loading-shimmer {
    0% {
      background-position: -200% 0;
    }
    100% {
      background-position: 200% 0;
    }
  }

  /* =====================================
     Keyboard Navigation Hints
  ===================================== */
  
  .keyboard-user *:focus-visible {
    outline: 3px solid hsl(var(--primary));
    outline-offset: 3px;
  }

  .mouse-user *:focus-visible {
    outline: 2px solid hsl(var(--primary));
    outline-offset: 2px;
  }
}

/* =====================================
   Temporary overflow debug utilities
   Use only in development to visualize which elements extend past the viewport.
   How to use:
   - Add the class `overflow-debug-on` to the <body> (via devtools) to show outlines
   - Or run the helper in console: `window.__overflowDebug?.list()` / `window.__overflowDebug?.highlight()`
===================================== */

@layer utilities {
  .overflow-debug-outline {
    outline: 2px dashed rgba(255, 99, 71, 0.9) !important; /* tomato */
  }

  .overflow-debug-label {
    position: relative;
  }

  .overflow-debug-label::after {
    content: attr(data-ov-id);
    position: absolute;
    right: 0;
    top: 0;
    background: rgba(0,0,0,0.7);
    color: #fff;
    font-size: 10px;
    padding: 2px 4px;
    border-radius: 2px;
    z-index: 9999;
  }
}
