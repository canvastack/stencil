@tailwind base;
@tailwind components;
@tailwind utilities;

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here.
All colors MUST be HSL.
*/

@layer base {
  :root {
    --background: 36 100% 97%;
    --foreground: 210 24% 16%;

    --card: 0 0% 100%;
    --card-foreground: 210 24% 16%;

    --popover: 0 0% 100%;
    --popover-foreground: 210 24% 16%;

    --primary: 30 100% 50%;
    --primary-foreground: 0 0% 100%;

    --secondary: 210 17% 82%;
    --secondary-foreground: 210 24% 16%;

    --muted: 210 17% 95%;
    --muted-foreground: 215 16% 47%;

    --accent: 30 100% 50%;
    --accent-foreground: 0 0% 100%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    --border: 214 32% 91%;
    --input: 214 32% 91%;
    --ring: 30 100% 50%;

    --radius: 0.75rem;

    /* Custom tokens for etching business */
    --navy: 213 29% 14%;
    --navy-dark: 213 45% 8%;
    --navy-light: 213 24% 24%;

    --orange: 30 100% 50%;
    --orange-light: 36 100% 60%;

    --lavender: 225 15% 70%;
    --lavender-light: 225 20% 85%;

    --glass-bg: 213 29% 14% / 0.8;
    --glass-border: 0 0% 100% / 0.1;

    --gradient-hero: linear-gradient(135deg, hsl(213 45% 8%) 0%, hsl(213 29% 14%) 100%);
    --gradient-orange: linear-gradient(135deg, hsl(30 100% 50%) 0%, hsl(36 100% 60%) 100%);
    --gradient-accent: linear-gradient(135deg, hsl(225 60% 60%) 0%, hsl(270 60% 60%) 100%);

    --shadow-glow: 0 0 40px hsl(30 100% 50% / 0.3);
    --shadow-card: 0 10px 30px -10px hsl(213 45% 8% / 0.3);

    /* Animations */
    --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
  
    /* Custom scrollbar styling */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
  
    ::-webkit-scrollbar-track {
      background: hsl(var(--muted));
      border-radius: 4px;
    }
  
    ::-webkit-scrollbar-thumb {
      background: #ff8000;
      border-radius: 4px;
      transition: background 0.2s ease;
    }
  
    ::-webkit-scrollbar-thumb:hover {
      background: #ff9933;
    }
  
    /* Firefox scrollbar */
    * {
      scrollbar-width: thin;
      scrollbar-color: #ff8000 hsl(var(--muted));
    }

  @keyframes gradient-shift {
    0%, 100% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
  }

  @keyframes typing-fade {
    0%, 100% {
      opacity: 0;
      transform: translateY(10px);
    }
    10%, 90% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-gradient {
    background-size: 200% 200%;
    animation: gradient-shift 8s ease infinite;
  }

  .animate-typing {
    animation: typing-fade 4s ease-in-out infinite;
  }

  .dark {
    --background: 213 29% 14%;
    --foreground: 210 40% 98%;

    --card: 213 24% 18%;
    --card-foreground: 210 40% 98%;

    --popover: 213 24% 18%;
    --popover-foreground: 210 40% 98%;

    --primary: 30 100% 50%;
    --primary-foreground: 0 0% 100%;

    --secondary: 213 24% 24%;
    --secondary-foreground: 210 40% 98%;

    --muted: 213 24% 24%;
    --muted-foreground: 215 20% 65%;

    --accent: 30 100% 50%;
    --accent-foreground: 0 0% 100%;

    --destructive: 0 63% 31%;
    --destructive-foreground: 210 40% 98%;

    --border: 213 24% 24%;
    --input: 213 24% 20%;
    --ring: 30 100% 50%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
  }

  /* =====================================
     WCAG 2.1 AA Compliance
     Focus Indicators & Accessibility
  ===================================== */
  
  /* Enhanced focus indicators for keyboard navigation */
  *:focus-visible {
    outline: 2px solid hsl(var(--primary));
    outline-offset: 2px;
    border-radius: 2px;
  }

  /* Button focus styles */
  button:focus-visible,
  [role="button"]:focus-visible {
    outline: 2px solid hsl(var(--primary));
    outline-offset: 2px;
    box-shadow: 0 0 0 4px hsl(var(--primary) / 0.1);
  }

  /* Input focus styles */
  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible {
    outline: 2px solid hsl(var(--primary));
    outline-offset: 0;
    border-color: hsl(var(--primary));
  }

  /* Link focus styles */
  a:focus-visible {
    outline: 2px solid hsl(var(--primary));
    outline-offset: 2px;
    text-decoration: underline;
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    *:focus-visible {
      outline-width: 3px;
      outline-offset: 3px;
    }
  }

  /* Reduced motion support for accessibility */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* Screen reader only content */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  /* Skip to main content link for accessibility */
  .skip-to-main,
  .skip-to-content {
    position: absolute;
    top: -100px;
    left: 0;
    background: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
    padding: 12px 24px;
    text-decoration: none;
    font-weight: 600;
    border-radius: 0 0 4px 0;
    z-index: 9999;
    transition: top 0.2s ease-in-out;
  }

  .skip-to-main:focus,
  .skip-to-content:focus {
    top: 0;
    outline: 3px solid hsl(var(--primary));
    outline-offset: 2px;
  }

  /* =====================================
     Smooth Theme Transitions
  ===================================== */
  
  .theme-transitioning,
  .theme-transitioning *,
  .theme-transitioning *::before,
  .theme-transitioning *::after {
    transition: background-color 0.3s ease,
                border-color 0.3s ease,
                color 0.3s ease,
                fill 0.3s ease,
                stroke 0.3s ease !important;
    transition-delay: 0s !important;
  }

  /* Prevent FOUC on theme switch */
  html {
    color-scheme: light dark;
  }

  html.dark {
    color-scheme: dark;
  }

  /* Dark mode image optimization */
  .dark img:not([data-no-dark-filter]) {
    filter: brightness(0.95) contrast(0.95);
    transition: filter 0.3s ease;
  }

  .dark img[data-no-dark-filter] {
    filter: none;
  }

  /* =====================================
     Enhanced Dark Mode Support
  ===================================== */
  
  /* Dark mode scrollbar */
  .dark ::-webkit-scrollbar-track {
    background: hsl(213 24% 18%);
  }

  .dark ::-webkit-scrollbar-thumb {
    background: hsl(30 100% 50%);
  }

  .dark ::-webkit-scrollbar-thumb:hover {
    background: hsl(30 100% 60%);
  }

  /* Dark mode selection */
  .dark ::selection {
    background: hsl(30 100% 50% / 0.3);
    color: hsl(210 40% 98%);
  }

  /* =====================================
     Touch Target Optimization (Mobile)
  ===================================== */
  
  @media (max-width: 768px) {
    /* Ensure minimum touch target size on mobile */
    button,
    [role="button"],
    a,
    input[type="checkbox"],
    input[type="radio"] {
      min-width: 44px;
      min-height: 44px;
      padding: 8px;
    }

    /* Larger tap targets for interactive elements */
    .touch-target {
      min-width: 48px;
      min-height: 48px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
  }

  /* =====================================
     Loading States & Skeletons
  ===================================== */
  
  .loading-skeleton {
    background: linear-gradient(
      90deg,
      hsl(var(--muted)) 0%,
      hsl(var(--muted) / 0.6) 50%,
      hsl(var(--muted)) 100%
    );
    background-size: 200% 100%;
    animation: loading-shimmer 1.5s ease-in-out infinite;
    border-radius: 4px;
  }

  @keyframes loading-shimmer {
    0% {
      background-position: -200% 0;
    }
    100% {
      background-position: 200% 0;
    }
  }

  /* =====================================
     Keyboard Navigation Hints
  ===================================== */
  
  .keyboard-user *:focus-visible {
    outline: 3px solid hsl(var(--primary));
    outline-offset: 3px;
  }

  .mouse-user *:focus-visible {
    outline: 2px solid hsl(var(--primary));
    outline-offset: 2px;
  }
}

/* =====================================
   Temporary overflow debug utilities
   Use only in development to visualize which elements extend past the viewport.
   How to use:
   - Add the class `overflow-debug-on` to the <body> (via devtools) to show outlines
   - Or run the helper in console: `window.__overflowDebug?.list()` / `window.__overflowDebug?.highlight()`
===================================== */

@layer utilities {
  .overflow-debug-outline {
    outline: 2px dashed rgba(255, 99, 71, 0.9) !important; /* tomato */
  }

  .overflow-debug-label {
    position: relative;
  }

  .overflow-debug-label::after {
    content: attr(data-ov-id);
    position: absolute;
    right: 0;
    top: 0;
    background: rgba(0,0,0,0.7);
    color: #fff;
    font-size: 10px;
    padding: 2px 4px;
    border-radius: 2px;
    z-index: 9999;
  }
}
