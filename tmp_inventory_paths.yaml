/inventory/items:
  get:
    tags:
      - Tenant Inventory
    summary: List inventory items
    description: Retrieve paginated inventory items with aggregated stock balances for the authenticated tenant.
    operationId: tenantListInventoryItems
    security:
      - bearerAuth: []
    parameters:
      - $ref: '#/components/parameters/PageParam'
      - $ref: '#/components/parameters/PerPageParam'
      - name: search
        in: query
        schema:
          type: string
        description: Filter items by code or name
      - name: category
        in: query
        schema:
          type: string
        description: Filter by item category
      - name: active_only
        in: query
        schema:
          type: boolean
          default: false
        description: Show only active items
    responses:
      '200':
        description: Inventory items retrieved
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  type: array
                  items:
                    $ref: '#/components/schemas/InventoryItem'
                links:
                  type: object
                  additionalProperties: true
                meta:
                  type: object
                  additionalProperties: true
      '401':
        $ref: '#/components/responses/Unauthorized'
      '403':
        $ref: '#/components/responses/Forbidden'
      '429':
        $ref: '#/components/responses/RateLimitExceeded'
      '500':
        $ref: '#/components/responses/ServerError'
/inventory/items/{item}:
  get:
    tags:
      - Tenant Inventory
    summary: Get inventory item detail
    description: Retrieve an inventory item with location balances for the authenticated tenant.
    operationId: tenantGetInventoryItem
    security:
      - bearerAuth: []
    parameters:
      - name: item
        in: path
        required: true
        schema:
          type: integer
    responses:
      '200':
        description: Inventory item detail retrieved
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  $ref: '#/components/schemas/InventoryItem'
      '401':
        $ref: '#/components/responses/Unauthorized'
      '403':
        $ref: '#/components/responses/Forbidden'
      '404':
        $ref: '#/components/responses/NotFound'
      '500':
        $ref: '#/components/responses/ServerError'
/inventory/locations:
  get:
    tags:
      - Tenant Inventory
    summary: List inventory locations
    description: Retrieve inventory locations for the authenticated tenant.
    operationId: tenantListInventoryLocations
    security:
      - bearerAuth: []
    parameters:
      - name: active_only
        in: query
        schema:
          type: boolean
          default: false
        description: Show active locations only
      - name: type
        in: query
        schema:
          type: string
        description: Filter by location type
    responses:
      '200':
        description: Inventory locations retrieved
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  type: array
                  items:
                    $ref: '#/components/schemas/InventoryLocation'
      '401':
        $ref: '#/components/responses/Unauthorized'
      '403':
        $ref: '#/components/responses/Forbidden'
      '500':
        $ref: '#/components/responses/ServerError'
  post:
    tags:
      - Tenant Inventory
    summary: Create inventory location
    description: Create a new inventory location for the authenticated tenant.
    operationId: tenantCreateInventoryLocation
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
              - location_code
              - location_name
            properties:
              location_code:
                type: string
                maxLength: 50
              location_name:
                type: string
                maxLength: 255
              location_type:
                type: string
              description:
                type: string
              address_line_1:
                type: string
              address_line_2:
                type: string
              city:
                type: string
              state_province:
                type: string
              postal_code:
                type: string
              country:
                type: string
              total_capacity:
                type: number
                format: double
              used_capacity:
                type: number
                format: double
              capacity_unit:
                type: string
              temperature_controlled:
                type: boolean
              temperature_min:
                type: number
                format: double
              temperature_max:
                type: number
                format: double
              humidity_controlled:
                type: boolean
              humidity_max:
                type: number
                format: double
              security_level:
                type: string
              is_active:
                type: boolean
              is_primary:
                type: boolean
              operational_hours:
                type: object
                additionalProperties: true
              contact_information:
                type: object
                additionalProperties: true
    responses:
      '201':
        description: Inventory location created
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  $ref: '#/components/schemas/InventoryLocation'
      '401':
        $ref: '#/components/responses/Unauthorized'
      '403':
        $ref: '#/components/responses/Forbidden'
      '422':
        $ref: '#/components/responses/ValidationError'
      '500':
        $ref: '#/components/responses/ServerError'
/inventory/locations/{location}:
  put:
    tags:
      - Tenant Inventory
    summary: Update inventory location
    description: Update an inventory location for the authenticated tenant.
    operationId: tenantUpdateInventoryLocation
    security:
      - bearerAuth: []
    parameters:
      - name: location
        in: path
        required: true
        schema:
          type: integer
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              location_name:
                type: string
              description:
                type: string
              location_type:
                type: string
              address_line_1:
                type: string
              address_line_2:
                type: string
              city:
                type: string
              state_province:
                type: string
              postal_code:
                type: string
              country:
                type: string
              total_capacity:
                type: number
                format: double
              used_capacity:
                type: number
                format: double
              capacity_unit:
                type: string
              temperature_controlled:
                type: boolean
              temperature_min:
                type: number
                format: double
              temperature_max:
                type: number
                format: double
              humidity_controlled:
                type: boolean
              humidity_max:
                type: number
                format: double
              security_level:
                type: string
              is_active:
                type: boolean
              is_primary:
                type: boolean
              operational_hours:
                type: object
                additionalProperties: true
              contact_information:
                type: object
                additionalProperties: true
    responses:
      '200':
        description: Inventory location updated
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  $ref: '#/components/schemas/InventoryLocation'
      '401':
        $ref: '#/components/responses/Unauthorized'
      '403':
        $ref: '#/components/responses/Forbidden'
      '404':
        $ref: '#/components/responses/NotFound'
      '422':
        $ref: '#/components/responses/ValidationError'
      '500':
        $ref: '#/components/responses/ServerError'
/inventory/items/{product}/locations/{location}/stock:
  post:
    tags:
      - Tenant Inventory
    summary: Set location stock
    description: Set the on-hand stock for a specific location.
    operationId: tenantSetLocationStock
    security:
      - bearerAuth: []
    parameters:
      - name: product
        in: path
        required: true
        schema:
          type: integer
      - name: location
        in: path
        required: true
        schema:
          type: integer
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
              - quantity
            properties:
              quantity:
                type: number
                format: double
                minimum: 0
              reason:
                type: string
    responses:
      '200':
        description: Inventory stock updated
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  $ref: '#/components/schemas/InventoryItem'
      '401':
        $ref: '#/components/responses/Unauthorized'
      '403':
        $ref: '#/components/responses/Forbidden'
      '404':
        $ref: '#/components/responses/NotFound'
      '422':
        $ref: '#/components/responses/ValidationError'
      '500':
        $ref: '#/components/responses/ServerError'
/inventory/items/{product}/locations/{location}/adjust:
  post:
    tags:
      - Tenant Inventory
    summary: Adjust location stock
    description: Apply a stock difference for a specific location.
    operationId: tenantAdjustLocationStock
    security:
      - bearerAuth: []
    parameters:
      - name: product
        in: path
        required: true
        schema:
          type: integer
      - name: location
        in: path
        required: true
        schema:
          type: integer
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
              - difference
            properties:
              difference:
                type: number
                format: double
              reason:
                type: string
    responses:
      '200':
        description: Inventory stock adjusted
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  $ref: '#/components/schemas/InventoryItem'
      '401':
        $ref: '#/components/responses/Unauthorized'
      '403':
        $ref: '#/components/responses/Forbidden'
      '404':
        $ref: '#/components/responses/NotFound'
      '422':
        $ref: '#/components/responses/ValidationError'
      '500':
        $ref: '#/components/responses/ServerError'
/inventory/items/{product}/transfer:
  post:
    tags:
      - Tenant Inventory
    summary: Transfer stock between locations
    description: Transfer stock between inventory locations for a product.
    operationId: tenantTransferInventoryStock
    security:
      - bearerAuth: []
    parameters:
      - name: product
        in: path
        required: true
        schema:
          type: integer
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
              - from_location_id
              - to_location_id
              - quantity
            properties:
              from_location_id:
                type: integer
              to_location_id:
                type: integer
              quantity:
                type: number
                format: double
              reason:
                type: string
    responses:
      '200':
        description: Inventory stock transferred
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  $ref: '#/components/schemas/InventoryItem'
      '401':
        $ref: '#/components/responses/Unauthorized'
      '403':
        $ref: '#/components/responses/Forbidden'
      '404':
        $ref: '#/components/responses/NotFound'
      '422':
        $ref: '#/components/responses/ValidationError'
      '500':
        $ref: '#/components/responses/ServerError'
/inventory/items/{product}/reserve:
  post:
    tags:
      - Tenant Inventory
    summary: Reserve inventory stock
    description: Reserve stock for downstream fulfillment.
    operationId: tenantReserveInventoryStock
    security:
      - bearerAuth: []
    parameters:
      - name: product
        in: path
        required: true
        schema:
          type: integer
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
              - quantity
              - reference_type
              - reference_id
            properties:
              quantity:
                type: number
                format: double
              location_id:
                type: integer
                nullable: true
              reference_type:
                type: string
              reference_id:
                type: string
              expires_at:
                type: string
                format: date-time
                nullable: true
    responses:
      '201':
        description: Inventory reservation created
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  $ref: '#/components/schemas/InventoryReservation'
      '401':
        $ref: '#/components/responses/Unauthorized'
      '403':
        $ref: '#/components/responses/Forbidden'
      '404':
        $ref: '#/components/responses/NotFound'
      '422':
        $ref: '#/components/responses/ValidationError'
      '500':
        $ref: '#/components/responses/ServerError'
/inventory/reservations:
  get:
    tags:
      - Tenant Inventory
    summary: List inventory reservations
    description: Retrieve paginated inventory reservations for the authenticated tenant.
    operationId: tenantListInventoryReservations
    security:
      - bearerAuth: []
    parameters:
      - $ref: '#/components/parameters/PageParam'
      - $ref: '#/components/parameters/PerPageParam'
      - name: status
        in: query
        schema:
          type: string
        description: Filter by reservation status
      - name: reference_type
        in: query
        schema:
          type: string
        description: Filter by reference type
    responses:
      '200':
        description: Inventory reservations retrieved
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  type: array
                  items:
                    $ref: '#/components/schemas/InventoryReservation'
                links:
                  type: object
                  additionalProperties: true
                meta:
                  type: object
                  additionalProperties: true
      '401':
        $ref: '#/components/responses/Unauthorized'
      '403':
        $ref: '#/components/responses/Forbidden'
      '500':
        $ref: '#/components/responses/ServerError'
/inventory/reservations/{reservation}/release:
  post:
    tags:
      - Tenant Inventory
    summary: Release inventory reservation
    description: Release an active inventory reservation.
    operationId: tenantReleaseInventoryReservation
    security:
      - bearerAuth: []
    parameters:
      - name: reservation
        in: path
        required: true
        schema:
          type: integer
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              reason:
                type: string
    responses:
      '200':
        description: Inventory reservation released
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  $ref: '#/components/schemas/InventoryReservation'
      '401':
        $ref: '#/components/responses/Unauthorized'
      '403':
        $ref: '#/components/responses/Forbidden'
      '404':
        $ref: '#/components/responses/NotFound'
      '422':
        $ref: '#/components/responses/ValidationError'
      '500':
        $ref: '#/components/responses/ServerError'
/inventory/reconciliations:
  get:
    tags:
      - Tenant Inventory
    summary: List inventory reconciliations
    description: Retrieve paginated inventory reconciliations for the authenticated tenant.
    operationId: tenantListInventoryReconciliations
    security:
      - bearerAuth: []
    parameters:
      - $ref: '#/components/parameters/PageParam'
      - $ref: '#/components/parameters/PerPageParam'
      - name: status
        in: query
        schema:
          type: string
        description: Filter by reconciliation status
      - name: inventory_item_id
        in: query
        schema:
          type: integer
        description: Filter by inventory item
    responses:
      '200':
        description: Inventory reconciliations retrieved
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  type: array
                  items:
                    $ref: '#/components/schemas/InventoryReconciliation'
                links:
                  type: object
                  additionalProperties: true
                meta:
                  type: object
                  additionalProperties: true
      '401':
        $ref: '#/components/responses/Unauthorized'
      '403':
        $ref: '#/components/responses/Forbidden'
      '500':
        $ref: '#/components/responses/ServerError'
/inventory/reconciliations/run:
  post:
    tags:
      - Tenant Inventory
    summary: Run inventory reconciliation
    description: Execute multi-location balancing and reconciliation for the current tenant.
    operationId: tenantRunInventoryReconciliation
    security:
      - bearerAuth: []
    requestBody:
      required: false
      content:
        application/json:
          schema:
            type: object
            properties:
              source:
                type: string
              async:
                type: boolean
                default: false
    responses:
      '200':
        description: Inventory reconciliation triggered
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  type: string
                  enum: [queued, completed]
      '401':
        $ref: '#/components/responses/Unauthorized'
      '403':
        $ref: '#/components/responses/Forbidden'
      '500':
        $ref: '#/components/responses/ServerError'
